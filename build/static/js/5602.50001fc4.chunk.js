"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[5602],{15602:function(e,n,t){t.r(n),t.d(n,{default:function(){return R}});var l=t(4942),i=t(93433),o=t(1413),a=t(29439),u=t(47313),r=t(31741),d=t(47548),s=t(12019),c=t(66407),f=t(47515),v=t(55768),h=t(73591),m=t(45705),x=t(59491),Z=t(77181),j=t(78508),p=t(58467),g=t(2717),y=t(84304),C=t(13945),b=t(90954),w=t(80314),_=t(91405),k=t(24511),S=t(10310),A=t(41481),I=t(53233),M=t(55940),P=t(74580),L=t(34491),N=t(45321),T=t(69658),z=t(48008),K=t(26672),O=t(49986),U=t(79492),D=t(46417),V=h.Z.TabPane,E=["admin","seller","moderator","manager","deliveryman","deleted_at"];function R(){var e,n,t,R,$,q,B,F=(0,k.$)().t,G=(0,g.I0)(),H=(0,p.s0)(),J=(0,u.useState)(null),Q=(0,a.Z)(J,2),W=Q[0],X=Q[1],Y=(0,u.useState)(null),ee=(0,a.Z)(Y,2),ne=ee[0],te=ee[1],le=(0,u.useContext)(P._).setIsModalVisible,ie=(0,u.useState)(!1),oe=(0,a.Z)(ie,2),ae=oe[0],ue=oe[1],re=(0,g.v9)((function(e){return e.menu}),g.wU).activeMenu,de=(0,g.v9)((function(e){return e.user}),g.wU),se=de.users,ce=de.loading,fe=de.meta,ve=de.params,he=(0,u.useState)(null),me=(0,a.Z)(he,2),xe=me[0],Ze=me[1],je=(0,u.useState)(null),pe=(0,a.Z)(je,2),ge=pe[0],ye=pe[1],Ce=(0,u.useState)("admin"),be=(0,a.Z)(Ce,2),we=be[0],_e=be[1],ke=(0,u.useState)(null),Se=(0,a.Z)(ke,2),Ae=Se[0],Ie=Se[1],Me=(null===(e=re.data)||void 0===e?void 0:e.role)||we,Pe=(0,U.Z)(),Le=Pe.isDemo,Ne=Pe.demoDeliveryman,Te=Pe.demoSeller,ze=Pe.demoAdmin,Ke=Pe.demoModerator,Oe=Pe.demoMeneger,Ue=re.data,De={sort:null===Ue||void 0===Ue?void 0:Ue.sort,column:null===Ue||void 0===Ue?void 0:Ue.column,role:Me,perPage:null===Ue||void 0===Ue?void 0:Ue.perPage,page:null===Ue||void 0===Ue?void 0:Ue.page,search:null===Ue||void 0===Ue?void 0:Ue.search},Ve=(0,u.useState)([{title:F("id"),dataIndex:"id",sorter:!0,is_show:!0},{title:F("firstname"),dataIndex:"firstname",is_show:!0},{title:F("lastname"),dataIndex:"lastname",is_show:!0},{title:F("email"),dataIndex:"email",is_show:!0,render:function(e){return(0,D.jsx)("div",{children:Le?"":e})}},{title:F("role"),dataIndex:"role",is_show:!0},{title:F("options"),dataIndex:"options",is_show:!0,render:function(e,n){return(0,D.jsxs)(m.Z,{children:[(0,D.jsx)(x.Z,{icon:(0,D.jsx)(r.Z,{}),onClick:function(){return function(e){G((0,b.bL)({url:"/users/user/".concat(e.uuid),id:"user_info",name:F("user.info")})),H("/users/user/".concat(e.uuid),{state:{user_id:e.id}})}(n)}}),(0,D.jsx)(x.Z,{icon:(0,D.jsx)(d.Z,{}),onClick:function(){return Ze(n.uuid)}}),(0,D.jsx)(x.Z,{type:"primary",icon:(0,D.jsx)(s.Z,{}),onClick:function(){return function(e){G((0,b.bL)({url:"user/".concat(e.uuid),id:"user_edit",name:"User edit"})),H("/user/".concat(e.uuid))}(n)},disabled:Le&&(null===n||void 0===n?void 0:n.id)==Ne||Le&&(null===n||void 0===n?void 0:n.id)==Ke||Le&&(null===n||void 0===n?void 0:n.id)==Oe||Le&&(null===n||void 0===n?void 0:n.id)==Te||Le&&(null===n||void 0===n?void 0:n.id)===ze}),"admin"!==(null===n||void 0===n?void 0:n.role)&&(0,D.jsxs)(m.Z,{children:[(0,D.jsx)(x.Z,{icon:(0,D.jsx)(c.Z,{}),onClick:function(){return function(e){G((0,b.bL)({url:"user-clone/".concat(e.uuid),id:"user-clone",name:"user.clone"})),H("/user-clone/".concat(e.uuid))}(n)}}),(0,D.jsx)(M.Z,{icon:(0,D.jsx)(f.Z,{}),onClick:function(){X([n.id]),le(!0),te(!0)}})]})]})}}]),Ee=(0,a.Z)(Ve,2),Re=Ee[0],$e=Ee[1];(0,u.useEffect)((function(){re.refetch&&(G((0,y.uh)(De)),G((0,b.A_)(re)))}),[re.refetch]),(0,w.Z)((function(){G((0,y.uh)(De))}),[re.data]);var qe=function(e){var n=re.data;G((0,b.nc)({activeMenu:re,data:(0,o.Z)((0,o.Z)({},n),e)}))},Be={selectedRowKeys:W,onChange:function(e){X(e)}};return(0,D.jsxs)(Z.Z,{title:F("users"),extra:(0,D.jsxs)(m.Z,{wrap:!0,children:["deleted_at"!==(null===(n=re.data)||void 0===n?void 0:n.role)?(0,D.jsxs)(m.Z,{children:[(0,D.jsx)(M.Z,{size:"",onClick:function(){null===W||0===W.length?L.Am.warning(F("select.the.product")):(le(!0),te(!1))},children:F("delete.selected")}),(0,D.jsx)(M.Z,{onClick:function(){return Ie({delete:!0})},children:F("delete.all")})]}):(0,D.jsx)(M.Z,{icon:(0,D.jsx)(K.uOc,{className:"mr-2"}),onClick:function(){return Ie({restore:!0})},children:F("restore.all")}),(0,D.jsx)(I.Z,{columns:Re,setColumns:$e})]}),children:[(0,D.jsx)("div",{className:"d-flex justify-content-between mb-3",children:(0,D.jsx)(A.Z,{placeholder:F("search"),className:"w-25",handleChange:function(e){qe({search:e})},defaultValue:null===(t=re.data)||void 0===t?void 0:t.search,resetSearch:!(null!==(R=re.data)&&void 0!==R&&R.search)})}),(0,D.jsx)(h.Z,{scroll:{x:!0},activeKey:Me,onChange:function(e){qe({role:e,page:1}),_e(e)},type:"card",children:E.map((function(e){return(0,D.jsx)(V,{tab:F(e)},e)}))}),"admin"!=Me&&"seller"!=Me&&"deleted_at"!=Me?(0,D.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,D.jsx)(x.Z,{type:"primary",icon:(0,D.jsx)(v.Z,{}),onClick:function(){return e=Me,G((0,b.bL)({id:"user-add-role",url:"user/add/".concat(e),name:F("add.".concat(e))})),void H("/user/add/".concat(e));var e},className:"mr-2",children:F("add.".concat(Me))})}):null,(0,D.jsx)(j.Z,{scroll:{x:!0},rowSelection:Be,columns:null===Re||void 0===Re?void 0:Re.filter((function(e){return e.is_show})),dataSource:se,loading:ce,pagination:{pageSize:ve.perPage,page:(null===($=re.data)||void 0===$?void 0:$.page)||1,total:fe.total,defaultCurrent:null===(q=re.data)||void 0===q?void 0:q.page,current:null===(B=re.data)||void 0===B?void 0:B.page},rowKey:function(e){return e.id},onChange:function(e,n,t){var l=e.pageSize,i=e.current,a=t.field,u=t.order,r=(0,C.Z)(u);G((0,b.nc)({activeMenu:re,data:(0,o.Z)((0,o.Z)({},re.data),{},{perPage:l,page:i,column:a,sort:r})}))}}),(0,D.jsx)(T.Z,{click:function(){ue(!0);var e=(0,o.Z)({},Object.assign.apply(Object,[{}].concat((0,i.Z)(W.map((function(e,n){return(0,l.Z)({},"ids[".concat(n,"]"),e)}))))));N.Z.delete(e).then((function(){L.Am.success(F("successfully.deleted")),G((0,y.uh)(De)),le(!1),te([])})).finally((function(){return ue(!1)}))},text:F(ne?"delete":"all.delete"),loading:ae,setText:X}),xe&&(0,D.jsx)(_.Z,{uuid:xe,handleCancel:function(){return Ze(null)}}),ge&&(0,D.jsx)(S.Z,{data:ge,handleCancel:function(){return ye(null)}}),Ae&&(0,D.jsx)(z.Z,{open:Ae,handleCancel:function(){return Ie(null)},click:Ae.restore?function(){ue(!0),O.Z.restoreAll().then((function(){L.Am.success(F("successfully.restored")),G((0,y.uh)(De)),Ie(null)})).finally((function(){return ue(!1)}))}:function(){ue(!0),O.Z.dropAll().then((function(){L.Am.success(F("successfully.deleted")),G((0,y.uh)()),Ie(null)})).finally((function(){return ue(!1)}))},text:Ae.restore?F("restore.modal.text"):F("read.carefully"),subTitle:Ae.restore?"":F("confirm.deletion"),loading:ae,setText:te})]})}}}]);