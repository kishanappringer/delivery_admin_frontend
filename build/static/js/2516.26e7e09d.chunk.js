"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[2516],{54335:function(e,n,t){t.d(n,{Z:function(){return R}});var r=t(1413),s=t(29439),a=t(47313),i=t(18197),l=t(45705),d=t(59491),o=t(58467),u=t(74165),c=t(4942),m=t(15861),p=t(68197),h=t(59624),Z=t(77181),x=t(66672),f=t(86345),j=t(6289),g=t(46155),v=t(74294),y=t(52421),b=t(49986),_=t(2717),w=t(97388),k=t(24511),I=t(75049),q=t(30763),N=t(37889),S=t(98447),O=t(74551),C=t(45005),F=t(13622),L=t(61197),Y=t(46417),D=function(e){var n=e.logoImage,t=e.setLogoImage,r=e.backImage,l=e.setBackImage,o=e.form,D=e.location,M=e.setLocation,P=e.user,H=(0,k.$)().t,R=(0,a.useState)(null),T=(0,s.Z)(R,2),E=T[0],B=T[1],A=(0,a.useState)(null),U=(0,s.Z)(A,2),V=U[0],z=U[1],$=(0,a.useState)(null),J=(0,s.Z)($,2),W=J[0],G=J[1],K=(0,_.v9)((function(e){return e.formLang}),_.wU),Q=K.defaultLang,X=K.languages;function ee(){return(ee=(0,m.Z)((0,u.Z)().mark((function e(n){var t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n,roles:"user",empty_shop:1},G(!1),e.abrupt("return",b.Z.search(t).then((function(e){return e.data.map((function(e){return{label:e.firstname+" "+(e.lastname||""),value:e.id}}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return(ne=(0,m.Z)((0,u.Z)().mark((function e(n){var t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n,type:"shop"},G(!1),e.abrupt("return",q.Z.getAll(t).then((function(e){return e.data.map((function(e){var n;return{label:(null===(n=e.translation)||void 0===n?void 0:n.title)||"no name",value:e.id}}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=(0,m.Z)((0,u.Z)().mark((function e(n){var t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!1),t={search:n},e.abrupt("return",L.Z.getAll(t).then((function(e){return e.data.map((function(e){var n;return{label:(null===(n=e.translation)||void 0===n?void 0:n.title)||"no name",value:e.id}}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re=function(){B(!0),G(!0)},se=function(){z(!0),G(!0)},ae=function(){B(!1),z(!1)};return(0,Y.jsxs)(p.Z,{gutter:12,children:[(0,Y.jsx)(h.Z,{span:24,children:(0,Y.jsx)(Z.Z,{children:(0,Y.jsxs)(p.Z,{gutter:12,children:[(0,Y.jsx)(h.Z,{span:4,children:(0,Y.jsx)(i.Z.Item,{label:H("logo.image"),children:(0,Y.jsx)(N.Z,{type:"shops/logo",imageList:n,setImageList:t,form:o,multiple:!1,name:"logo_img"})})}),(0,Y.jsx)(h.Z,{span:4,children:(0,Y.jsx)(i.Z.Item,{label:H("background.image"),children:(0,Y.jsx)(N.Z,{type:"shops/background",imageList:r,setImageList:l,form:o,multiple:!1,name:"background_img"})})}),(0,Y.jsx)(h.Z,{span:10,children:(0,Y.jsx)(i.Z.Item,{label:H("status.note"),name:"status_note",children:(0,Y.jsx)(y.Z,{rows:4})})}),(0,Y.jsx)(h.Z,{span:4,children:(0,Y.jsx)(i.Z.Item,{name:"status",label:H("status"),children:(0,Y.jsx)(x.Z,{disabled:!0})})}),(0,Y.jsx)(h.Z,{span:2,children:(0,Y.jsx)(i.Z.Item,{label:H("open"),name:"open",valuePropName:"checked",children:(0,Y.jsx)(f.Z,{disabled:!0})})})]})})}),(0,Y.jsx)(h.Z,{span:24,children:(0,Y.jsx)(Z.Z,{title:H("general"),children:(0,Y.jsxs)(p.Z,{gutter:12,children:[(0,Y.jsx)(h.Z,{span:12,children:(0,Y.jsxs)(p.Z,{gutter:12,children:[(0,Y.jsx)(h.Z,{span:24,children:X.map((function(e,n){return(0,Y.jsx)(i.Z.Item,{label:H("title"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===Q,message:H("required")},{min:2,message:H("title.requared")}],hidden:e.locale!==Q,children:(0,Y.jsx)(x.Z,{})},"title"+n)}))}),(0,Y.jsx)(h.Z,{span:24,children:(0,Y.jsx)(i.Z.Item,{label:H("phone"),name:"phone",rules:[{required:!0,message:H("required")}],children:(0,Y.jsx)(j.Z,{min:0,className:"w-100"})})})]})}),(0,Y.jsx)(h.Z,{span:12,children:X.map((function(e,n){return(0,Y.jsx)(i.Z.Item,{label:H("description"),name:"description[".concat(e.locale,"]"),rules:[{required:e.locale===Q,message:H("required")},{min:3,message:H("requared")}],hidden:e.locale!==Q,children:(0,Y.jsx)(y.Z,{rows:4})},"desc"+n)}))}),(0,Y.jsx)(h.Z,{span:8,children:(0,Y.jsx)(i.Z.Item,{label:H("shop.tags"),name:"tags",rules:[{required:!1,message:H("required")}],children:(0,Y.jsx)(F.R,{mode:"multiple",fetchOptions:function(e){return te.apply(this,arguments)},refetch:W})})}),(0,Y.jsx)(h.Z,{span:8,children:(0,Y.jsx)(i.Z.Item,{label:H("seller"),name:"user",rules:[{required:!0,message:H("required")}],children:(0,Y.jsx)(F.R,{disabled:!P,fetchOptions:function(e){return ee.apply(this,arguments)},refetch:W,dropdownRender:function(e){return(0,Y.jsxs)(Y.Fragment,{children:[e,(0,Y.jsx)(g.Z,{style:{margin:"8px 0"}}),(0,Y.jsx)(d.Z,{className:"w-100",icon:(0,Y.jsx)(S.Z,{}),onClick:re,children:H("add.user")})]})}})})}),(0,Y.jsx)(h.Z,{span:8,children:(0,Y.jsx)(i.Z.Item,{label:H("categories"),name:"categories",rules:[{required:!0,message:H("required")}],children:(0,Y.jsx)(F.R,{mode:"multiple",fetchOptions:function(e){return ne.apply(this,arguments)},refetch:W,dropdownRender:function(e){return(0,Y.jsxs)(Y.Fragment,{children:[e,(0,Y.jsx)(g.Z,{style:{margin:"8px 0"}}),(0,Y.jsx)(d.Z,{className:"w-100",icon:(0,Y.jsx)(S.Z,{}),onClick:se,children:H("add.category")})]})}})})})]})})}),(0,Y.jsx)(h.Z,{span:8,children:(0,Y.jsx)(Z.Z,{title:H("delivery"),children:(0,Y.jsxs)(p.Z,{gutter:8,children:[(0,Y.jsx)(h.Z,{span:12,children:(0,Y.jsx)(i.Z.Item,{name:"price",label:H("min.price"),rules:[{required:!0,message:H("required")}],children:(0,Y.jsx)(j.Z,{className:"w-100"})})}),(0,Y.jsx)(h.Z,{span:12,children:(0,Y.jsx)(i.Z.Item,{name:"price_per_km",label:H("price.per.km"),rules:[{required:!0,message:H("required")}],children:(0,Y.jsx)(j.Z,{className:"w-100"})})})]})})}),(0,Y.jsx)(h.Z,{span:8,children:(0,Y.jsx)(Z.Z,{title:H("delivery.time"),children:(0,Y.jsxs)(p.Z,{gutter:12,children:[(0,Y.jsx)(h.Z,{span:12,children:(0,Y.jsx)(i.Z.Item,{name:"delivery_time_type",label:H("delivery_time_type"),rules:[{required:!0,message:H("required")}],children:(0,Y.jsxs)(v.Z,{className:"w-100",children:[(0,Y.jsx)(v.Z.Option,{value:"minute",label:H("minutes")}),(0,Y.jsx)(v.Z.Option,{value:"hour",label:H("hour")})]})})}),(0,Y.jsx)(h.Z,{span:12,children:(0,Y.jsx)(i.Z.Item,{name:"delivery_time_from",label:H("delivery_time_from"),rules:[{required:!0,message:H("required")}],children:(0,Y.jsx)(j.Z,{className:"w-100"})})}),(0,Y.jsx)(h.Z,{span:12,children:(0,Y.jsx)(i.Z.Item,{name:"delivery_time_to",label:H("delivery_time_to"),rules:[{required:!0,message:H("required")}],children:(0,Y.jsx)(j.Z,{className:"w-100"})})})]})})}),(0,Y.jsx)(h.Z,{span:8,children:(0,Y.jsx)(Z.Z,{title:H("order.info"),children:(0,Y.jsxs)(p.Z,{gutter:12,children:[(0,Y.jsx)(h.Z,{span:12,children:(0,Y.jsx)(i.Z.Item,{label:H("min.amount"),name:"min_amount",rules:[{required:!0,message:H("required")}],children:(0,Y.jsx)(j.Z,{min:0,className:"w-100"})})}),(0,Y.jsx)(h.Z,{span:12,children:(0,Y.jsx)(i.Z.Item,{label:H("tax"),name:"tax",rules:[{required:!0,message:H("required")}],children:(0,Y.jsx)(j.Z,{min:0,addonAfter:"%",className:"w-100"})})}),(0,Y.jsx)(h.Z,{span:12,children:(0,Y.jsx)(i.Z.Item,{label:H("admin.comission"),name:"percentage",rules:[{required:!0,message:H("required")}],children:(0,Y.jsx)(j.Z,{min:0,className:"w-100",addonAfter:"%"})})})]})})}),(0,Y.jsx)(h.Z,{span:24,children:(0,Y.jsx)(Z.Z,{title:H("address"),children:(0,Y.jsxs)(p.Z,{gutter:12,children:[(0,Y.jsx)(h.Z,{span:12,children:X.map((function(e,n){return(0,Y.jsx)(I.Z,{setLocation:M,form:o,item:e,idx:n,defaultLang:Q},n)}))}),(0,Y.jsx)(h.Z,{span:24,children:(0,Y.jsx)(w.Z,{location:D,setLocation:M,setAddress:function(e){return o.setFieldsValue((0,c.Z)({},"address[".concat(Q,"]"),e))}})})]})})}),E&&(0,Y.jsx)(O.Z,{visible:E,handleCancel:function(){return ae()}}),V&&(0,Y.jsx)(C.Z,{visible:V,handleCancel:function(){return ae()}})]})},M=t(90954),P=t(49067),H=t(17649),R=function(e){var n,t,u,c,m,p,h,Z,x,f=e.next,j=e.action_type,g=void 0===j?"":j,v=e.user,y=(0,k.$)().t,b=i.Z.useForm(),w=(0,s.Z)(b,1)[0],I=(0,o.s0)(),q=(0,_.I0)(),N=(0,o.UO)().uuid,S=(0,_.v9)((function(e){return e.menu}),_.wU).activeMenu,O=(0,_.v9)((function(e){return e.globalSettings}),_.wU).settings,C=(0,a.useState)(null!==S&&void 0!==S&&null!==(n=S.data)&&void 0!==n&&n.location?{lat:parseFloat(null===S||void 0===S||null===(t=S.data)||void 0===t||null===(u=t.location)||void 0===u?void 0:u.latitude),lng:parseFloat(null===S||void 0===S||null===(c=S.data)||void 0===c||null===(m=c.location)||void 0===m?void 0:m.longitude)}:(0,H.Z)(O)),F=(0,s.Z)(C,2),L=F[0],R=F[1],T=(0,a.useState)(!1),E=(0,s.Z)(T,2),B=E[0],A=E[1],U=(0,a.useState)(null!==(p=S.data)&&void 0!==p&&p.logo_img?[null===(h=S.data)||void 0===h?void 0:h.logo_img]:[]),V=(0,s.Z)(U,2),z=V[0],$=V[1],J=(0,a.useState)(null!==(Z=S.data)&&void 0!==Z&&Z.background_img?[null===(x=S.data)||void 0===x?void 0:x.background_img]:[]),W=(0,s.Z)(J,2),G=W[0],K=W[1],Q=(0,a.useState)(null),X=(0,s.Z)(Q,2),ee=X[0],ne=X[1];(0,a.useEffect)((function(){return function(){var e=w.getFieldsValue(!0);e.open_time=JSON.stringify(null===e||void 0===e?void 0:e.open_time),e.close_time=JSON.stringify(null===e||void 0===e?void 0:e.close_time),q((0,M.nc)({activeMenu:S,data:(0,r.Z)((0,r.Z)({},S.data),e)}))}}),[]);return(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsxs)(i.Z,{form:w,name:"basic",layout:"vertical",onFinish:function(e){var n,t,s;A(!0);var a,i=(0,r.Z)((0,r.Z)({},e),{},{"images[0]":null===(n=z[0])||void 0===n?void 0:n.name,"images[1]":null===(t=G[0])||void 0===t?void 0:t.name,delivery_time_type:e.delivery_time_type,delivery_time_to:e.delivery_time_to,delivery_time_from:e.delivery_time_from,categories:e.categories.map((function(e){return e.value})),tags:null===(s=e.tags)||void 0===s?void 0:s.map((function(e){return e.value})),user_id:e.user.value,open:void 0,"location[latitude]":L.lat,"location[longitude]":L.lng,user:void 0,delivery_time:0,type:"shop"});"edit"===g?function(e,n){P.Z.update(N,n).then((function(){q((0,M.nc)({activeMenu:S,data:e})),f()})).catch((function(e){return ne(e.response.data.params)})).finally((function(){return A(!1)}))}(e,i):(a=i,P.Z.create(a).then((function(e){var n=e.data;q((0,M.SS)({id:"shop-".concat(n.uuid),url:"shop/".concat(n.uuid),name:y("add.shop"),data:n,refetch:!1})),I("/shop/".concat(n.uuid,"?step=1"))})).catch((function(e){return ne(e.response.data.params)})).finally((function(){return A(!1)})))},initialValues:(0,r.Z)({open:!1,status:"new"},S.data),children:[(0,Y.jsx)(D,{logoImage:z,setLogoImage:$,backImage:G,setBackImage:K,form:w,location:L,setLocation:R,error:ee,user:v}),(0,Y.jsx)(l.Z,{children:(0,Y.jsx)(d.Z,{type:"primary",htmlType:"submit",loading:B,children:y("next")})})]})})}},58892:function(e,n,t){t.d(n,{Z:function(){return D}});var r=t(93433),s=t(29439),a=t(18197),i=t(68197),l=t(66204),d=t(59624),o=t(45705),u=t(59491),c=t(77181),m=t(87462),p=t(47313),h=t(99096),Z=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)n.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(t[r[s]]=e[r[s]])}return t},x=h.Z.TimePicker,f=h.Z.RangePicker,j=p.forwardRef((function(e,n){return p.createElement(f,(0,m.Z)({},e,{dropdownClassName:e.popupClassName,picker:"time",mode:void 0,ref:n}))})),g=p.forwardRef((function(e,n){var t=e.addon,r=e.renderExtraFooter,s=e.popupClassName,a=Z(e,["addon","renderExtraFooter","popupClassName"]),i=p.useMemo((function(){return r||(t||void 0)}),[t,r]);return p.createElement(x,(0,m.Z)({},a,{dropdownClassName:s,mode:void 0,ref:n,renderExtraFooter:i}))}));g.displayName="TimePicker",g.RangePicker=j;var v=g,y=t(86345),b=t(24511),_=t(51282),w=t(70816),k=t.n(w),I=t(78790),q=t(49682),N=t(58467),S=t(21429),O=t(19393),C=t(43681),F=t(11829),L=t(58821),Y=t(46417),D=function(e){var n=e.next,t=e.prev,m=a.Z.useForm(),h=(0,s.Z)(m,1)[0],Z=(0,b.$)().t,x=(0,p.useState)([]),f=(0,s.Z)(x,2),j=f[0],g=f[1],w=(0,p.useState)(new Array(7).fill(!1)),D=(0,s.Z)(w,2),M=D[0],P=D[1],H=(0,p.useState)(!1),R=(0,s.Z)(H,2),T=R[0],E=R[1],B=(0,p.useState)(!1),A=(0,s.Z)(B,2),U=A[0],V=A[1],z=(0,N.UO)().uuid,$=[{from:new Date(1900,4,18),to:new Date}],J=(0,p.useState)(!0),W=(0,s.Z)(J,2),G=W[0],K=W[1];(0,p.useEffect)((function(){h.setFieldsValue({working_days:S.P}),z&&(V(!0),q.Z.getById(z).then((function(e){g(e.data.closed_dates.filter((function(e){return e.day>k()(new Date).format("YYYY-MM-DD")})).map((function(e){return new Date(e.day)})))})),I.Z.getById(z).then((function(e){P(0!==e.data.dates.length?e.data.dates.map((function(e){return e.disabled})):[]),0!==e.data.dates.length&&h.setFieldsValue({working_days:e.data.dates.map((function(e){return{title:e.day,from:k()(e.from,"HH:mm:ss"),to:k()(e.to,"HH:mm:ss"),disabled:Boolean(e.disabled)}}))})})).finally((function(){return V(!1)})))}),[]);var Q=j&&j.length>0?(0,Y.jsxs)(i.Z,{children:[(0,Y.jsx)(l.Z,{style:{fontSize:14,padding:"4px 10px",width:"100%",marginTop:"10px"},children:Z("Your.existing.vacations")}),(0,Y.jsxs)(d.Z,{span:24,className:"mt-2",children:[j.slice(0,G?1:j.length).map((function(e,n){return(0,Y.jsxs)(o.Z,{className:"d-flex justify-content-between",style:{borderBottom:"1px solid #4D5B75"},children:[(0,Y.jsx)(d.Z,{span:24,style:{fontSize:14,marginTop:"8px"},children:k()(e).format("YYYY-MM-DD")}),(0,Y.jsx)(d.Z,{span:24,children:(0,Y.jsx)(l.Z,{color:"red",className:"cursor-pointer mt-3 mb-2",style:{fontSize:14},onClick:function(){return n=e,g(j.filter((function(e){return e!==n})));var n},children:Z("remove")})})]},n)})),(0,Y.jsx)(u.Z,{className:"mt-3 w-100",onClick:function(){K(!G)},children:G?(0,Y.jsx)(L.ahe,{}):(0,Y.jsx)(L.dMq,{})})]})]}):(0,Y.jsx)(l.Z,{style:{fontSize:14,padding:"4px 10px",width:"100%"},children:"Please pick one or more days."}),X=function(e,n){for(var t=[],r=e;r<n;r++)t.push(r);return t},ee=function(){return{disabledHours:function(){return X(0,1)},disabledMinutes:function(){return X(0,0)},disabledSeconds:function(){return X(0,60)}}};return(0,Y.jsx)(Y.Fragment,{children:U?(0,Y.jsx)(_.Z,{}):(0,Y.jsx)(a.Z,{form:h,layout:"vertical",onFinish:function(e){E(!0);var t={dates:j?j.map((function(e){return k()(e).format("YYYY-MM-DD")})):void 0},r={dates:e.working_days.map((function(e){return{day:e.title,from:k()(e.from?e.from:"00").format("HH-mm"),to:k()(e.to?e.to:"00").format("HH-mm"),disabled:e.disabled}}))};q.Z.update(z,t).then((function(){n()})).finally((function(){return E(!1)})),0!==e.working_days.length&&I.Z.update(z,r).then((function(){n()})).finally((function(){return E(!1)}))},children:(0,Y.jsxs)(i.Z,{gutter:12,children:[(0,Y.jsx)(d.Z,{span:12,children:(0,Y.jsx)(c.Z,{title:Z("restaurant.working.days"),children:(0,Y.jsx)(i.Z,{gutter:8,children:(0,Y.jsx)(d.Z,{span:24,children:(0,Y.jsx)(a.Z.List,{name:"working_days",children:function(e){return(0,Y.jsx)("div",{children:e.map((function(e,n){return(0,Y.jsxs)(i.Z,{gutter:12,align:"center",children:[(0,Y.jsx)(d.Z,{span:7,children:(0,Y.jsx)(a.Z.Item,{name:[n,"day"],children:(0,Y.jsx)("span",{children:Z(S.P[n].title)})})}),M[e.key]?(0,Y.jsx)(d.Z,{span:13,className:"mt-2",children:(0,Y.jsx)("span",{children:Z("shop.closed")})}):(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(d.Z,{span:7,children:(0,Y.jsx)(a.Z.Item,{rules:[{required:!1===M[e.key]}],name:[n,"from"],children:(0,Y.jsx)(v,{disabledTime:ee,picker:"time",placeholder:Z("start.time")})})}),(0,Y.jsx)(d.Z,{span:6,children:(0,Y.jsx)(a.Z.Item,{rules:[{required:!1===M[e.key]}],name:[n,"to"],children:(0,Y.jsx)(v,{disabledTime:ee,picker:"time",placeholder:Z("end.time")})})})]}),(0,Y.jsx)(d.Z,{span:4,children:(0,Y.jsx)(a.Z.Item,{name:[n,"disabled"],valuePropName:"checked",children:(0,Y.jsx)(y.Z,{checkedChildren:(0,Y.jsx)(C.Z,{}),unCheckedChildren:(0,Y.jsx)(F.Z,{}),checked:M[e.key],onChange:function(){return function(e){var n=(0,r.Z)(M);n[e]=!M[e],P(n)}(e.key)}})})})]},e.key)}))})}})})})})}),(0,Y.jsx)(d.Z,{span:12,children:(0,Y.jsxs)(c.Z,{title:Z("restaurant.closed.days"),children:[(0,Y.jsx)("p",{children:Z("restaurant.closed.days.text")}),(0,Y.jsx)(a.Z.Item,{rules:[{required:!1,message:Z("required")}],children:(0,Y.jsx)(O._W,{className:"datepicker",mode:"multiple",disabled:$,min:1,selected:j,onSelect:g,footer:Q,showOutsideDays:!0})})]})}),(0,Y.jsx)(d.Z,{span:24,children:(0,Y.jsxs)(o.Z,{children:[(0,Y.jsx)(u.Z,{type:"primary",htmlType:"submit",loading:T,children:Z("next")}),(0,Y.jsx)(u.Z,{htmlType:"submit",onClick:function(){return t()},children:Z("prev")})]})})]})})})}}}]);