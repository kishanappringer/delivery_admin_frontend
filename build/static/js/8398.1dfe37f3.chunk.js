"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[8398],{58398:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var r=t(29439),a=t(47313),i=t(86345),l=t(59491),s=t(77181),c=t(45705),o=t(78508),d=t(12019),u=t(74580),m=t(18197),h=t(84695),f=t(68197),Z=t(59624),x=t(6289),j=t(66672),p=t(24511),b=t(59536),v=t(46417);function y(e){var n=e.modal,t=e.handleCancel,i=e.refetch,s=m.Z.useForm(),c=(0,r.Z)(s,1)[0],o=(0,p.$)().t,d=(0,a.useState)(!1),u=(0,r.Z)(d,2),y=u[0],g=u[1];return(0,v.jsx)(h.Z,{visible:!!n,title:o("add.sms.geteways"),onCancel:t,footer:[(0,v.jsx)(l.Z,{type:"primary",onClick:function(){return c.submit()},loading:y,children:o("save")},"save-btn"),(0,v.jsx)(l.Z,{type:"default",onClick:t,children:o("cancel")},"cancel-btn")],children:(0,v.jsx)(m.Z,{form:c,layout:"vertical",onFinish:function(e){g(!0),b.Z.update(n.id,e).then((function(){t(),i()})).finally((function(){return g(!1)}))},initialValues:n,children:(0,v.jsxs)(f.Z,{gutter:12,children:[(0,v.jsxs)(Z.Z,{span:24,children:[(0,v.jsx)(m.Z.Item,{label:"From",name:"from",rules:[{required:!0,message:o("required")}],children:(0,v.jsx)(x.Z,{className:"w-100"})}),(0,v.jsx)(m.Z.Item,{label:"Messaging Service ID",name:"service_id",rules:[{required:!0,message:o("required")}],children:(0,v.jsx)(j.Z,{min:0,className:"w-100"})})]}),(0,v.jsx)(Z.Z,{span:24,children:(0,v.jsx)(m.Z.Item,{label:"API Key",name:"api_key",rules:[{required:!0,message:o("required")}],children:(0,v.jsx)(x.Z,{})})}),(0,v.jsx)(Z.Z,{span:24,children:(0,v.jsx)(m.Z.Item,{label:"API Secret",name:"secret_key",rules:[{required:!0,message:o("required")}],children:(0,v.jsx)(j.Z,{className:"w-100"})})}),(0,v.jsx)(Z.Z,{span:24,children:(0,v.jsx)(m.Z.Item,{label:"OTP template",name:"text",rules:[{required:!0,message:o("required")},function(e){var n=e.getFieldValue;return{validator:function(){return n("text").includes("#OTP#")?Promise.resolve():Promise.reject("#OTP# is required as your code will be placed here")}}}],children:(0,v.jsx)(j.Z,{})})})]})})})}var g=t(90954),w=t(2717),C=t(26747);function k(e){var n=e.modal,t=e.handleCancel,i=e.refetch,s=m.Z.useForm(),c=(0,r.Z)(s,1)[0],o=(0,p.$)().t,d=(0,a.useState)(!1),u=(0,r.Z)(d,2),y=u[0],g=u[1];return(0,v.jsx)(h.Z,{visible:!!n,title:o("add.sms.geteways"),onCancel:t,footer:[(0,v.jsx)(l.Z,{type:"primary",onClick:function(){return c.submit()},loading:y,children:o("save")},"save-btn"),(0,v.jsx)(l.Z,{type:"default",onClick:t,children:o("cancel")},"cancel-btn")],children:(0,v.jsx)(m.Z,{form:c,layout:"vertical",onFinish:function(e){g(!0),b.Z.create(e).then((function(){t(),i()})).finally((function(){return g(!1)}))},initialValues:n,children:(0,v.jsxs)(f.Z,{gutter:12,children:[(0,v.jsxs)(Z.Z,{span:24,children:[(0,v.jsx)(m.Z.Item,{label:"twilio_account_id",name:"twilio_account_id ",rules:[{required:!0,message:o("required")}],children:(0,v.jsx)(x.Z,{className:"w-100"})}),(0,v.jsx)(m.Z.Item,{label:"twilio_auth_token",name:"twilio_auth_token",rules:[{required:!0,message:o("required")}],children:(0,v.jsx)(j.Z,{min:0,className:"w-100"})})]}),(0,v.jsx)(Z.Z,{span:24,children:(0,v.jsx)(m.Z.Item,{label:"twilio_number",name:"twilio_number",rules:[{required:!0,message:o("required")}],children:(0,v.jsx)(x.Z,{className:"w-100"})})})]})})})}function I(){var e=(0,p.$)().t,n=(0,a.useState)(null),t=(0,r.Z)(n,2),m=t[0],h=t[1],f=(0,a.useState)(null),Z=(0,r.Z)(f,2),x=Z[0],j=Z[1],b=(0,a.useContext)(u._).setIsModalVisible,I=(0,w.I0)(),_=(0,w.v9)((function(e){return e.menu}),w.wU).activeMenu,N=(0,w.v9)((function(e){return e.sms}),w.wU),q=N.smsGatewaysList,O=N.loading,S=[{title:e("id"),dataIndex:"id"},{title:e("title"),dataIndex:"title"},{title:e("from"),dataIndex:"from"},{title:e("type"),dataIndex:"type"},{title:e("active"),dataIndex:"active",key:"active",render:function(e){return(0,v.jsx)(i.Z,{onChange:function(){b(!0)},checked:e})}},{title:e("options"),dataIndex:"options",render:function(e,n){return(0,v.jsx)(l.Z,{type:"primary",icon:(0,v.jsx)(d.Z,{}),onClick:function(){return j(n)}})}}];return(0,a.useEffect)((function(){_.refetch&&(I((0,C.z)()),I((0,g.A_)(_)))}),[_.refetch]),(0,v.jsxs)(s.Z,{title:e("sms.gateway"),extra:(0,v.jsx)(c.Z,{children:(0,v.jsx)(l.Z,{onClick:function(e){return h(!0)},type:"primary",children:e("add.sms.gateway")})}),children:[(0,v.jsx)(o.Z,{scroll:{x:!0},columns:S,rowKey:function(e){return e.id},dataSource:q,pagination:!1,loading:O}),m&&(0,v.jsx)(k,{modal:m,handleCancel:function(){return h(null)},refetch:C.z}),x&&(0,v.jsx)(y,{modal:x,handleCancel:function(){return j(null)},refetch:C.z})]})}},86345:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(87462),a=t(4942),i=t(47313),l=t(29439),s=t(45987),c=t(46123),o=t.n(c),d=t(10288),u=t(49242),m=i.forwardRef((function(e,n){var t,r=e.prefixCls,c=void 0===r?"rc-switch":r,m=e.className,h=e.checked,f=e.defaultChecked,Z=e.disabled,x=e.loadingIcon,j=e.checkedChildren,p=e.unCheckedChildren,b=e.onClick,v=e.onChange,y=e.onKeyDown,g=(0,s.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),w=(0,d.Z)(!1,{value:h,defaultValue:f}),C=(0,l.Z)(w,2),k=C[0],I=C[1];function _(e,n){var t=k;return Z||(I(t=e),null===v||void 0===v||v(t,n)),t}var N=o()(c,m,(t={},(0,a.Z)(t,"".concat(c,"-checked"),k),(0,a.Z)(t,"".concat(c,"-disabled"),Z),t));return i.createElement("button",Object.assign({},g,{type:"button",role:"switch","aria-checked":k,disabled:Z,className:N,ref:n,onKeyDown:function(e){e.which===u.Z.LEFT?_(!1,e):e.which===u.Z.RIGHT&&_(!0,e),null===y||void 0===y||y(e)},onClick:function(e){var n=_(!k,e);null===b||void 0===b||b(n,e)}}),x,i.createElement("span",{className:"".concat(c,"-inner")},k?j:p))}));m.displayName="Switch";var h=m,f=t(82508),Z=t(46479),x=t(91964),j=t(21631),p=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t},b=i.forwardRef((function(e,n){var t,l=e.prefixCls,s=e.size,c=e.loading,d=e.className,u=void 0===d?"":d,m=e.disabled,b=p(e,["prefixCls","size","loading","className","disabled"]),v=i.useContext(x.E_),y=v.getPrefixCls,g=v.direction,w=i.useContext(j.Z),C=y("switch",l),k=i.createElement("div",{className:"".concat(C,"-handle")},c&&i.createElement(f.Z,{className:"".concat(C,"-loading-icon")})),I=o()((t={},(0,a.Z)(t,"".concat(C,"-small"),"small"===(s||w)),(0,a.Z)(t,"".concat(C,"-loading"),c),(0,a.Z)(t,"".concat(C,"-rtl"),"rtl"===g),t),u);return i.createElement(Z.Z,{insertExtraNode:!0},i.createElement(h,(0,r.Z)({},b,{prefixCls:C,className:I,disabled:m||c,ref:n,loadingIcon:k})))}));b.__ANT_SWITCH=!0,b.displayName="Switch";var v=b}}]);