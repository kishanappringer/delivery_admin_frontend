"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[7497],{97388:function(e,n,a){a.d(n,{Z:function(){return f}});var r=a(74165),t=a(15861),s=a(29439),l=a(47313),i=a(16609),o=a(97421),u=a.p+"static/media/pin.0e41858db80c699cd8a2.png",d=a(31881),c=a.n(d);function m(e){return p.apply(this,arguments)}function p(){return p=(0,t.Z)((0,r.Z)().mark((function e(n){var a,t,s=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:"AIzaSyDI0dNtJchqNdUbml5PyVGrUqJDSuJLMdg",t={latlng:"".concat(null===n||void 0===n?void 0:n.lat,",").concat(null===n||void 0===n?void 0:n.lng),key:a},e.abrupt("return",c().get("https://maps.googleapis.com/maps/api/geocode/json",{params:t}).then((function(e){var n;return null===(n=e.data.results[0])||void 0===n?void 0:n.formatted_address})).catch((function(e){return"not found"})));case 3:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}var h=a(5958),v=a(46417);var f=(0,i.GoogleApiWrapper)({apiKey:o.kr})((function(e){var n=(0,l.useState)(),a=(0,s.Z)(n,2),d=a[0],c=a[1],p=function(){var n=(0,t.Z)((0,r.Z)().mark((function n(a,t,s){var l,i,u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=s.latLng,i={lat:l.lat(),lng:l.lng()},e.setLocation(i),n.next=5,m(i,o.kr);case 5:u=n.sent,e.setAddress(u);case 7:case"end":return n.stop()}}),n)})));return function(e,a,r){return n.apply(this,arguments)}}(),f=function(){var n=(0,t.Z)((0,r.Z)().mark((function n(a){var t,s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={lat:null===a||void 0===a?void 0:a.lat,lng:null===a||void 0===a?void 0:a.lng},e.setLocation(t),n.next=4,m(t,o.kr);case 4:s=n.sent,e.setAddress(s);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),Z=function(){var e=(0,t.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.geolocation.getCurrentPosition((function(e){var n={lat:e.coords.latitude,lng:e.coords.longitude};c(n)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){Z()}),[]);for(var g=[{lat:Number(e.location.lat)||0,lng:Number(e.location.lng)||0}],x=new e.google.maps.LatLngBounds,j=0;j<g.length;j++)x.extend(g[j]);return(0,v.jsxs)("div",{className:"map-container",style:{height:400,width:"100%"},children:[(0,v.jsx)("button",{className:"map-button",type:"button",onClick:function(){Z(),f(d)},children:(0,v.jsx)(h.nDs,{})}),(0,v.jsx)(i.Map,{cursor:"pointer",onClick:p,google:e.google,defaultZoom:12,zoom:10,className:"clickable",initialCenter:e.location,center:e.location,children:(0,v.jsx)(i.Marker,{position:e.location,icon:{url:u,scaledSize:new e.google.maps.Size(32,32)},className:"marker"})})]})}))},68652:function(e,n,a){a.r(n),a.d(n,{default:function(){return A}});var r=a(74165),t=a(15861),s=a(1413),l=a(29439),i=a(47313),o=a(18197),u=a(77181),d=a(68197),c=a(59624),m=a(66672),p=a(6289),h=a(99096),v=a(74294),f=a(46155),Z=a(59491),g=a(58467),x=a(34491),j=a(2717),b=a(90954),w=a(49986),y=a(24511),q=a(70816),k=a.n(q),I=a(37889),_=a(89281),S=a(53149),N=a(84304),L=a(45321),C=a(17649),z=a(97388),F=a(46417),M=[{label:"Benzine",value:"benzine"},{label:"Diesel",value:"diesel"},{label:"Gas",value:"gas"},{label:"Motorbike",value:"motorbike"},{label:"Bike",value:"bike"},{label:"Foot",value:"foot"},{label:"Electric",value:"electric"}],O=function(e){var n=e.location,a=e.setLocation,r=e.form,t=e.image,s=e.setImage,l=(0,y.$)().t;return(0,F.jsxs)(d.Z,{gutter:12,children:[(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:l("brand"),name:"brand",rules:[{required:!0,message:l("required")}],children:(0,F.jsx)(m.Z,{})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:l("model"),name:"model",rules:[{required:!0,message:l("required")}],children:(0,F.jsx)(m.Z,{})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:l("type.of.technique"),name:"type_of_technique",rules:[{required:!0,message:l("required")}],children:(0,F.jsx)(v.Z,{options:M})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:l("car.number"),name:"number",rules:[{required:!0,message:l("required")}],children:(0,F.jsx)(m.Z,{})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:l("car.color"),name:"color",rules:[{required:!0,message:l("required")}],children:(0,F.jsx)(m.Z,{})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:l("image"),name:"images",children:(0,F.jsx)(I.Z,{type:"deliveryman/settings",imageList:t,setImageList:s,form:r,length:"1",multiple:!0})})}),(0,F.jsx)(c.Z,{span:24,children:(0,F.jsx)(o.Z.Item,{label:l("map"),name:"location",children:(0,F.jsx)(z.Z,{location:n,setLocation:a})})})]})},P=a(81566);function A(){var e,n,a=(0,y.$)().t,q=o.Z.useForm(),z=(0,l.Z)(q,1)[0],M=(0,i.useState)(),A=(0,l.Z)(M,2),D=A[0],J=A[1],U=(0,i.useState)(null),V=(0,l.Z)(U,2),B=V[0],E=V[1],G=(0,i.useState)(!1),T=(0,l.Z)(G,2),W=T[0],$=T[1],H=(0,g.s0)(),K=(0,g.UO)().role,Q=(0,j.v9)((function(e){return e.globalSettings}),j.wU).settings,R=(0,i.useState)((0,C.Z)(Q)),X=(0,l.Z)(R,2),Y=X[0],ee=X[1];(0,i.useEffect)((function(){return function(){var e=z.getFieldsValue(!0);e.birthday=JSON.stringify(null===e||void 0===e?void 0:e.birthday),re((0,b.nc)({activeMenu:ae,data:(0,s.Z)((0,s.Z)({},ae.data),e)}))}}),[]);var ne=(0,g.TH)(),ae=(0,j.v9)((function(e){return e.menu.activeMenu})),re=(0,j.I0)(),te=(0,i.useState)(null!==ae&&void 0!==ae&&null!==(e=ae.data)&&void 0!==e&&e.image?[null===ae||void 0===ae||null===(n=ae.data)||void 0===n?void 0:n.image]:[]),se=(0,l.Z)(te,2),le=se[0],ie=se[1],oe=(0,i.useState)([]),ue=(0,l.Z)(oe,2),de=ue[0],ce=ue[1];function me(){return me=(0,t.Z)((0,r.Z)().mark((function e(n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={search:n,status:"approved"},e.abrupt("return",S.Z.search(a).then((function(e){return e.data.map((function(e){return{label:null!==e.translation?e.translation.title:"no name",value:e.id}}))})));case 2:case"end":return e.stop()}}),e)}))),me.apply(this,arguments)}return(0,F.jsx)(u.Z,{title:a("add.user"),children:(0,F.jsx)(o.Z,{form:z,layout:"vertical",initialValues:(0,s.Z)((0,s.Z)({gender:"male"},ae.data),function(){var e,n;if(null===(e=ae.data)||void 0===e||!e.birthday)return{};var a=JSON.parse(null===(n=ae.data)||void 0===n?void 0:n.birthday);return{birthday:k()(a)}}()),onFinish:function(e){var n,r;$(!0);var t={firstname:e.firstname,lastname:e.lastname,email:e.user_email,phone:e.phone,birthday:D,gender:e.gender,password_confirmation:e.password_confirmation,password:e.password,images:[null===(n=le[0])||void 0===n?void 0:n.name],shop_id:null!==e&&void 0!==e&&e.shop_id?null===e||void 0===e||null===(r=e.shop_id)||void 0===r?void 0:r.map((function(e){return e.value})):void 0,role:K||void 0},l=ne.pathname.search("/user/delivery/")?"deliveries/list":"users/admin";console.log(l),w.Z.create(t).then((function(n){var r=n.data,t={color:e.color,number:e.number,type_of_technique:e.type_of_technique,brand:e.brand,model:e.model,user_id:r.id,images:le.map((function(e){return e.name})),location:{latitude:Y.lat,longitude:Y.lng}};L.Z.create(t).then((function(){x.Am.success(a("successfully.created")),re((0,b.ph)((0,s.Z)((0,s.Z)({},ae),{},{nextUrl:l}))),H("/".concat(l)),re(ne.pathname.search("/user/delivery/")?(0,P.W)():(0,N.uh)({role:K}))}))})).catch((function(e){return E(e.response.data.params)})).finally((function(){return $(!1)}))},children:(0,F.jsxs)(d.Z,{gutter:12,children:[(0,F.jsx)(c.Z,{span:24,children:(0,F.jsx)(o.Z.Item,{rules:[{required:!1,message:a("required")}],label:a("avatar"),children:(0,F.jsx)(I.Z,{type:"users",imageList:le,setImageList:ie,form:z,multiple:!1})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:a("firstname"),name:"firstname",help:null!==B&&void 0!==B&&B.firstname?B.firstname[0]:null,validateStatus:null!==B&&void 0!==B&&B.firstname?"error":"success",rules:[{required:!0,message:a("required")}],children:(0,F.jsx)(m.Z,{})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:"lastname",name:"lastname",help:null!==B&&void 0!==B&&B.lastname?B.lastname[0]:null,validateStatus:null!==B&&void 0!==B&&B.lastname?"error":"success",rules:[{required:!0,message:a("required")}],children:(0,F.jsx)(m.Z,{})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:a("phone"),name:"phone",help:null!==B&&void 0!==B&&B.phone?B.phone[0]:null,validateStatus:null!==B&&void 0!==B&&B.phone?"error":"success",rules:[{required:!0,message:a("required")}],children:(0,F.jsx)(p.Z,{min:0,className:"w-100"})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:a("birthday"),name:"birthday",rules:[{required:!0,message:a("required")}],children:(0,F.jsx)(h.Z,{onChange:function(e,n){return J(n)},className:"w-100",disabledDate:function(e){return k()().add(-1,"days")<=e}})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:a("gender"),name:"gender",rules:[{required:!0,message:a("required")}],children:(0,F.jsxs)(v.Z,{picker:"dayTime",className:"w-100",children:[(0,F.jsx)(v.Z.Option,{value:"male",children:a("male")}),(0,F.jsx)(v.Z.Option,{value:"female",children:a("female")})]})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:a("email"),name:"user_email",help:null!==B&&void 0!==B&&B.email?B.email[0]:null,validateStatus:null!==B&&void 0!==B&&B.email?"error":"success",rules:[{required:!0,message:a("required")}],children:(0,F.jsx)(m.Z,{type:"email"})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:a("password"),name:"password",help:null!==B&&void 0!==B&&B.password?B.password[0]:null,validateStatus:null!==B&&void 0!==B&&B.password?"error":"success",rules:[{required:!0,message:a("required")}],children:(0,F.jsx)(m.Z.Password,{type:"password",className:"w-100"})})}),"admin"!==K&&"manager"!==K&&"seller"!==K&&"user"!==K&&(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:a("shop"),name:"shop_id",rules:[{required:!0,message:a("required")}],children:(0,F.jsx)(_.h,{mode:"multiple",className:"w-100",placeholder:a("select.shop"),fetchOptions:function(e){return me.apply(this,arguments)},allowClear:!1})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:a("password.confirmation"),help:null!==B&&void 0!==B&&B.password_confirmation?B.password_confirmation[0]:null,validateStatus:null!==B&&void 0!==B&&B.password_confirmation?"error":"success",name:"password_confirmation",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:a("required")},function(e){var n=e.getFieldValue;return{validator:function(e,r){return r&&n("password")!==r?Promise.reject(a("two.passwords.dont.match")):Promise.resolve()}}}],children:(0,F.jsx)(m.Z.Password,{type:"password"})})}),(0,F.jsx)(f.Z,{className:"pt-3 pb-3",dashed:!0,orientation:"left",plain:!0,children:a("deliveryman.settings")}),"deliveryman"===K&&(0,F.jsx)(O,{setLocation:ee,location:Y,setImage:ce,image:de,form:z}),(0,F.jsx)(c.Z,{span:24,children:(0,F.jsx)(Z.Z,{type:"primary",htmlType:"submit",loading:W,children:a("save")})})]})})})}}}]);