"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[726],{80726:function(e,t,r){r.r(t);var n=r(29439),i=r(56140),a=r(99096),c=r(66204),s=r(78267),l=r(67251),d=r(72652),o=r(68197),u=r(59624),h=r(45705),f=r(77181),v=r(78508),p=r(47313),x=r(90954),m=r(2717),g=r(22133),j=r(70816),Z=r.n(j),_=r(93131),y=r(53233),b=r(58467),k=r(24511),w=r(51283),C=r(80314),I=r(84017),q=r(46417),N=i.Z.Text,z=i.Z.Title,S=a.Z.RangePicker;t.default=function(){var e=(0,m.I0)(),t=(0,b.s0)(),r=(0,k.$)().t,i=(0,p.useContext)(_.G),a=i.date_from,j=i.date_to,F=i.by_time,O=i.chart,P=i.handleChart,A=i.handleDateRange,D=(0,m.v9)((function(e){return e.menu}),m.wU).activeMenu,L=(0,m.v9)((function(e){return e.orderReport}),m.wU),R=L.loading,U=L.chartData,E=L.productList,T=(0,m.v9)((function(e){return e.currency}),m.wU).defaultCurrency,B=(0,p.useState)([{title:"Order #",dataIndex:"id",key:"id",is_show:!0,render:function(e,t){return(0,q.jsxs)("a",{onClick:function(){return $(t)},children:["#",t.id]})}},{title:"Status",dataIndex:"items_sold",key:"items_sold",is_show:!0,render:function(e,t){return(0,q.jsx)(c.Z,{children:t.status})}},{title:"Customer",dataIndex:"user_firstname",key:"user_firstname",is_show:!0,render:function(e,t){return(0,q.jsx)(q.Fragment,{children:"".concat(t.firstname," ").concat(t.lastname)})}},{title:"Customer type",key:"user_active",dataIndex:"user_active",is_show:!0,render:function(e,t){var r=Boolean(t.active);return(0,q.jsx)(c.Z,{color:r?"green":"red",children:r?"Active":"Inactive"},t.id)}},{title:"Product(s)",key:"category",dataIndex:"category",is_show:!0,render:function(e,t){var r,n,i;return(null===(r=t.products)||void 0===r?void 0:r.length)>1?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("p",{children:t.products[0]}),(0,q.jsx)(s.Z,{overlay:(0,q.jsx)(l.Z,{children:null===(n=t.products)||void 0===n?void 0:n.slice(1,t.products.length).map((function(e,t){return(0,q.jsx)(l.Z.Item,{children:e},t)}))}),children:(0,q.jsx)(c.Z,{style:{cursor:"pointer"},children:"+ ".concat((null===(i=t.products)||void 0===i?void 0:i.length)-1," more")})})]}):(0,q.jsx)(q.Fragment,{children:t.products[0]})}},{title:"Item sold",key:"item_sold",dataIndex:"item_sold",sorter:function(e,t){return Number(e.quantity)-Number(t.quantity)},is_show:!0,render:function(e,t){return Number(t.quantity)}},{title:"Net sales",key:"price",dataIndex:"price",is_show:!0,sorter:function(e,t){return e.price-t.price},render:function(e,t){return(0,q.jsx)(q.Fragment,{children:(0,I.Z)(t.price,null===T||void 0===T?void 0:T.symbol)})}}]),G=(0,n.Z)(B,2),K=G[0],M=G[1],V=[{label:"Item sold",value:"quantity",price:!1,qty:"quantity"},{label:"Net sales",value:"price",price:!0,qty:"price"},{label:"Avg Order price",value:"avg_price",price:!0,qty:"avg_price"},{label:"Orders",value:"count",price:!1,qty:"count"}],$=function(n){e((0,x.bL)({url:"order/details/".concat(n.id),id:"order_details",name:r("order.details")})),t("/order/details/".concat(n.id))},H=function(){if(V.find((function(e){return e.value===O}))){var t={date_from:a,date_to:j,type:F,chart:O};e((0,w.zL)(t))}},J=function(t,r){e((0,w.Pf)({date_from:a,date_to:j,by_time:F,chart:O,page:t,perPage:r}))};(0,p.useEffect)((function(){P(V[0].value)}),[]),(0,p.useEffect)((function(){D.refetch&&(J(),H(),e((0,x.A_)(D)))}),[D.refetch]),(0,C.Z)((function(){J()}),[j,F,O,a]),(0,C.Z)((function(){H()}),[j,F,O,a]);return(0,q.jsxs)(d.Z,{size:"large",spinning:R,children:[(0,q.jsx)(o.Z,{gutter:24,className:"mb-3",children:(0,q.jsx)(u.Z,{span:12,children:(0,q.jsx)(h.Z,{size:"large",children:(0,q.jsx)(S,{defaultValue:[Z()(a),Z()(j)],onChange:A})})})}),(0,q.jsx)(o.Z,{gutter:24,className:"report-products",children:null===V||void 0===V?void 0:V.map((function(e,t){return(0,q.jsx)(u.Z,{span:6,onClick:function(){return P(e.value)},children:(0,q.jsxs)(f.Z,{className:O===e.value&&"active",children:[(0,q.jsx)(o.Z,{className:"mb-5",children:(0,q.jsx)(u.Z,{children:(0,q.jsx)(N,{children:e.label})})}),(0,q.jsx)(o.Z,{gutter:24,children:(0,q.jsx)(u.Z,{span:18,children:(0,q.jsx)(z,{level:2,children:e.price?(0,I.Z)(U[e.qty],null===T||void 0===T?void 0:T.symbol):U[e.qty]})})})]})},e.label)}))}),(0,q.jsx)(g.Z,{reportData:U,chart_data:"price_avg"}),(0,q.jsx)(o.Z,{gutter:24,children:(0,q.jsx)(u.Z,{span:24,children:(0,q.jsxs)(f.Z,{children:[(0,q.jsxs)(h.Z,{className:"d-flex justify-content-between",children:[(0,q.jsx)(N,{level:3,children:"Orders"}),(0,q.jsxs)(h.Z,{className:"d-flex justify-content-end",children:[(0,q.jsx)(c.Z,{color:"geekblue",children:r("compare")}),(0,q.jsx)(y.Z,{columns:K,setColumns:M})]})]}),(0,q.jsx)(v.Z,{columns:null===K||void 0===K?void 0:K.filter((function(e){return e.is_show})),dataSource:null===E||void 0===E?void 0:E.data,rowKey:function(e){return e.id},loading:R,pagination:{pageSize:null===E||void 0===E?void 0:E.per_page,page:(null===E||void 0===E?void 0:E.current_page)||1,total:null===E||void 0===E?void 0:E.total,defaultCurrent:1},onChange:function(e){var t=e.pageSize,r=e.current;J(r,t)},scroll:{x:1200}})]})})})]})}}}]);