"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[9738],{89802:function(e,n,t){t.d(n,{q:function(){return d}});var a=t(1413),i=t(29439),l=t(45987),s=t(47313),r=t(74294),o=t(72652),u=t(46417),c=["fetchOptions","refetch"],d=function(e){var n=e.fetchOptions,t=e.refetch,d=void 0!==t&&t,f=(0,l.Z)(e,c),h=(0,s.useState)(!1),v=(0,i.Z)(h,2),b=v[0],m=v[1],p=(0,s.useState)([]),x=(0,i.Z)(p,2),Z=x[0],j=x[1];return(0,u.jsx)(r.Z,(0,a.Z)((0,a.Z)({labelInValue:!0,filterOption:!1,notFoundContent:b?(0,u.jsx)(o.Z,{size:"small"}):"no results"},f),{},{options:b?[]:Z,onFocus:function(){Z.length&&!d||(m(!0),n().then((function(e){j(e),m(!1)})))}}))}},79738:function(e,n,t){t.r(n);var a=t(1413),i=t(29439),l=t(47313),s=t(58467),r=t(34491),o=t(18197),u=t(77181),c=t(68197),d=t(59624),f=t(6289),h=t(99096),v=t(86345),b=t(59491),m=t(2717),p=t(90954),x=t(18333),Z=t(24511),j=t(70816),y=t.n(j),_=t(96708),g=t(73346),k=t(89802),C=t(51282),N=t(46417);n.default=function(){var e=(0,Z.$)().t,n=(0,m.v9)((function(e){return e.menu}),m.wU).activeMenu,t=(0,m.I0)(),j=o.Z.useForm(),w=(0,i.Z)(j,1)[0],q=(0,s.s0)(),O=(0,l.useState)(!1),I=(0,i.Z)(O,2),S=I[0],E=I[1],D=(0,l.useState)(!1),Y=(0,i.Z)(D,2),F=Y[0],T=Y[1],M=(0,s.UO)().id;(0,l.useEffect)((function(){return function(){var e=w.getFieldsValue(!0);e.expired_at=JSON.stringify(null===e||void 0===e?void 0:e.expired_at),t((0,p.nc)({activeMenu:n,data:e}))}}),[]);var P=function(e){T(!0),g.Z.getById(e).then((function(e){!function(e){var n,t,i,l,s,r;w.setFieldsValue((0,a.Z)((0,a.Z)({},e),{},{expired_at:y()(e.expired_at,"YYYY-MM-DD"),bonusable_id:{label:(null===e||void 0===e||null===(n=e.bonusable)||void 0===n?void 0:n.product.translation.title)+" "+(null===(t=e.bonusable)||void 0===t?void 0:t.extras.map((function(e){return e.value})).join(", ")),value:null===(i=e.bonusable)||void 0===i?void 0:i.id},bonus_stock_id:{label:(null===e||void 0===e||null===(l=e.bonusStock)||void 0===l?void 0:l.product.translation.title)+" "+(null===(s=e.bonusStock)||void 0===s?void 0:s.extras.map((function(e){return e.value})).join(", ")),value:null===e||void 0===e||null===(r=e.bonusable)||void 0===r?void 0:r.id}})),T(!1)}(e.data)})).finally((function(){return t((0,p.A_)(n))}))};(0,l.useEffect)((function(){n.refetch&&P(M)}),[n.refetch]);function V(){return x.Z.getStock().then((function(e){return e.data.map((function(e){var n;return{label:e.product.translation.title+" "+(null===(n=e.extras)||void 0===n?void 0:n.map((function(e){return e.value})).join(", ")),value:e.id}}))}))}return(0,N.jsx)(u.Z,{title:e("add.bonus"),className:"h-100",children:F?(0,N.jsx)(C.Z,{}):(0,N.jsxs)(o.Z,{name:"bonus-add",layout:"vertical",onFinish:function(i){var l={expired_at:y()(i.expired_at).format("YYYY-MM-DD"),status:i.status,type:"count",bonusable_id:i.bonusable_id.value,value:i.value,bonus_stock_id:i.bonus_stock_id.value,bonus_quantity:i.bonus_quantity};E(!0);var s="seller/bonus/product";g.Z.update(M,l).then((function(){r.Am.success(e("successfully.created")),t((0,p.ph)((0,a.Z)((0,a.Z)({},n),{},{nextUrl:s}))),q("/".concat(s)),t((0,_.k)())})).finally((function(){return E(!1)}))},form:w,initialValues:(0,a.Z)((0,a.Z)({status:!0},n.data),function(){var e,t;if(null===(e=n.data)||void 0===e||!e.expired_at)return{};var a=JSON.parse(null===(t=n.data)||void 0===t?void 0:t.expired_at);return{expired_at:y()(a,"HH:mm:ss")}}()),className:"d-flex flex-column h-100",children:[(0,N.jsxs)(c.Z,{gutter:12,children:[(0,N.jsx)(d.Z,{span:12,children:(0,N.jsx)(o.Z.Item,{label:e("products.stock"),name:"bonusable_id",rules:[{required:!0,message:e("required")}],children:(0,N.jsx)(k.q,{fetchOptions:V,debounceTimeout:200})})}),(0,N.jsx)(d.Z,{span:12,children:(0,N.jsx)(o.Z.Item,{label:e("product.quantity"),name:"value",rules:[{required:!0,message:e("required")}],children:(0,N.jsx)(f.Z,{className:"w-100"})})}),(0,N.jsx)(d.Z,{span:12,children:(0,N.jsx)(o.Z.Item,{label:e("bonus.product.stock"),name:"bonus_stock_id",rules:[{required:!0,message:e("required")}],children:(0,N.jsx)(k.q,{fetchOptions:V,debounceTimeout:200})})}),(0,N.jsx)(d.Z,{span:12,children:(0,N.jsx)(o.Z.Item,{label:e("bonus.product.quantity"),name:"bonus_quantity",rules:[{required:!0,message:e("required")}],children:(0,N.jsx)(f.Z,{className:"w-100"})})}),(0,N.jsx)(d.Z,{span:12,children:(0,N.jsx)(o.Z.Item,{name:"expired_at",label:e("expired.at"),rules:[{required:!0,message:e("required")}],children:(0,N.jsx)(h.Z,{className:"w-100",placeholder:"",disabledDate:function(e){return y()().add(-1,"days")>=e}})})}),(0,N.jsx)(d.Z,{span:8,children:(0,N.jsx)(o.Z.Item,{label:e("active"),name:"status",valuePropName:"checked",children:(0,N.jsx)(v.Z,{})})})]}),(0,N.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,N.jsx)("div",{className:"pb-5",children:(0,N.jsx)(b.Z,{type:"primary",htmlType:"submit",loading:S,children:e("submit")})})})]})})}},86345:function(e,n,t){t.d(n,{Z:function(){return j}});var a=t(87462),i=t(4942),l=t(47313),s=t(29439),r=t(45987),o=t(46123),u=t.n(o),c=t(10288),d=t(49242),f=l.forwardRef((function(e,n){var t,a=e.prefixCls,o=void 0===a?"rc-switch":a,f=e.className,h=e.checked,v=e.defaultChecked,b=e.disabled,m=e.loadingIcon,p=e.checkedChildren,x=e.unCheckedChildren,Z=e.onClick,j=e.onChange,y=e.onKeyDown,_=(0,r.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),g=(0,c.Z)(!1,{value:h,defaultValue:v}),k=(0,s.Z)(g,2),C=k[0],N=k[1];function w(e,n){var t=C;return b||(N(t=e),null===j||void 0===j||j(t,n)),t}var q=u()(o,f,(t={},(0,i.Z)(t,"".concat(o,"-checked"),C),(0,i.Z)(t,"".concat(o,"-disabled"),b),t));return l.createElement("button",Object.assign({},_,{type:"button",role:"switch","aria-checked":C,disabled:b,className:q,ref:n,onKeyDown:function(e){e.which===d.Z.LEFT?w(!1,e):e.which===d.Z.RIGHT&&w(!0,e),null===y||void 0===y||y(e)},onClick:function(e){var n=w(!C,e);null===Z||void 0===Z||Z(n,e)}}),m,l.createElement("span",{className:"".concat(o,"-inner")},C?p:x))}));f.displayName="Switch";var h=f,v=t(82508),b=t(46479),m=t(91964),p=t(21631),x=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)n.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(t[a[i]]=e[a[i]])}return t},Z=l.forwardRef((function(e,n){var t,s=e.prefixCls,r=e.size,o=e.loading,c=e.className,d=void 0===c?"":c,f=e.disabled,Z=x(e,["prefixCls","size","loading","className","disabled"]),j=l.useContext(m.E_),y=j.getPrefixCls,_=j.direction,g=l.useContext(p.Z),k=y("switch",s),C=l.createElement("div",{className:"".concat(k,"-handle")},o&&l.createElement(v.Z,{className:"".concat(k,"-loading-icon")})),N=u()((t={},(0,i.Z)(t,"".concat(k,"-small"),"small"===(r||g)),(0,i.Z)(t,"".concat(k,"-loading"),o),(0,i.Z)(t,"".concat(k,"-rtl"),"rtl"===_),t),d);return l.createElement(b.Z,{insertExtraNode:!0},l.createElement(h,(0,a.Z)({},Z,{prefixCls:k,className:N,disabled:f||o,ref:n,loadingIcon:C})))}));Z.__ANT_SWITCH=!0,Z.displayName="Switch";var j=Z}}]);