"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[9839],{69839:function(e,n,t){t.r(n),t.d(n,{default:function(){return z}});var a=t(93433),r=t(74165),i=t(15861),l=t(4942),s=t(1413),c=t(29439),o=t(45987),u=t(47313),d=t(18197),f=t(66672),Z=t(77181),h=t(45705),p=t(74294),x=t(59491),m=t(78508),v=t(34344),g={getAll:function(e){return v.Z.get("dashboard/admin/translations/paginate",{params:e})},delete:function(e){return v.Z.delete("dashboard/admin/translations/".concat(e))},getById:function(e,n){return v.Z.get("dashboard/admin/translations/".concat(e),{params:n})},create:function(e){return v.Z.post("dashboard/admin/translations",{},{params:e})},update:function(e,n){return v.Z.put("dashboard/admin/translations/".concat(e),{},{params:n})}},j=t(34491),b=t(12019),y=t(55768),S=t(84695),w=t(68197),k=t(59624),I=t(24511),C=t(46417);function O(e){var n=e.visible,t=e.setVisible,a=e.languages,r=e.refetch,i=(0,I.$)().t,l=(0,u.useState)(!1),s=(0,c.Z)(l,2),o=s[0],Z=s[1],h=d.Z.useForm(),m=(0,c.Z)(h,1)[0],v=function(){t(!1)};return(0,C.jsx)(S.Z,{visible:n,title:i("add.translation"),onCancel:v,footer:[(0,C.jsx)(x.Z,{type:"primary",form:"translation-form",htmlType:"submit",loading:o,children:i("create")},"create-translation"),(0,C.jsx)(x.Z,{type:"default",onClick:v,children:i("cancel")},"create-translation-cancel")],children:(0,C.jsx)(d.Z,{id:"translation-form",name:"translation",layout:"vertical",onFinish:function(e){Z(!0),g.create(e).then((function(){j.Am.success(i("successfully.created")),t(!1),r()})).finally((function(){return Z(!1)}))},form:m,initialValues:{group:"web"},children:(0,C.jsxs)(w.Z,{gutter:12,children:[(0,C.jsx)(k.Z,{span:24,children:(0,C.jsx)(d.Z.Item,{label:i("name"),name:"key",rules:[{required:!0,message:""}],children:(0,C.jsx)(f.Z,{})})}),(0,C.jsx)(k.Z,{span:24,children:(0,C.jsx)(d.Z.Item,{label:i("group"),name:"group",rules:[{required:!0,message:""}],children:(0,C.jsxs)(p.Z,{children:[(0,C.jsx)(p.Z.Option,{value:"web",children:i("web")}),(0,C.jsx)(p.Z.Option,{value:"mobile",children:i("mobile")}),(0,C.jsx)(p.Z.Option,{value:"errors",children:i("errors")})]})})}),a.map((function(e,n){return(0,C.jsx)(k.Z,{span:24,children:(0,C.jsx)(d.Z.Item,{label:"".concat(i("translation")," (").concat(e.locale,")"),name:"value[".concat(e.locale,"]"),rules:[{required:!0,message:""}],children:(0,C.jsx)(f.Z,{})})},n)}))]})})})}var q=t(2717),F=t(41481),A=["index"],V=["title","editable","children","dataIndex","record","handleSave"],E=u.createContext(null),P=function(e){e.index;var n=(0,o.Z)(e,A),t=d.Z.useForm(),a=(0,c.Z)(t,1)[0];return(0,C.jsx)(d.Z,{form:a,component:!1,children:(0,C.jsx)(E.Provider,{value:a,children:(0,C.jsx)("tr",(0,s.Z)({},n))})})},$=function(e){e.title;var n=e.editable,t=e.children,a=e.dataIndex,Z=e.record,h=e.handleSave,p=(0,o.Z)(e,V),x=(0,I.$)().t,m=(0,u.useState)(!1),v=(0,c.Z)(m,2),g=v[0],j=v[1],y=(0,u.useRef)(null),S=(0,u.useContext)(E);(0,u.useEffect)((function(){g&&y.current.focus()}),[g]);var w=function(){j(!g),S.setFieldsValue((0,l.Z)({},a,Z[a]))},k=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.validateFields();case 3:n=e.sent,w(),h((0,s.Z)((0,s.Z)((0,s.Z)({},Z),n),{},{dataIndex:a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),O=t;return n&&(O=g?(0,C.jsx)(d.Z.Item,{style:{margin:0},name:a,rules:[{required:!0,message:x("required")}],children:(0,C.jsx)(f.Z,{ref:y,onPressEnter:k,onBlur:k})}):(0,C.jsxs)("div",{className:"editable-cell-value-wrap cursor-pointer d-flex justify-content-between align-items-center",style:{paddingRight:24},onClick:w,children:[(0,C.jsx)("div",{className:"w-100",children:t}),(0,C.jsx)(b.Z,{})]})),(0,C.jsx)("td",(0,s.Z)((0,s.Z)({},p),{},{children:O}))};function z(){var e=(0,I.$)().t,n=(0,u.useState)([]),t=(0,c.Z)(n,2),r=t[0],i=t[1],o=(0,u.useState)(10),d=(0,c.Z)(o,2),f=d[0],v=d[1],b=(0,u.useState)(1),S=(0,c.Z)(b,2),w=S[0],k=S[1],A=(0,u.useState)(0),V=(0,c.Z)(A,2),E=V[0],z=V[1],B=(0,u.useState)(!1),N=(0,c.Z)(B,2),R=N[0],W=N[1],_=(0,u.useState)(null),K=(0,c.Z)(_,2),L=K[0],M=K[1],T=(0,u.useState)(null),U=(0,c.Z)(T,2),D=U[0],G=U[1],H=(0,u.useState)(null),J=(0,c.Z)(H,2),Q=J[0],X=J[1],Y=(0,u.useState)(!1),ee=(0,c.Z)(Y,2),ne=ee[0],te=ee[1],ae=(0,u.useState)(0),re=(0,c.Z)(ae,2),ie=re[0],le=re[1],se=(0,q.v9)((function(e){return e.formLang}),q.wU).languages,ce=(0,u.useState)(""),oe=(0,c.Z)(ce,2),ue=oe[0],de=oe[1],fe=(0,u.useState)(""),Ze=(0,c.Z)(fe,2),he=Ze[0],pe=Ze[1],xe=(0,u.useMemo)((function(){return[{title:e("name"),dataIndex:"key",sorter:function(e,n,t){return me(t,"key")},width:250,fixed:"left"},{title:e("group"),dataIndex:"group",sorter:function(e,n,t){return me(t,"group")},width:150,fixed:"left"}].concat((0,a.Z)(se.filter((function(e){return!ue||e.locale===ue})).map((function(e){return{title:e.title,dataIndex:"value[".concat(e.locale,"]"),editable:!0,width:300}}))))}),[se,ue]);function me(e,n){var t;switch(e){case"ascend":t="asc";break;case"descend":t="desc"}G(t),X(n)}function ve(){W(!0);var e={perPage:f,skip:ie,group:L,sort:D,column:Q,search:he};g.getAll(e).then((function(e){var n=e.data,t=Object.entries(n.translations).map((function(e){return(0,s.Z)({key:e[0],group:e[1][0].group},Object.assign.apply(Object,[{}].concat((0,a.Z)(se.map((function(n){var t;return(0,l.Z)({},"value[".concat(n.locale,"]"),null===(t=e[1].find((function(e){return e.locale===n.locale})))||void 0===t?void 0:t.value)}))))))}));i(t),z(n.total)})).finally((function(){return W(!1)}))}(0,u.useEffect)((function(){ve()}),[f,L,D,Q,ie,he]);var ge=function(e){var n=e.dataIndex,t=e.key,l=(0,a.Z)(r),c=l.findIndex((function(n){return e.key===n.key})),o=l[c];o[n]!==e[n]&&(l.splice(c,1,(0,s.Z)((0,s.Z)({},o),e)),i(l),function(e,n){g.update(e,n).then((function(e){return j.Am.success(e.message)}))}(t,(0,s.Z)((0,s.Z)({},e),{},{value:void 0,dataIndex:void 0,key:void 0})))};var je={body:{row:P,cell:$}},be=xe.map((function(e){return e.editable?(0,s.Z)((0,s.Z)({},e),{},{onCell:function(n){return{record:n,editable:e.editable,dataIndex:e.dataIndex,title:e.title,fixed:e.fixed,handleSave:ge}}}):e}));return(0,C.jsxs)(Z.Z,{title:e("translations"),extra:(0,C.jsxs)(h.Z,{wrap:!0,children:[(0,C.jsx)(F.Z,{placeholder:e("search"),handleChange:function(e){return pe(e)}}),(0,C.jsxs)(p.Z,{style:{minWidth:150},value:ue,onChange:function(e){return de(e)},placeholder:e("select.language"),children:[(0,C.jsx)(p.Z.Option,{value:"",children:e("all")}),se.map((function(e){return(0,C.jsx)(p.Z.Option,{value:e.locale,children:e.title},e.locale)}))]}),(0,C.jsxs)(p.Z,{style:{minWidth:150},value:L,onChange:function(e){return M(e)},placeholder:e("select.group"),children:[(0,C.jsx)(p.Z.Option,{value:"",children:e("all")}),(0,C.jsx)(p.Z.Option,{value:"web",children:e("web")}),(0,C.jsx)(p.Z.Option,{value:"mobile",children:e("mobile")}),(0,C.jsx)(p.Z.Option,{value:"errors",children:e("errors")})]}),(0,C.jsx)(x.Z,{icon:(0,C.jsx)(y.Z,{}),type:"primary",onClick:function(){return te(!0)},children:e("add.translation")})]}),children:[(0,C.jsx)(m.Z,{components:je,columns:be,dataSource:r,pagination:{pageSize:f,page:w,total:E},rowKey:function(e){return e.id},onChange:function(e){var n=e.pageSize,t=e.current,a=(t-1)*n;v(n),k(t),le(a)},loading:R,scroll:{x:1500}}),ne&&(0,C.jsx)(O,{visible:ne,setVisible:te,languages:se,refetch:ve})]})}}}]);