"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[9815],{48008:function(e,n,t){t(47313);var i=t(84695),l=t(87569),a=t(59491),o=t(24511),r=t(46417);n.Z=function(e){var n=e.open,t=e.handleCancel,s=e.text,d=e.click,c=e.loading,u=e.subTitle,v=(0,o.$)().t;return(0,r.jsxs)(i.Z,{closable:!1,visible:n,footer:null,centered:!0,children:[(0,r.jsx)(l.ZP,{status:"warning",title:s,subTitle:u}),(0,r.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,r.jsx)(a.Z,{type:"primary",className:"mr-2",onClick:d,loading:c,children:v("yes")}),(0,r.jsx)(a.Z,{onClick:function(){return t()},children:v("no")})]})]})}},24391:function(e,n,t){var i=t(29439),l=t(47313),a=t(36311),o=t(83334),r=t.n(o),s=t(51282),d=t(77181),c=t(84695),u=t(59491),v=t(68197),f=t(59624),h=t(24511),p=t(58821),m=t(57864),x=t(58467),Z=t(46417),j=d.Z.Meta;n.Z=function(e){var n=e.id,t=e.handleCancel,o=(0,l.useState)(null),g=(0,i.Z)(o,2),y=g[0],b=g[1],w=(0,h.$)().t,_=(0,x.s0)();return(0,Z.jsx)(Z.Fragment,{children:y?(0,Z.jsx)(s.Z,{}):(0,Z.jsx)(c.Z,{visible:!!n,title:w("selected.download"),closable:!1,handleCancel:t,footer:[(0,Z.jsx)(u.Z,{type:"default",onClick:t,children:w("cancel")},"cancelBtn")],children:(0,Z.jsxs)(v.Z,{children:[(0,Z.jsx)(f.Z,{span:12,children:(0,Z.jsx)(d.Z,{title:w("download.pdf"),onClick:function(){return function(e){b(!0),a.Z.orderExport(e).then((function(n){r()(n,"invoice_".concat(e,".pdf"),"application/pdf"),t()})).finally((function(){return b(!1)}))}(n)},className:"text-center cursor-pointer",children:(0,Z.jsx)(j,{className:"d-flex align-items-center justify-content-center",title:(0,Z.jsx)(p._JY,{size:80})})})}),(0,Z.jsx)(f.Z,{span:12,children:(0,Z.jsx)(d.Z,{title:w("download.check"),onClick:function(){return function(e){_("/orders/generate-invoice/".concat(e))}(n)},className:"text-center cursor-pointer",children:(0,Z.jsx)(j,{className:"d-flex align-items-center justify-content-center",title:(0,Z.jsx)(m.ih9,{size:85})})})})]})})})}},19815:function(e,n,t){t.r(n),t.d(n,{default:function(){return Ze}});var i=t(74165),l=t(15861),a=t(4942),o=t(93433),r=t(1413),s=t(29439),d=t(47313),c=t(99096),u=t(45705),v=t(59491),f=t(77181),h=t(58467),p=t(55768),m=t(15386),x=t(2717),Z=t(90954),j=t(24511),g=t(80314),y=t(22054),b=t(41481),w=t(73270),_=t(89281),S=t(49986),C=t(7920),k=t(24077),D=t(80355),M=t(24391),Y=t(34491),I=t(7370),T=t(74580),P=t(69658),A=t(70816),N=t.n(A),U=t(48008),O=t(53149),L=t(43773),z=t(93709),B=t(66204),E=t(43880),F=t(46417),V=function(e){var n=e.children,t=e.title,i=e.name,l=e.isDropDisabled,a=e.total,o=void 0===a?0:a,r=e.loading,s=void 0!==r&&r,d=e.reloadOrder,c=(0,j.$)().t;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(z.Z,{message:(0,F.jsxs)(u.Z,{children:[(0,F.jsx)(L.Z,{size:20,style:{cursor:"pointer"},spin:s,onClick:d}),c(t),(0,F.jsx)(B.Z,{children:s?(0,F.jsx)(L.Z,{spin:!0}):o})]}),className:"mb-4 ".concat(i),style:{textAlign:"center",fontSize:16,textTransform:"capitalize"}}),(0,F.jsx)(E.bK,{droppableId:i,isDropDisabled:l,children:function(e){return(0,F.jsx)("div",{ref:e.innerRef,className:"h-screen",style:{opacity:l?.6:1},children:(0,F.jsxs)(F.Fragment,{children:[n,e.placeholder]})})}})]})},H=t(72652),$=t(39548),R=t(60931),q=t(45427),G=t(86949),K=t(35529),Q=t(91805),W=t(47515),J=t(6986),X=t(31741),ee=t(14133),ne=t(45334),te=t(42346),ie=t(84017),le=t(5958),ae=t(79492),oe=f.Z.Meta,re=function(e){var n,t,i,l,a,o,r,s,d,c,v,h=e.data,p=e.goToShow,m=e.loading,x=e.setLocationsMap,Z=e.setId,g=e.setIsModalVisible,y=e.setText,b=e.setDowloadModal,w=e.setTabType,_=[{title:"Client",icon:(0,F.jsx)($.Z,{}),data:"".concat((null===(n=h.user)||void 0===n?void 0:n.firstname)||"-"," ").concat((null===(t=h.user)||void 0===t?void 0:t.lastname)||"-")},{title:"Deliveryman",icon:(0,F.jsx)(R.Z,{}),data:"".concat((null===(i=h.deliveryman)||void 0===i?void 0:i.firstname)||"-"," ").concat((null===(l=h.deliveryman)||void 0===l?void 0:l.lastname)||"-")},{title:"Amount",icon:(0,F.jsx)(q.Z,{}),data:(0,ie.Z)(h.total_price,null===(a=h.currency)||void 0===a?void 0:a.symbol)},{title:"Payment type",icon:(0,F.jsx)(G.Z,{}),data:(null===(o=h.transaction)||void 0===o||null===(r=o.payment_system)||void 0===r?void 0:r.tag)||"-"},{title:"Payment status",icon:(0,F.jsx)(K.Z,{}),data:(null===(s=h.transaction)||void 0===s?void 0:s.status)||"-"},{title:"Delivery date",icon:(0,F.jsx)(Q.Z,{}),data:N()(null===h||void 0===h?void 0:h.delivery_date).format("YYYY-MM-DD")||"-"},{title:"Created at",icon:(0,F.jsx)(Q.Z,{}),data:N()(null===h||void 0===h?void 0:h.created_at).format("YYYY-MM-DD")||"-"}],S=(0,j.$)().t,C=(0,ae.Z)().isDemo,k=[(0,F.jsx)(le.Y4r,{size:20,onClick:function(e){e.stopPropagation(),x(h.id)}}),(0,F.jsx)(W.Z,{onClick:function(e){C?Y.Am.warning(S("cannot.work.demo")):(e.stopPropagation(),Z([h.id]),g(!0),y(!0),w(h.status))}}),(0,F.jsx)(J.Z,{onClick:function(e){e.stopPropagation(),b(h.id)}}),(0,F.jsx)(X.Z,{onClick:function(e){e.stopPropagation(),p(h)}})];return(0,F.jsx)(f.Z,{actions:k,className:"order-card",children:(0,F.jsxs)(ee.Z,{loading:m,avatar:!0,active:!0,children:[(0,F.jsx)(oe,{avatar:(0,F.jsx)(ne.C,{src:null===(d=h.shop)||void 0===d?void 0:d.logo_img}),description:"#".concat(h.id),title:null===(c=h.shop)||void 0===c||null===(v=c.translation)||void 0===v?void 0:v.title}),(0,F.jsx)(te.ZP,{itemLayout:"horizontal",dataSource:_,renderItem:function(e,n){return(0,F.jsx)(te.ZP.Item,{children:(0,F.jsxs)(u.Z,{children:[e.icon,"".concat(e.title,":  ").concat(e.data)]})},n)}})]})})},se=t(7142),de=t(82508),ce=t(98501),ue=t(38628),ve=["new","accepted","ready","on_a_way","delivered","canceled"],fe=function(e){var n=e.goToEdit,t=e.goToShow,i=e.fetchOrderAllItem,l=e.fetchOrders,a=e.setLocationsMap,o=e.setId,c=e.setIsModalVisible,u=e.setText,v=e.setDowloadModal,f=e.type,h=e.setTabType,p=(0,x.I0)(),m=(0,x.v9)((function(e){return e.orders}),x.wU).items,Z=(0,x.v9)((function(e){return e.orders}),x.wU),j=(0,d.useState)(""),g=(0,s.Z)(j,2),b=g[0],w=g[1],_=(0,d.useState)({}),S=(0,s.Z)(_,2),C=S[0],k=S[1],D=(0,d.useState)({}),M=(0,s.Z)(D,2),T=M[0],P=M[1],A=function(e){if(e.destination){var n,t;e.destination&&C.source.droppableId!==e.destination.droppableId&&(n=e.draggableId,t={status:e.destination.droppableId},I.Z.updateStatus(n,t).then((function(e){Y.Am.success("#".concat(n," order status changed"))})));var i=(0,r.Z)({},m),l=function(e,n){var t=Array.from(e),i=t.splice(n,1);return[(0,s.Z)(i,1)[0],t]}(i[e.source.droppableId],e.source.index),a=(0,s.Z)(l,2),o=a[0],d=a[1];i[e.source.droppableId]=d;var c=i[e.destination.droppableId];i[e.destination.droppableId]=function(e,n,t){var i=Array.from(e);return i.splice(n,0,t),i}(c,e.destination.index,o),p((0,y.U7)(i)),P(null)}},N=function(e){return(0!==e||T!==ve.length-1)&&!!Boolean(T>e)};(0,d.useEffect)((function(){p((0,y.H5)()),i()}),[f]);return(0,F.jsx)(E.Z5,{onDragEnd:A,onDragStart:function(e){var n=ve.findIndex((function(n){return n===e.source.droppableId}));k(e),P(n)},children:(0,F.jsx)("div",{className:"order-board",children:null===ve||void 0===ve?void 0:ve.map((function(e,i){var s,d,f,x;return(0,F.jsx)("div",{className:"dnd-column",children:(0,F.jsx)(V,{title:e,onDragEnd:A,name:e,isDropDisabled:N(i),total:null===(s=m[e])||void 0===s?void 0:s.length,loading:Z[e].loading,reloadOrder:function(){return function(e){p((0,y.x9)(e)),l({status:e})}(e)},children:(0,F.jsxs)(se.ZP,{onScroll:function(n){return function(e,n){var t=e.target.lastChild,i=e.target.clientHeight+e.target.scrollTop;t&&i>t.offsetTop+t.clientHeight+19.9&&Z[n].meta.last_page>Z[n].meta.current_page&&!Z[n].loading&&(w(n),l({page:Z[n].meta.current_page+1,perPage:5,status:n}))}(n,e)},autoHeight:!0,autoHeightMin:"75vh",autoHeightMax:"75vh",autoHide:!0,id:e,children:[Boolean(Z[e].loading&&!(null!==(d=m[e])&&void 0!==d&&d.length))?null===(x=ce.Q[e])||void 0===x?void 0:x.map((function(){return(0,F.jsx)(ue.Z,{loading:!0})})):null===(f=m[e])||void 0===f?void 0:f.map((function(e,i){return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(E._l,{draggableId:e.id.toString(),index:i,children:function(i,l){return(0,F.jsx)("div",(0,r.Z)((0,r.Z)((0,r.Z)({ref:i.innerRef},i.draggableProps),i.dragHandleProps),{},{children:(0,F.jsx)(re,{data:e,goToEdit:n,goToShow:t,setLocationsMap:a,setId:o,setIsModalVisible:c,setText:u,setDowloadModal:v,setTabType:h})}))}},e.id)})})),Z[e].loading&&e===b&&(0,F.jsx)(H.Z,{indicator:(0,F.jsx)(de.Z,{style:{fontSize:24},spin:!0})})]})})},e)}))})})},he=t(21186),pe=t(3925),me=t(97421),xe=c.Z.RangePicker;function Ze(){var e=(0,x.I0)(),n=(0,h.s0)(),t=(0,j.$)().t,c=(0,h.UO)().type,A=(0,x.v9)((function(e){return e.orderStatus}),x.wU).statusList,L=(0,d.useState)(null),z=(0,s.Z)(L,2),B=z[0],E=z[1],V=(0,d.useState)(null),H=(0,s.Z)(V,2),$=H[0],R=H[1],q=(0,d.useState)(null),G=(0,s.Z)(q,2),K=G[0],Q=G[1],W=(0,d.useState)(!1),J=(0,s.Z)(W,2),X=J[0],ee=J[1],ne=(0,d.useState)(null),te=(0,s.Z)(ne,2),ie=te[0],le=te[1],ae=(0,d.useState)(null),oe=(0,s.Z)(ae,2),re=oe[0],se=oe[1],de=(0,d.useState)(null),ce=(0,s.Z)(de,2),ue=ce[0],ve=ce[1],Ze=(0,d.useContext)(T._).setIsModalVisible,je=(0,x.v9)((function(e){return e.menu}),x.wU).activeMenu,ge=(0,d.useState)(null),ye=(0,s.Z)(ge,2),be=ye[0],we=ye[1],_e=(0,d.useState)(null),Se=(0,s.Z)(_e,2),Ce=Se[0],ke=Se[1],De=(0,d.useState)(!1),Me=(0,s.Z)(De,2),Ye=Me[0],Ie=Me[1],Te=(0,d.useState)(N()().subtract(1,"months"),N()()),Pe=(0,s.Z)(Te,2),Ae=Pe[0],Ne=Pe[1],Ue=(0,x.v9)((function(e){return e.orders}),x.wU).layout,Oe=null===je||void 0===je?void 0:je.data;(0,g.Z)((function(){var n,t,i,l,a={search:null===Oe||void 0===Oe?void 0:Oe.search,sort:null===Oe||void 0===Oe?void 0:Oe.sort,column:null===Oe||void 0===Oe?void 0:Oe.column,perPage:null===Oe||void 0===Oe?void 0:Oe.perPage,page:null===Oe||void 0===Oe?void 0:Oe.page,user_id:null===Oe||void 0===Oe?void 0:Oe.user_id,status:"deleted_at"!==(null===Oe||void 0===Oe?void 0:Oe.role)&&(null===Oe||void 0===Oe?void 0:Oe.role),deleted_at:"deleted_at"===(null===Oe||void 0===Oe?void 0:Oe.role)?"deleted_at":void 0,shop_id:null!==(null===(n=je.data)||void 0===n?void 0:n.shop_id)?null===(t=je.data)||void 0===t?void 0:t.shop_id:null,delivery_type:"scheduled"!==c?c:void 0,delivery_date_from:"scheduled"===c?N()().add(1,"day").format("YYYY-MM-DD"):void 0,date_from:(null===(i=Ae[0])||void 0===i?void 0:i.format("YYYY-MM-DD"))||null,date_to:(null===(l=Ae[1])||void 0===l?void 0:l.format("YYYY-MM-DD"))||null};"table"===Ue&&Oe?e((0,y.AU)(a)):Oe&&e((0,y.o1)(a))}),[Oe,Ae,c]);var Le=function(n,t){e((0,Z.nc)({activeMenu:je,data:(0,r.Z)((0,r.Z)({},Oe),(0,a.Z)({},t,n))}))};function ze(){return ze=(0,l.Z)((0,i.Z)().mark((function e(n){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n,perPage:10},e.abrupt("return",S.Z.search(t).then((function(e){return e.data.map((function(e){return{label:"".concat(e.firstname," ").concat(e.lastname),value:e.id}}))})));case 2:case"end":return e.stop()}}),e)}))),ze.apply(this,arguments)}var Be=function(){E(null),le(null),R(null),Q(null)};function Ee(){return Ee=(0,l.Z)((0,i.Z)().mark((function e(n){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n,status:"approved"},e.abrupt("return",O.Z.getAll(t).then((function(e){return e.data.map((function(e){var n;return{label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id}}))})));case 2:case"end":return e.stop()}}),e)}))),Ee.apply(this,arguments)}var Fe=function(n){var t=(0,r.Z)((0,r.Z)({},n),{},{delivery_type:"scheduled"!==c?c:void 0,delivery_date_from:"scheduled"===c?N()().add(1,"day").format("YYYY-MM-DD"):void 0});switch(n.status){case"new":e((0,y.O7)(t));break;case"accepted":e((0,y.We)(t));break;case"ready":e((0,y.wC)(t));break;case"on_a_way":e((0,y.Ri)(t));break;case"delivered":e((0,y.Rd)(t));break;case"canceled":e((0,y.eV)(t));break;default:console.log("Sorry, we are out of")}},Ve=function(){Fe({status:"new"}),Fe({status:"accepted"}),Fe({status:"ready"}),Fe({status:"on_a_way"}),Fe({status:"delivered"}),Fe({status:"canceled"})};return(0,d.useEffect)((function(){if(null!==je&&void 0!==je&&je.refetch){var n={page:null===Oe||void 0===Oe?void 0:Oe.page,perPage:10,sort:null===Oe||void 0===Oe?void 0:Oe.sort,column:null===Oe||void 0===Oe?void 0:Oe.column,delivery_type:"scheduled"!==c?c:void 0,delivery_date_from:"scheduled"===c?N()().add(1,"day").format("YYYY-MM-DD"):void 0};e((0,y.AU)(n)),e((0,Z.A_)(je))}}),[null===je||void 0===je?void 0:je.refetch]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(u.Z,{className:"w-100 justify-content-end mb-3",children:[(0,F.jsx)(he.Z,{listType:"orders-board"}),(0,F.jsx)(v.Z,{type:"primary",icon:(0,F.jsx)(p.Z,{}),onClick:function(){e((0,w.bn)()),e((0,Z.K0)({id:"pos.system_01",url:"pos-system",name:"pos.system"})),n("/pos-system")},style:{width:"100%"},children:t("add.order")})]}),(0,F.jsx)(f.Z,{children:(0,F.jsxs)(u.Z,{wrap:!0,className:"order-filter",size:[8,15],children:[(0,F.jsx)(b.Z,{defaultValue:null===Oe||void 0===Oe?void 0:Oe.search,resetSearch:!(null!==Oe&&void 0!==Oe&&Oe.search),placeholder:t("search"),handleChange:function(e){return Le(e,"search")}}),(0,F.jsx)(_.h,{placeholder:t("select.shop"),fetchOptions:function(e){return Ee.apply(this,arguments)},style:{width:"100%"},onSelect:function(e){return Le(e.value,"shop_id")},onDeselect:function(){return Le(null,"shop_id")},allowClear:!0,value:null===Oe||void 0===Oe?void 0:Oe.shop_id}),(0,F.jsx)(_.h,{placeholder:t("select.client"),fetchOptions:function(e){return ze.apply(this,arguments)},onSelect:function(e){return Le(e.value,"user_id")},onDeselect:function(){return Le(null,"user_id")},style:{width:"100%"},value:null===Oe||void 0===Oe?void 0:Oe.user_id}),(0,F.jsx)(xe,{value:Ae,onChange:function(e){Le((function(n){var t,i;return(0,r.Z)((0,r.Z)({},n),{date_from:null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.format("YYYY-MM-DD"),date_to:null===e||void 0===e||null===(i=e[1])||void 0===i?void 0:i.format("YYYY-MM-DD")})})),Ne(e)},disabledDate:function(e){return e&&e>N()().endOf("day")},style:{width:"100%"}}),(0,F.jsxs)(v.Z,{onClick:function(){ee(!0),I.Z.export().then((function(e){var n=me.S0+e.data.file_name;window.location.href=n})).finally((function(){return ee(!1)}))},loading:X,style:{width:"100%"},children:[(0,F.jsx)(pe.bwQ,{className:"mr-2"}),t("export")]}),(0,F.jsx)(v.Z,{icon:(0,F.jsx)(m.Z,{}),onClick:function(){(0,x.dC)((function(){e((0,y.H5)()),e((0,Z.nc)({activeMenu:je,data:null}))})),Ve()},style:{width:"100%"},children:t("clear")})]})}),(0,F.jsx)(fe,{goToEdit:function(i){e((0,w.bn)()),e((0,Z.bL)({url:"order/".concat(i.id),id:"order_edit",name:t("edit.order")})),n("/order/".concat(i.id))},goToShow:function(i){e((0,Z.bL)({url:"order/details/".concat(i.id),id:"order_details",name:t("order.details")})),n("/order/details/".concat(i.id))},fetchOrderAllItem:Ve,fetchOrders:Fe,setLocationsMap:R,setId:we,setIsModalVisible:Ze,setText:ke,setDowloadModal:Q,type:c,setTabType:ve}),B&&(0,F.jsx)(C.Z,{orderDetails:B,handleCancel:Be,status:A}),ie&&(0,F.jsx)(k.Z,{orderDetails:ie,handleCancel:Be}),$&&(0,F.jsx)(D.Z,{id:$,handleCancel:Be}),K&&(0,F.jsx)(M.Z,{id:K,handleCancel:Be}),(0,F.jsx)(P.Z,{click:function(){Ie(!0);var e=(0,r.Z)({},Object.assign.apply(Object,[{}].concat((0,o.Z)(be.map((function(e,n){return(0,a.Z)({},"ids[".concat(n,"]"),e)}))))));I.Z.delete(e).then((function(){Y.Am.success(t("successfully.deleted")),Ze(!1),Ve({status:ue}),ke(null)})).finally((function(){return Ie(!1)}))},text:t(Ce?"delete":"all.delete"),loading:Ye,setText:we}),re&&(0,F.jsx)(U.Z,{open:re,handleCancel:function(){return se(null)},click:re.restore?function(){Ie(!0),I.Z.restoreAll().then((function(){Y.Am.success(t("successfully.restored")),e((0,y.AU)()),se(null)})).finally((function(){return Ie(!1)}))}:function(){Ie(!0),I.Z.dropAll().then((function(){Y.Am.success(t("successfully.deleted")),e((0,y.AU)()),se(null)})).finally((function(){return Ie(!1)}))},text:re.restore?t("restore.modal.text"):t("read.carefully"),subTitle:re.restore?"":t("confirm.deletion"),loading:Ye,setText:we})]})}},21186:function(e,n,t){var i=t(39180),l=(t(47313),t(58821)),a=t(54972),o=t(58467),r=t(46417),s=[{value:"orders-board",title:"Board",icon:(0,r.jsx)(a.Ez2,{size:20})},{value:"orders",title:"List",icon:(0,r.jsx)(l.Ps6,{size:20})}];n.Z=function(e){var n=e.listType,t=(0,o.UO)().type,l=(0,o.s0)();return(0,r.jsx)(i.ZP.Group,{value:n,onChange:function(e){l("/".concat(e.target.value).concat(t?"/".concat(t):""))},className:"float-right",buttonStyle:"solid",children:null===s||void 0===s?void 0:s.map((function(e){return(0,r.jsx)(i.ZP.Button,{value:e.value,children:(0,r.jsxs)("div",{className:"d-flex align-items-center",style:{gap:"10px"},children:[e.icon,e.title]})},e.value)}))})}},24077:function(e,n,t){t.d(n,{Z:function(){return j}});var i=t(74165),l=t(15861),a=t(29439),o=t(47313),r=t(18197),s=t(84695),d=t(59491),c=t(68197),u=t(59624),v=t(2717),f=t(7370),h=t(90954),p=t(24511),m=t(49986),x=t(89281),Z=t(46417);function j(e){var n,t,j,g=e.orderDetails,y=e.handleCancel,b=(0,p.$)().t,w=(0,v.v9)((function(e){return e.menu}),v.wU).activeMenu,_=r.Z.useForm(),S=(0,a.Z)(_,1)[0],C=(0,v.I0)(),k=(0,o.useState)(!1),D=(0,a.Z)(k,2),M=D[0],Y=D[1];function I(){return(I=(0,l.Z)((0,i.Z)().mark((function e(n){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n.length?n:void 0,page:1,perPage:10,role:"deliveryman",shop_id:g.shop.id,exist_token:1},e.abrupt("return",m.Z.getAll(t).then((function(e){return e.data.map((function(e){return{label:e.firstname+" "+e.lastname||"no name",value:e.id}}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,Z.jsx)(s.Z,{visible:!!g,onCancel:y,footer:[(0,Z.jsx)(d.Z,{type:"primary",onClick:function(){return S.submit()},loading:M,children:b("save")},"saveBtn"),(0,Z.jsx)(d.Z,{type:"default",onClick:y,children:b("cancel")},"cancelBtn")],children:(0,Z.jsx)(r.Z,{form:S,layout:"vertical",onFinish:function(e){var n={deliveryman:e.deliveryman.value};Y(!0),f.Z.updateDelivery(g.id,n).then((function(){y(),C((0,h.xo)(w))})).finally((function(){return Y(!1)}))},initialValues:{deliveryman:{label:g.deliveryman?(null===g||void 0===g||null===(n=g.deliveryman)||void 0===n?void 0:n.firstname)+" "+(null===g||void 0===g||null===(t=g.deliveryman)||void 0===t?void 0:t.lastname):null,value:g.deliveryman?null===g||void 0===g||null===(j=g.deliveryman)||void 0===j?void 0:j.id:null}},children:(0,Z.jsx)(c.Z,{gutter:12,children:(0,Z.jsx)(u.Z,{span:24,children:(0,Z.jsx)(r.Z.Item,{label:b("deliveryman"),name:"deliveryman",rules:[{required:!0,message:b("required")}],children:(0,Z.jsx)(x.h,{className:"w-100",debounceTimeout:500,placeholder:b("select.shop"),fetchOptions:function(e){return I.apply(this,arguments)},allowClear:!0})})})})})})}},7920:function(e,n,t){t.d(n,{Z:function(){return x}});var i=t(1413),l=t(29439),a=t(47313),o=t(18197),r=t(84695),s=t(59491),d=t(68197),c=t(59624),u=t(74294),v=t(2717),f=t(24511),h=t(7370),p=t(90954),m=t(46417);function x(e){var n=e.orderDetails,t=e.handleCancel,x=e.status,Z=(0,v.v9)((function(e){return e.menu}),v.wU).activeMenu,j=o.Z.useForm(),g=(0,l.Z)(j,1)[0],y=(0,v.I0)(),b=(0,f.$)().t,w=(0,a.useState)(!1),_=(0,l.Z)(w,2),S=_[0],C=_[1],k=(0,a.useState)(x),D=(0,l.Z)(k,2),M=D[0],Y=D[1];(0,a.useEffect)((function(){var e=x.findIndex((function(e){return e.name===n.status})),t=[x[e],x[e+1],{name:"canceled",id:8,active:!0}];e<0&&(t=[x[e+1],"canceled"]),Y(t)}),[n]);return(0,m.jsx)(r.Z,{visible:!!n,title:n.title,onCancel:t,footer:[(0,m.jsx)(s.Z,{type:"primary",onClick:function(){return g.submit()},loading:S,children:b("save")},"save-form"),(0,m.jsx)(s.Z,{type:"default",onClick:t,children:b("cancel")},"cansel-modal")],children:(0,m.jsx)(o.Z,{form:g,layout:"vertical",onFinish:function(e){C(!0);var l=(0,i.Z)({},e);h.Z.updateStatus(n.id,l).then((function(){t(),y((0,p.xo)(Z))})).finally((function(){return C(!1)}))},initialValues:{status:n.status},children:(0,m.jsx)(d.Z,{gutter:12,children:(0,m.jsx)(c.Z,{span:24,children:(0,m.jsx)(o.Z.Item,{label:b("status"),name:"status",rules:[{required:!0,message:b("required")}],children:(0,m.jsx)(u.Z,{children:M.map((function(e){return(0,m.jsx)(u.Z.Option,{value:null===e||void 0===e?void 0:e.name,children:b(null===e||void 0===e?void 0:e.name)},null===e||void 0===e?void 0:e.name)}))})})})})})})}},80355:function(e,n,t){var i=t(29439),l=t(84697),a=t(83999),o=t(84695),r=t(59491),s=t(77181),d=t(68197),c=t(59624),u=t(66204),v=t(47313),f=t(24511),h=t(7370),p=t(51282),m=t(58821),x=t(2717),Z=t(97421),j=t(18478),g=t(84618),y=t(17649),b=t(66461),w=t(22539),_=t(3394),S=t(57864),C=t(46417),k=a.Z.Step,D=function(){return(0,C.jsx)("img",{src:j,width:"50",alt:"Pin"})},M=function(){return(0,C.jsx)("img",{src:g,width:"50",alt:"Pin"})},Y=["blue","red","gold","volcano","cyan","lime"];n.Z=function(e){var n,t,j,g,I,T,P=e.id,A=e.handleCancel,N=(0,f.$)().t,U=(0,v.useState)(null),O=(0,i.Z)(U,2),L=O[0],z=O[1],B=(0,v.useState)(null),E=(0,i.Z)(B,2),F=E[0],V=E[1],H=(0,v.useState)(null),$=(0,i.Z)(H,2),R=$[0],q=$[1],G=(0,x.v9)((function(e){return e.globalSettings}),x.wU).settings,K=(0,y.Z)(G),Q=(0,v.useState)(0),W=(0,i.Z)(Q,2),J=W[0],X=W[1],ee=(0,v.useState)((0,y.Z)(G)),ne=(0,i.Z)(ee,2),te=ne[0],ie=ne[1],le=(0,v.useState)((0,y.Z)(G)),ae=(0,i.Z)(le,2),oe=ae[0],re=ae[1],se=(0,v.useState)([{id:0,name:"new",icon:(0,C.jsx)(b.Z,{})},{id:1,name:"accepted",icon:(0,C.jsx)(m.IQF,{})},{id:2,name:"ready",icon:(0,C.jsx)(w.TkG,{})},{id:3,name:"on_a_way",icon:(0,C.jsx)(_.Akc,{})},{id:4,name:"delivered",icon:(0,C.jsx)(_.kme,{})}]),de=(0,i.Z)(se,2),ce=de[0],ue=de[1];var ve=(0,x.v9)((function(e){return e.globalSettings.settings}),x.wU).google_map_key;(0,v.useEffect)((function(){z(!0),h.Z.getById(P).then((function(e){var n,t=e.data;ue("canceled"===t.status?[{id:1,name:"new",icon:(0,C.jsx)(b.Z,{})},{id:5,name:"canceled",icon:(0,C.jsx)(S.SV5,{})}]:ce),X("canceled"===t.status?1:null===(n=ce.find((function(e){return e.name===t.status})))||void 0===n?void 0:n.id),q("canceled"===t.status?"error":"success"),V(t),re({lat:t.location.latitude,lng:t.location.longitude}),ie({lat:t.shop.location.latitude,lng:t.shop.location.longitude})})).finally((function(){z(!1)}))}),[]);return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(o.Z,{visible:!!P,title:N("show.locations"),onCancel:function(){return A()},style:{minWidth:"80vw"},footer:[(0,C.jsx)(r.Z,{type:"default",onClick:A,children:N("cancel")},"cancelBtn")],children:L?(0,C.jsx)(p.Z,{}):(0,C.jsxs)(s.Z,{children:[(0,C.jsx)(a.Z,{current:J,status:R,className:"mb-5",children:null===ce||void 0===ce?void 0:ce.map((function(e,n){return(0,C.jsx)(k,{title:N(e.name),icon:null===e||void 0===e?void 0:e.icon},e.id+n)}))}),(0,C.jsxs)(d.Z,{gutter:12,children:[(0,C.jsxs)(c.Z,{span:12,children:[(0,C.jsxs)("h3",{children:[N("order.id")," #",null===F||void 0===F?void 0:F.id]}),(0,C.jsxs)("p",{children:[(0,C.jsx)(m.D73,{})," ",null===F||void 0===F?void 0:F.created_at]}),(0,C.jsxs)("p",{children:[N("schedulet.at")," ",null===F||void 0===F?void 0:F.delivery_date]}),(0,C.jsxs)("span",{children:[(0,C.jsx)("strong",{children:null===F||void 0===F||null===(n=F.shop)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title})," ",null===F||void 0===F||null===(j=F.details)||void 0===j?void 0:j.map((function(e,n){var t;return(0,C.jsx)(u.Z,{color:Y[n],children:null===e||void 0===e||null===(t=e.stock)||void 0===t?void 0:t.product.translation.title})}))]})]}),(0,C.jsxs)(c.Z,{span:12,children:[(0,C.jsxs)("p",{children:[N("status")," ","new"===(null===F||void 0===F?void 0:F.status)?(0,C.jsx)(u.Z,{color:"blue",children:N(null===F||void 0===F?void 0:F.status)}):"canceled"===(null===F||void 0===F?void 0:F.status)?(0,C.jsx)(u.Z,{color:"error",children:N(null===F||void 0===F?void 0:F.status)}):(0,C.jsx)(u.Z,{color:"cyan",children:N(null===F||void 0===F?void 0:F.status)})]}),(0,C.jsxs)("p",{children:[N("payment.method")," ",(0,C.jsx)("strong",{children:null===F||void 0===F||null===(g=F.transaction)||void 0===g||null===(I=g.payment_system)||void 0===I?void 0:I.tag})]}),(0,C.jsxs)("p",{children:[N("order.type")," ",(0,C.jsx)("strong",{children:null===F||void 0===F?void 0:F.delivery_type})]}),(0,C.jsxs)("p",{children:[N("payment.type")," ",(0,C.jsx)("strong",{children:null===F||void 0===F||null===(T=F.transaction)||void 0===T?void 0:T.status})]})]}),(0,C.jsxs)(c.Z,{span:24,className:"mt-5",children:[(0,C.jsx)("h4",{children:N("map")}),(0,C.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,C.jsxs)(l.ZP,{bootstrapURLKeys:{key:Z.kr||ve},defaultZoom:15,center:K,yesIWantToUseGoogleMapApiInternals:!0,options:{fullscreenControl:!1},onGoogleApiLoaded:function(e){for(var n=e.map,t=e.maps,i=[te,oe].map((function(e){return{lat:Number(e.lat||"0"),lng:Number(e.lng||"0")}})),l=new t.LatLngBounds,a=0;a<i.length;a++)l.extend(i[a]);n.fitBounds(l)},children:[(0,C.jsx)(M,{lat:null===te||void 0===te?void 0:te.lat,lng:null===te||void 0===te?void 0:te.lng}),(0,C.jsx)(D,{lat:null===oe||void 0===oe?void 0:oe.lat,lng:null===oe||void 0===oe?void 0:oe.lng})]})})]})]})]})})})}}}]);