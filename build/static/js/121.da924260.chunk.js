"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[121],{59337:function(e,t,n){var i=n(34344),r={getPolicy:function(){return i.Z.get("dashboard/admin/policy")},getTerms:function(){return i.Z.get("dashboard/admin/term")},createPolicy:function(e){return i.Z.post("dashboard/admin/policy",e)},createTerms:function(e){return i.Z.post("dashboard/admin/term",e)}};t.Z=r},10121:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var i=n(1413),r=n(93433),a=n(4942),c=n(29439),l=n(47313),o=n(34491),u=n(18197),s=n(77181),d=n(68197),f=n(59624),m=n(66672),Z=n(45705),h=n(59491),p=n(2717),v=n(68144),g=n(76733),y=n.n(g),b=n(90954),j=n(59337),x=n(24511),F=n(51282),P=n(73431),k=n(75336),q=n(46417);function w(){var e=(0,x.$)().t,t=(0,p.v9)((function(e){return e.menu}),p.wU).activeMenu,n=(0,p.I0)(),g=u.Z.useForm(),w=(0,c.Z)(g,1)[0],E=(0,l.useState)(!1),V=(0,c.Z)(E,2),C=V[0],I=V[1],T=(0,l.useState)(!1),_=(0,c.Z)(T,2),A=_[0],L=_[1],M=(0,p.v9)((function(e){return e.formLang}),p.wU),O=M.languages,S=M.defaultLang;function U(){L(!0),j.Z.getPolicy().then((function(e){var t=e.data;return w.setFieldsValue((0,i.Z)({},function(e){if(!e)return{};var t=e.translations,n=O.map((function(e){var n,i,r;return r={},(0,a.Z)(r,"title[".concat(e.locale,"]"),null===(n=t.find((function(t){return t.locale===e.locale})))||void 0===n?void 0:n.title),(0,a.Z)(r,"description[".concat(e.locale,"]"),null===(i=t.find((function(t){return t.locale===e.locale})))||void 0===i?void 0:i.description),r}));return Object.assign.apply(Object,[{}].concat((0,r.Z)(n)))}(t)))})).finally((function(){L(!1),n((0,b.A_)(t))}))}(0,l.useEffect)((function(){return function(){var e=w.getFieldsValue(!0);n((0,b.nc)({activeMenu:t,data:e}))}}),[]),(0,l.useEffect)((function(){t.refetch&&U()}),[t.refetch]);return(0,q.jsx)(s.Z,{title:e("policy"),extra:(0,q.jsx)(P.Z,{}),children:A?(0,q.jsx)(F.Z,{}):(0,q.jsxs)(u.Z,{name:"policy-form",layout:"vertical",onFinish:function(t){var n={title:(0,k.Z)(O,t),description:(0,k.Z)(O,t,"description")};I(!0),j.Z.createPolicy(n).then((function(){o.Am.success(e("successfully.saved"))})).finally((function(){return I(!1)}))},form:w,initialValues:t.data,children:[(0,q.jsxs)(d.Z,{gutter:12,children:[(0,q.jsx)(f.Z,{span:12,children:O.map((function(t){return(0,q.jsx)(u.Z.Item,{label:e("title"),name:"title[".concat(t.locale,"]"),rules:[{required:t.locale===S,message:e("required")}],hidden:t.locale!==S,children:(0,q.jsx)(m.Z,{})},"title"+t.locale)}))}),(0,q.jsx)(f.Z,{span:24,children:O.map((function(t){return(0,q.jsx)(u.Z.Item,{label:e("description"),name:"description[".concat(t.locale,"]"),valuePropName:"data",getValueFromEvent:function(e,t){return t.getData()},rules:[{required:t.locale===S,message:e("required")}],hidden:t.locale!==S,children:(0,q.jsx)(v.CKEditor,{editor:y()})})}))})]}),(0,q.jsx)(Z.Z,{children:(0,q.jsx)(h.Z,{type:"primary",htmlType:"submit",loading:C,children:e("save")})})]})})}}}]);