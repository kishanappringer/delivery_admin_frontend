"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[2838],{89802:function(n,e,t){t.d(e,{q:function(){return c}});var i=t(1413),r=t(29439),l=t(45987),a=t(47313),o=t(74294),d=t(72652),s=t(46417),u=["fetchOptions","refetch"],c=function(n){var e=n.fetchOptions,t=n.refetch,c=void 0!==t&&t,v=(0,l.Z)(n,u),p=(0,a.useState)(!1),f=(0,r.Z)(p,2),h=f[0],m=f[1],x=(0,a.useState)([]),Z=(0,r.Z)(x,2),y=Z[0],j=Z[1];return(0,s.jsx)(o.Z,(0,i.Z)((0,i.Z)({labelInValue:!0,filterOption:!1,notFoundContent:h?(0,s.jsx)(d.Z,{size:"small"}):"no results"},v),{},{options:h?[]:y,onFocus:function(){y.length&&!c||(m(!0),e().then((function(n){j(n),m(!1)})))}}))}},26363:function(n,e,t){var i=t(1413),r=t(47313),l=t(77181),a=t(68197),o=t(59624),d=t(18197),s=t(74294),u=t(99096),c=t(2717),v=t(24511),p=t(73270),f=t(70816),h=t.n(f),m=t(53149),x=t(90954),Z=t(46417),y=[{title:"sunday"},{title:"monday"},{title:"tuesday"},{title:"wednesday"},{title:"thursday"},{title:"friday"},{title:"saturday"}];e.Z=function(){var n,e,t,f,j,g,b,_=(0,v.$)().t,k=(0,c.I0)(),w=(0,c.v9)((function(n){return n.order}),c.wU).data,q=(0,c.v9)((function(n){return n.menu}),c.wU).activeMenu,N=new Date(null===w||void 0===w?void 0:w.delivery_date),S=null===(n=q.data)||void 0===n||null===(e=n.CurrentShop)||void 0===e||null===(t=e.shop_working_days)||void 0===t?void 0:t.filter((function(n){return!0!==n.disabled})).find((function(n){var e;return(null===n||void 0===n?void 0:n.day)===(null===(e=y[N.getDay()])||void 0===e?void 0:e.title)})),C=null===(f=q.data)||void 0===f||null===(j=f.CurrentShop)||void 0===j||null===(g=j.shop_closed_date)||void 0===g?void 0:g.map((function(n){return n.day}));var I=function(n,e){for(var t=[],i=n;i<e;i++)t.push(i);return t},M=[{label:"delivery",value:(null===(b=w.shop)||void 0===b?void 0:b.price)||0,key:1},{label:"pickup",value:"0",key:2}];return(0,r.useEffect)((function(){var n,e,t;null!==w&&void 0!==w&&null!==(n=w.shop)&&void 0!==n&&n.value&&(t=null===w||void 0===w||null===(e=w.shop)||void 0===e?void 0:e.value,m.Z.getById(t).then((function(n){var e=null===n||void 0===n?void 0:n.data;k((0,p.oM)({currency_shop:e})),k((0,x.nc)({activeMenu:q,data:(0,i.Z)((0,i.Z)({},null===q||void 0===q?void 0:q.data),{},{CurrentShop:null===n||void 0===n?void 0:n.data})}))})))}),[null===w||void 0===w?void 0:w.shop]),(0,Z.jsx)(l.Z,{title:_("shipping.info"),children:(0,Z.jsxs)(a.Z,{gutter:12,children:[(0,Z.jsx)(o.Z,{span:24,children:(0,Z.jsx)(d.Z.Item,{name:"delivery",label:_("delivery"),rules:[{required:!0,message:_("required")}],children:(0,Z.jsx)(s.Z,{options:M,labelInValue:!0,onSelect:function(n){return k((0,p.oM)({delivery_fee:null===n||void 0===n?void 0:n.value}))},onChange:function(n){return k((0,p.oM)({deliveries:n}))}})})}),(0,Z.jsx)(o.Z,{span:24,children:(0,Z.jsxs)(a.Z,{gutter:12,children:[(0,Z.jsx)(o.Z,{span:12,children:(0,Z.jsx)(d.Z.Item,{name:"delivery_date",label:_("delivery.date"),rules:[{required:!0,message:_("required")}],children:(0,Z.jsx)(u.Z,{placeholder:_("delivery.date"),className:"w-100",format:"YYYY-MM-DD",disabledDate:function(n){var e=null===C||void 0===C?void 0:C.find((function(e){return e===h()(n).format("YYYY-MM-DD")})),t=h()().add(-1,"days")>=n;return e||t},onChange:function(n){var e=h()(n).format("YYYY-MM-DD");k((0,p.oM)({delivery_date:e}))}})})}),(0,Z.jsx)(o.Z,{span:12,children:(0,Z.jsx)(d.Z.Item,{label:"".concat(_("delivery.time")," (").concat(_("up.to"),")"),name:"delivery_time",rules:[{required:!1,message:_("required")}],children:(0,Z.jsx)(u.Z,{disabled:!(null!==w&&void 0!==w&&w.delivery_date),picker:"time",placeholder:_("start.time"),className:"w-100",format:"HH:mm:ss",showNow:!1,disabledTime:function(){return{disabledHours:function(){return function(n,e){for(var t=parseInt(n),i=parseInt(e),r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],l=t;l<=i;l++)delete r[l];return r}((null===S||void 0===S?void 0:S.from.substring(0,2))>=h()(new Date).format("HH")?null===S||void 0===S?void 0:S.from.substring(0,2):h()(new Date).format("HH"),null===S||void 0===S?void 0:S.to.substring(0,2))},disabledMinutes:function(){return I(0,60)},disabledSeconds:function(){return I(0,60)}}},onChange:function(n){var e=h()(n).format("HH:mm:ss");k((0,p.oM)({delivery_time:e}))}})})})]})})]})})}},51835:function(n,e,t){t.d(e,{Z:function(){return en}});var i=t(74165),r=t(15861),l=t(29439),a=t(47313),o=t(77181),d=t(45705),s=t(68197),u=t(59624),c=t(72652),v=t(11216),p=t(30763),f=t(11875),h=t(45464),m=t(82138),x=t(1413),Z=t(11829),y=t(12019),j=t(8846),g=t(43681),b=t(59491),_=t(66672),k=t(2717),w=t(73270),q=t(7370),N=t(93433),S=t(84695),C=t(78891),I=t(83371),M=t(32697),U=t(84017),D=t(34491),Y=t(91220),O=t(24511),A=t(77370),F=t(28939),H=t(80314),B=t(17101),E=t(46417);function P(n){var e,t,i,r,o,v=n.extrasModal,p=n.setExtrasModal,f=(0,a.useState)(!1),Z=(0,l.Z)(f,2),y=Z[0],g=Z[1],_=(0,a.useState)({}),q=(0,l.Z)(_,2),P=q[0],V=q[1],$=(0,O.$)().t,z=(0,a.useState)(v.quantity||P.quantity||P.min_qty),L=(0,l.Z)(z,2),W=L[0],Q=L[1],T=(0,a.useState)({}),J=(0,l.Z)(T,2),K=J[0],X=J[1],G=(0,k.v9)((function(n){return n.order.data}),k.wU).currency,R=(0,k.I0)(),nn=(0,a.useState)([]),en=(0,l.Z)(nn,2),tn=en[0],rn=en[1],ln=(0,a.useState)([]),an=(0,l.Z)(ln,2),on=an[0],dn=an[1],sn=(0,a.useState)({extras:[],stock:{id:0,quantity:1,price:0}}),un=(0,l.Z)(sn,2),cn=un[0],vn=un[1],pn=(0,a.useState)([]),fn=(0,l.Z)(pn,2),hn=fn[0],mn=fn[1],xn=(0,a.useState)([]),Zn=(0,l.Z)(xn,2),yn=Zn[0],jn=Zn[1],gn=(0,a.useState)([]),bn=(0,l.Z)(gn,2),_n=bn[0],kn=bn[1],wn=function(){return p(!1)};var qn=function(n){var e,t=hn.findIndex((function(e){return e.extra_group_id===n.extra_group_id})),i=hn;t>-1&&(i=i.slice(0,t)),i.push(n);var r=i.map((function(n){return n.id})).join(","),l=(0,A.y)(r,tn,on);vn(l),null===(e=l.extras)||void 0===e||e.forEach((function(e){var t=hn.findIndex((function(t){return e[0].extra_group_id!=n.extra_group_id?t.extra_group_id===e[0].extra_group_id:t.extra_group_id===n.extra_group_id}));if(e[0].level>=n.level){var r=e[0].extra_group_id!=n.extra_group_id?e[0]:n;-1==t?i.push(r):i[t]=r}})),mn(i)};(0,a.useEffect)((function(){null!==cn&&void 0!==cn&&cn.stock&&X((0,x.Z)((0,x.Z)({},cn.stock),{},{extras:hn}))}),[cn]);function Nn(n){return(null===yn||void 0===yn?void 0:yn.reduce((function(n,e){return n+e.product.stock.price*(e.product.quantity||e.product.min_qty)}),0))+cn.stock[n||"price"]*W}function Sn(n,e){vn((function(t){return(0,x.Z)((0,x.Z)({},t),{},{stock:(0,x.Z)((0,x.Z)({},t.stock),{},{addons:t.stock.addons.map((function(t){return t.addon_id===n?(0,x.Z)((0,x.Z)({},t),{},{product:(0,x.Z)((0,x.Z)({},t.product),{},{quantity:e})}):t}))})})})),jn((function(t){return t.map((function(t){return t.addon_id===n?(0,x.Z)((0,x.Z)({},t),{},{product:(0,x.Z)((0,x.Z)({},t.product),{},{quantity:e})}):t}))}))}return(0,H.Z)((function(){var n=cn.stock.addons.filter((function(n){return _n.includes(String(n.addon_id))}));jn(n)}),[_n]),(0,a.useEffect)((function(){g(!0),B.Z.getById(v.uuid).then((function(n){var e,t=n.data;V(t);var i,r=(0,A.o)(t,null===v||void 0===v?void 0:v.addons);(console.log(v),console.log(r),rn(r.extras),Q(v.quantity||t.quantity||t.min_qty),dn(r.stock),vn((0,A.y)("",r.extras,r.stock)),null===(e=(0,A.y)("",r.extras,r.stock).extras)||void 0===e||e.forEach((function(n){mn((function(e){return[].concat((0,N.Z)(e),[n[0]])}))})),null!==v&&void 0!==v&&v.addons)&&kn((null===v||void 0===v||null===(i=v.addons)||void 0===i?void 0:i.map((function(n){var e,t;return String((null===n||void 0===n||null===(e=n.stock)||void 0===e||null===(t=e.product)||void 0===t?void 0:t.id)||n.addon_id)})))||[])})).finally((function(){return g(!1)}))}),[v.uuid]),(0,E.jsx)(S.Z,{visible:!!P,title:null===P||void 0===P||null===(e=P.translation)||void 0===e?void 0:e.title,onCancel:wn,footer:[(0,E.jsx)(b.Z,{type:"primary",onClick:function(){R((0,w.oM)({calculate:!1}));var n=yn.map((function(n){return(0,x.Z)((0,x.Z)({},n),{},{quantity:n.product.quantity||n.product.min_qty,stock_id:n.product.stock.id})})),e=(0,x.Z)((0,x.Z)({},P),{},{stock:K,quantity:W,id:K.id,img:(0,F.Z)(K)||P.img,stockID:K,addons:n,price:K.price});e.quantity>K.quantity?D.Am.warning("".concat($("you.cannot.order.more.than")," ").concat(K.quantity)):(R((0,w.x$)(e)),p(null))},children:$("add")},"add-product"),(0,E.jsx)(b.Z,{type:"default",onClick:wn,children:$("cancel")},"cancel-modal")],children:(0,E.jsxs)(c.Z,{spinning:y,children:[(0,E.jsxs)(s.Z,{gutter:24,children:[(0,E.jsx)(u.Z,{span:8,children:(0,E.jsx)(C.Z,{src:(0,h.Z)((0,F.Z)(K)||P.img),alt:P.name,height:200,style:{objectFit:"contain"}})}),(0,E.jsx)(u.Z,{span:16,children:(0,E.jsxs)(I.Z,{title:null===(t=P.translation)||void 0===t?void 0:t.title,children:[(0,E.jsxs)(I.Z.Item,{label:$("price"),span:3,children:[(0,E.jsx)("div",{className:null!==K&&void 0!==K&&K.discount?"strike":"",children:(0,U.Z)(Nn(),G.symbol)}),null!==K&&void 0!==K&&K.discount?(0,E.jsx)("div",{className:"ml-2 font-weight-bold",children:(0,U.Z)(Nn("total_price"),G.symbol)}):""]}),(0,E.jsx)(I.Z.Item,{label:$("in.stock"),span:3,children:(0,Y.Z)(null===K||void 0===K?void 0:K.quantity,P.unit)}),(0,E.jsx)(I.Z.Item,{label:$("tax"),span:3,children:(0,U.Z)(null===K||void 0===K?void 0:K.tax,G.symbol)})]})})]}),null===cn||void 0===cn||null===(i=cn.extras)||void 0===i?void 0:i.map((function(n,e){return(0,E.jsx)("div",{className:"extra-group",children:(0,E.jsx)(d.Z,{className:"extras-select",children:n.map((function(n){return"color"===n.group.type?(0,E.jsx)("span",{className:"extras-color-wrapper ".concat(hn.find((function(e){return e.id===n.id}))?"selected":""),onClick:function(){return qn(n)},children:(0,E.jsx)("i",{className:"extras-color",style:{backgroundColor:n.value}})}):"text"===n.group.type?(0,E.jsx)("span",{className:"extras-text rounded ".concat(hn.find((function(e){return e.id===n.id}))?"selected":""),onClick:function(){return qn(n)},children:n.value}):(0,E.jsx)("span",{className:"extras-image rounded ".concat(hn.find((function(e){return e.id===n.id}))?"selected":""),onClick:function(){return qn(n)},children:(0,E.jsx)("img",{src:(0,h.Z)(n.value),alt:"extra"})})}))},"extra-group"+e)})})),(0,E.jsx)(d.Z,{direction:"vertical",size:"middle",children:null===(r=cn.stock)||void 0===r||null===(o=r.addons)||void 0===o?void 0:o.filter((function(n){return!!n.product})).map((function(n){var e=_n.includes(String(n.addon_id));return(0,E.jsxs)("div",{children:[(0,E.jsx)(M.Z,{id:String(n.id),name:String(n.id),checked:e,onChange:function(){return function(n){var e=String(n.addon_id);_n.includes(e)?kn((function(n){return n.filter((function(n){return n!==e}))})):kn((function(n){return[].concat((0,N.Z)(n),[e])}))}(n)}}),(0,E.jsxs)("label",{htmlFor:String(n.id),children:[e&&(0,E.jsxs)(d.Z,{size:0,children:[(0,E.jsx)(b.Z,{type:"text",className:"minus-button",style:{padding:0,height:"max-content"},size:"small",icon:(0,E.jsx)(j.Z,{}),disabled:1===n.product.quantity,onClick:function(e){e.stopPropagation(),Sn(n.addon_id,n.product.quantity-1)}}),(0,E.jsx)("span",{className:"ml-2",children:n.product.quantity||n.product.min_qty}),(0,E.jsx)(b.Z,{type:"text",className:"plus-button",style:{padding:0,height:"max-content"},size:"small",icon:(0,E.jsx)(m.Z,{}),onClick:function(e){e.stopPropagation(),Sn(n.addon_id,n.product.quantity?n.product.quantity+1:n.product.min_qty+1)}})]}),(0,E.jsx)("span",{className:"ml-2",children:n.product.translation.title})]})]},n.id)}))}),(0,E.jsx)(s.Z,{gutter:12,className:"mt-3",children:(0,E.jsx)(u.Z,{span:24,children:(0,E.jsxs)(d.Z,{children:[(0,E.jsx)(b.Z,{type:"primary",icon:(0,E.jsx)(j.Z,{}),onClick:function(){1!==W&&(W<=P.min_qty||Q((function(n){return n-1})))}},"plus"),W,(0,E.jsx)(b.Z,{type:"primary",icon:(0,E.jsx)(m.Z,{}),onClick:function(){W!==P.max_qty&&Q((function(n){return n+1}))}},"minus")]})})})]})})}var V=t(58467),$=t(90954),z=t(95882),L=t(21448),W=t(74776),Q=t.n(W),T=t(58821),J=t(53149);function K(){var n,e,t,i,r,v,p,N,S,C=(0,O.$)().t,I=(0,k.I0)(),M=(0,V.s0)(),D=(0,k.v9)((function(n){return n.order}),k.wU),Y=D.orderItems,A=D.data,F=D.total,B=D.coupon,W=D.orderProducts,K=(0,a.useState)(!1),X=(0,l.Z)(K,2),G=X[0],R=X[1],nn=(0,a.useState)(null),en=(0,l.Z)(nn,2),tn=en[0],rn=en[1],ln=(0,a.useState)(!1),an=(0,l.Z)(ln,2),on=an[0],dn=an[1],sn=(0,k.v9)((function(n){return n.menu}),k.wU).activeMenu;(0,H.Z)((function(){var n,e,t;(I((0,z.q1)({perPage:12,currency_id:A.currency.id,shop_id:null===(n=A.shop)||void 0===n?void 0:n.value})),null!==A&&void 0!==A&&null!==(e=A.shop)&&void 0!==e&&e.value)&&vn(null===A||void 0===A||null===(t=A.shop)||void 0===t?void 0:t.value)}),[A.currency,A.shop]),(0,H.Z)((function(){Y.length?function(){var n;if(null!==A&&void 0!==A&&null!==(n=A.deliveries)&&void 0!==n&&n.label){var e=function(n){var e,t,i,r,l,a,o,d=null===n||void 0===n?void 0:n.map((function(n){var e,t;return{quantity:n.quantity,stock_id:n.stockID?null===(e=n.stockID)||void 0===e?void 0:e.id:null===(t=n.stock)||void 0===t?void 0:t.id}})),s=null===n||void 0===n?void 0:n.flatMap((function(n){var e;return null===(e=n.addons)||void 0===e?void 0:e.map((function(e,t){var i,r;return{quantity:e.quantity,stock_id:e.stock_id,parent_id:n.stockID?null===(i=n.stockID)||void 0===i?void 0:i.id:null===(r=n.stock)||void 0===r?void 0:r.id}}))})),u={products:d.concat(s),currency_id:null===A||void 0===A||null===(e=A.currency)||void 0===e?void 0:e.id,coupon:null===A||void 0===A||null===(t=A.coupon)||void 0===t?void 0:t.name,shop_id:null===A||void 0===A||null===(i=A.shop)||void 0===i?void 0:i.value,type:null===A||void 0===A||null===(r=A.deliveries)||void 0===r||null===(l=r.label)||void 0===l?void 0:l.toLowerCase(),address:{latitude:null===A||void 0===A||null===(a=A.address)||void 0===a?void 0:a.lat,longitude:null===A||void 0===A||null===(o=A.address)||void 0===o?void 0:o.lng}};return Q().stringify(u,{addQueryPrefix:!0})}(Y);R(!0),q.Z.calculate(e).then((function(n){var e=n.data.data,t={product_tax:e.total_tax,shop_tax:e.total_shop_tax,order_total:e.total_price,delivery_fee:e.delivery_fee};I((0,w.rU)(t))})).catch((function(){return I((0,w.r3)(W))})).finally((function(){return R(!1)}))}}():I((0,w.pX)())}),[Y,A.currency,A.address]);var un=function(n){I((0,$.bL)({id:"product-".concat(n.uuid),url:"product/".concat(n.uuid),name:C("edit.product")})),M("/product/".concat(n.uuid))};var cn=function(n,e){I((0,w.OQ)({quantity:n,id:e}))},vn=function(n){J.Z.getById(n).then((function(n){I((0,$.nc)({activeMenu:sn,data:(0,x.Z)((0,x.Z)({},sn.data),{},{shop:n.data})}))}))};return(0,E.jsxs)("div",{className:"order-items",children:[G&&(0,E.jsx)("div",{className:"loader",children:(0,E.jsx)(c.Z,{})}),(0,E.jsx)(s.Z,{gutter:24,className:"mt-4",children:(0,E.jsx)(u.Z,{span:24,children:(0,E.jsxs)(o.Z,{className:"shop-card",children:[null===Y||void 0===Y?void 0:Y.map((function(n,e){var t,i,r,l,a,s;return void 0===n.bonus||!1===n.bonus?(0,E.jsx)("div",{children:(0,E.jsxs)(o.Z,{className:"position-relative",children:[(0,E.jsx)(Z.Z,{className:"close-order",onClick:function(){return I((0,w.Sg)(n))}}),(0,E.jsxs)(d.Z,{className:"mr-3",children:[(0,E.jsx)("div",{className:"order-item-img",children:(0,E.jsx)("img",{src:(0,h.Z)(null===n||void 0===n?void 0:n.img),alt:null===(t=n.translation)||void 0===t?void 0:t.title})}),(0,E.jsx)(f.Z,{title:(0,E.jsxs)("div",{children:[(0,E.jsxs)(d.Z,{children:[(0,E.jsx)("div",{className:"cursor-pointer white-space-wrap",onClick:function(){return un(n)},children:null===(i=n.translation)||void 0===i?void 0:i.title}),(0,E.jsx)(b.Z,{icon:(0,E.jsx)(y.Z,{}),type:"text",size:"small",onClick:function(){return rn(n)}})]}),(0,E.jsx)("div",{className:"product-price",children:(0,U.Z)(n.price,A.currency.symbol)})]}),description:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(d.Z,{children:[(0,E.jsx)(b.Z,{disabled:n.quantity<n.min_qty+1,onClick:function(){return cn(n.quantity-1,n.id)},type:"primary",icon:(0,E.jsx)(j.Z,{})})," ",n.quantity," ",(0,E.jsx)(b.Z,{onClick:function(){return cn(n.quantity+1,n.id)},type:"primary",icon:(0,E.jsx)(m.Z,{})})]}),(0,E.jsx)("div",{className:"mt-2",children:(0,E.jsx)(d.Z,{wrap:!0,children:null===n||void 0===n||null===(r=n.addons)||void 0===r?void 0:r.map((function(n){var e,t,i,r;return(0,E.jsxs)("span",{className:"extras-text rounded",children:[(null===n||void 0===n||null===(e=n.stock)||void 0===e||null===(t=e.product)||void 0===t||null===(i=t.translation)||void 0===i?void 0:i.title)||(null===n||void 0===n||null===(r=n.product.translation)||void 0===r?void 0:r.title)," ","x ",null===n||void 0===n?void 0:n.quantity]},n.id)}))})})]})})]})]})}):(0,E.jsx)("div",{children:(0,E.jsx)("div",{children:(0,E.jsx)(o.Z,{className:"position-relative",children:(0,E.jsxs)(d.Z,{className:"mr-3 w-100 justify-content-between align-items-start",children:[(0,E.jsxs)(d.Z,{children:[(0,E.jsx)("div",{className:"order-item-img",children:(0,E.jsx)("img",{src:(0,h.Z)(null===n||void 0===n?void 0:n.img),alt:null===(l=n.translation)||void 0===l?void 0:l.title})}),(0,E.jsx)(f.Z,{title:(0,E.jsxs)("div",{children:[(0,E.jsx)("div",{className:"cursor-pointer white-space-wrap",onClick:function(){return un(n)},children:null===(a=n.translation)||void 0===a?void 0:a.title}),(0,E.jsx)("div",{className:"product-price",children:(0,U.Z)(n.price,null===(s=A.currency)||void 0===s?void 0:s.symbol)})]})})]}),(0,E.jsxs)("div",{className:"bonus",children:[(0,E.jsx)(T.ojn,{})," Bonus"]})]})})})},e)})),(0,E.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,E.jsxs)(d.Z,{children:[(0,E.jsx)("img",{src:(0,h.Z)(null===(n=sn.data)||void 0===n||null===(e=n.shop)||void 0===e?void 0:e.logo_img),alt:"logo",width:40,height:40,className:"rounded-circle"}),(0,E.jsx)("div",{children:null===(t=sn.data)||void 0===t||null===(i=t.shop)||void 0===i||null===(r=i.translation)||void 0===r?void 0:r.title})]}),(0,E.jsxs)(d.Z,{children:[(0,E.jsx)(_.Z,{placeholder:C("coupon"),addonAfter:B.verified?(0,E.jsx)(g.Z,{style:{color:"#18a695"}}):null,defaultValue:B.coupon,onBlur:function(n){var e;return I((0,w.cp)({coupon:n.target.value,user_id:null===(e=A.user)||void 0===e?void 0:e.value,shop_id:A.shop.value,verified:!1}))}}),(0,E.jsx)(b.Z,{onClick:function(){return A.shop.id,void(B&&(dn(!0),L.Z.checkCoupon(B).then((function(n){var e=n.data;I((0,w.oM)({coupon:e})),I((0,w.NS)({price:n.data.price,verified:!0}))})).catch((function(){return I((0,w.NS)({price:0,verified:!1}))})).finally((function(){return dn(!1)}))))},loading:on,children:C("check.coupon")})]}),(0,E.jsxs)("div",{className:"mt-2 text-right shop-total",children:[(0,E.jsxs)(d.Z,{children:[(0,E.jsxs)("p",{className:"font-weight-bold",children:[C("product.tax"),":"]}),(0,E.jsx)("p",{children:(0,U.Z)(F.product_tax,null===(v=A.currency)||void 0===v?void 0:v.symbol)})]}),(0,E.jsx)("div",{}),(0,E.jsxs)(d.Z,{children:[(0,E.jsxs)("p",{className:"font-weight-bold",children:[C("shop.tax"),":"]}),(0,E.jsx)("p",{children:(0,U.Z)(F.shop_tax,null===(p=A.currency)||void 0===p?void 0:p.symbol)})]}),(0,E.jsx)("div",{}),(0,E.jsxs)(d.Z,{children:[(0,E.jsxs)("p",{className:"font-weight-bold",children:[C("delivery.fee"),":"]}),(0,E.jsx)("p",{children:(0,U.Z)(F.delivery_fee,null===(N=A.currency)||void 0===N?void 0:N.symbol)})]}),(0,E.jsx)("div",{}),(0,E.jsxs)(d.Z,{children:[(0,E.jsxs)("p",{className:"font-weight-bold",children:[C("total"),":"]}),(0,E.jsx)("p",{children:(0,U.Z)(F.order_total,null===(S=A.currency)||void 0===S?void 0:S.symbol)})]})]})]})]})})}),tn&&(0,E.jsx)(P,{extrasModal:tn,setExtrasModal:rn})]})}var X=t(89281),G=t(41481),R=t(49067),nn=t(51988),en=function(n){var e=n.form,t=(0,O.$)().t,x=(0,a.useState)(null),Z=(0,l.Z)(x,2),y=Z[0],j=Z[1],g=(0,a.useState)(null),b=(0,l.Z)(g,2),_=b[0],q=b[1],N=(0,a.useState)(null),S=(0,l.Z)(N,2),C=S[0],I=S[1],M=(0,a.useState)(null),U=(0,l.Z)(M,2),Y=U[0],A=U[1],F=(0,V.UO)().id,B=(0,k.I0)(),$=(0,k.v9)((function(n){return n.order}),k.wU).data,L=(0,k.v9)((function(n){return n.product}),k.wU),W=L.products,Q=L.loading;function J(){return J=(0,r.Z)((0,i.Z)().mark((function n(e){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",v.Z.search(e).then((function(n){return n.data.map((function(n){return{label:n.title,value:n.id}}))})));case 1:case"end":return n.stop()}}),n)}))),J.apply(this,arguments)}function en(){return en=(0,r.Z)((0,i.Z)().mark((function n(e){var t;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={search:e},n.abrupt("return",p.Z.search(t).then((function(n){return n.data.map((function(n){var e;return{label:null===(e=n.translation)||void 0===e?void 0:e.title,value:n.id}}))})));case 2:case"end":return n.stop()}}),n)}))),en.apply(this,arguments)}(0,H.Z)((function(){var n,e={perPage:10,page:1,brand_id:null===y||void 0===y?void 0:y.value,category_id:null===_||void 0===_?void 0:_.value,search:C,shop_id:null===(n=$.shop)||void 0===n?void 0:n.value,active:1};B((0,z.q1)(e))}),[y,_,C,$.shop]);function tn(){return tn=(0,r.Z)((0,i.Z)().mark((function n(e){var t;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={search:e,status:"approved"},n.abrupt("return",R.Z.getAll(t).then((function(n){return n.data.map((function(n){var e;return{label:null===(e=n.translation)||void 0===e?void 0:e.title,value:n.id}}))})));case 2:case"end":return n.stop()}}),n)}))),tn.apply(this,arguments)}return(0,E.jsxs)(o.Z,{title:t("order.details"),extra:(0,E.jsxs)(d.Z,{wrap:!0,children:[(0,E.jsx)(X.h,{placeholder:t("select.shop"),fetchOptions:function(n){return tn.apply(this,arguments)},style:{minWidth:150},onChange:function(n){B((0,w.HL)(n)),B((0,w.mf)()),e.setFieldsValue({delivery:null,delivery_date:null,delivery_time:null})},allowClear:!1,value:null===$||void 0===$?void 0:$.shop,disabled:F}),(0,E.jsx)(X.h,{placeholder:t("select.category"),fetchOptions:function(n){return en.apply(this,arguments)},style:{minWidth:150},onChange:function(n){return q(n)},value:_}),(0,E.jsx)(X.h,{placeholder:t("select.brand"),fetchOptions:function(n){return J.apply(this,arguments)},style:{minWidth:150},onChange:function(n){return j(n)},value:y})]}),children:[(0,E.jsx)("div",{className:"d-flex justify-content-end mb-4",children:(0,E.jsx)(G.Z,{placeholder:t("search"),handleChange:I,defaultValue:null===C||void 0===C?void 0:C.search})}),(0,E.jsxs)("div",{className:"products-row order-items",children:[W.length?W.map((function(n){var e,i,r,l;return(0,E.jsxs)(o.Z,{className:"products-col",cover:(0,E.jsx)("img",{alt:null===(e=n.product)||void 0===e||null===(i=e.translation)||void 0===i?void 0:i.title,src:(0,h.Z)(null===n||void 0===n?void 0:n.img)}),onClick:function(){return function(n){$.currency?$.address?$.deliveries?A(n):D.Am.warning(t("please.select.delivery")):D.Am.warning(t("please.select.address")):D.Am.warning(t("please.select.currency"))}(n)},children:[(0,E.jsx)(f.Z,{title:null===n||void 0===n||null===(r=n.product)||void 0===r||null===(l=r.translation)||void 0===l?void 0:l.title}),(0,E.jsx)("div",{className:"preview",children:(0,E.jsx)(m.Z,{})}),n.stocks.map((function(n){var e,t;return(0,E.jsxs)("span",{className:n.bonus?"show-bonus":"d-none",children:[(0,E.jsx)(T.ojn,{})," ",null===(e=n.bonus)||void 0===e?void 0:e.value,"+",null===(t=n.bonus)||void 0===t?void 0:t.bonus_quantity]})}))]},n.id)})):(0,E.jsx)(s.Z,{children:(0,E.jsx)(u.Z,{span:24,children:(0,E.jsx)(nn.Z,{id:"nosell"})})}),Q&&(0,E.jsx)("div",{className:"loader",children:(0,E.jsx)(c.Z,{})})]}),Y&&(0,E.jsx)(P,{extrasModal:Y,setExtrasModal:A}),(0,E.jsx)(K,{form:e})]})}},3250:function(n,e,t){t.d(e,{Z:function(){return Y}});var i=t(74165),r=t(15861),l=t(29439),a=t(47313),o=t(77181),d=t(68197),s=t(59624),u=t(18197),c=t(59491),v=t(74294),p=t(66672),f=t(16031),h=t(49986),m=t(89281),x=t(2717),Z=t(73270),y=t(24511),j=t(55768),g=t(90954),b=t(58467),_=t(34491),k=t(89802),w=t(20637),q=t(1413),N=t(84695),S=t(97388),C=t(17649),I=t(47168),M=t(97421),U=t(46417);function D(n){var e,t,i=n.uuid,r=n.handleCancel,o=(0,y.$)().t,d=u.Z.useForm(),s=(0,l.Z)(d,1)[0],v=(0,x.I0)(),p=(0,x.v9)((function(n){return n.menu}),x.wU).activeMenu,f=(0,x.v9)((function(n){return n.globalSettings}),x.wU).settings,h=(0,x.v9)((function(n){return n.globalSettings.settings}),x.wU).google_map_key,m=(0,x.v9)((function(n){return n.order}),x.wU).data,j=(0,I.usePlacesWidget)({apiKey:h||M.kr,onPlaceSelected:function(n){var e={lat:null===n||void 0===n?void 0:n.geometry.location.lat(),lng:null===n||void 0===n?void 0:n.geometry.location.lng()};D(e)}}),b=j.ref,_=(0,a.useState)(m.address?{lat:m.address.lat,lng:m.address.lng}:(0,C.Z)(f)),k=(0,l.Z)(_,2),w=k[0],D=k[1];return(0,U.jsx)(N.Z,{visible:!!i,title:o("create.address"),onCancel:r,footer:[(0,U.jsx)(c.Z,{type:"primary",onClick:function(){return s.submit()},children:o("save")},"saveBtn"),(0,U.jsx)(c.Z,{type:"default",onClick:r,children:o("cancel")},"cancelBtn")],children:(0,U.jsxs)(u.Z,{layout:"vertical",name:"user-address",form:s,onFinish:function(n){var e=(0,q.Z)((0,q.Z)({},n),{},{active:1,lat:w.lat,lng:w.lng});v((0,Z.oM)({address:e})),v((0,g.nc)({activeMenu:p,data:(0,q.Z)((0,q.Z)({},p.data),{},{addressData:e})})),r()},initialValues:{address:null===p||void 0===p||null===(e=p.data)||void 0===e||null===(t=e.addressData)||void 0===t?void 0:t.address},children:[(0,U.jsx)(u.Z.Item,{name:"address",label:o("address"),rules:[{required:!0,message:o("required")}],children:(0,U.jsx)("input",{className:"address-input",ref:b,placeholder:""})}),(0,U.jsx)(u.Z.Item,{label:o("map"),children:(0,U.jsx)(S.Z,{location:w,setLocation:D,setAddress:function(n){return s.setFieldsValue({address:n})}})})]})})}var Y=function(n){var e,t,q=n.form,N=(0,y.$)().t,S=(0,x.I0)(),C=(0,b.s0)(),I=(0,x.v9)((function(n){return n.order}),x.wU).data,M=(0,x.v9)((function(n){return n.currency}),x.wU).currencies,Y=(0,x.v9)((function(n){return n.menu}),x.wU).activeMenu,O=(0,a.useState)(null),A=(0,l.Z)(O,2),F=A[0],H=A[1],B=(0,a.useState)([]),E=(0,l.Z)(B,2),P=E[0],V=E[1],$=(0,a.useState)(!1),z=(0,l.Z)($,2),L=z[0],W=z[1],Q=(0,x.v9)((function(n){return n.globalSettings.settings}),x.wU).payment_type;function T(){return T=(0,r.Z)((0,i.Z)().mark((function n(e){var t;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={search:e,perPage:10},n.abrupt("return",h.Z.search(t).then((function(n){var e=n.data;return V(e),X(e)})));case 2:case"end":return n.stop()}}),n)}))),T.apply(this,arguments)}function J(){return(J=(0,r.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",w.Z.getAll().then((function(n){return n.data.filter((function(n){return"cash"===n.tag||"wallet"===n.tag})).map((function(n){return{label:n.tag||"no name",value:n.id,key:n.id}}))})));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function K(){return(K=(0,r.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",w.Z.getById(I.shop.value).then((function(n){return n.data.filter((function(n){return"cash"===n.tag||"wallet"===n.tag})).map((function(n){return{label:n.payment.tag||"no name",value:n.payment.id,key:n.payment.id}}))})));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function X(n){if(n)return(0,f.isArray)(n)?n.map((function(n){return{label:"".concat(n.firstname," ").concat(n.lastname||""),value:n.id}})):{label:"".concat(n.firstname," ").concat(n.lastname||""),value:n.id,key:n.id}}(0,a.useEffect)((function(){W(!0)}),[I.shop]);return(0,U.jsxs)(o.Z,{title:N("customer.details"),children:[(0,U.jsxs)(d.Z,{gutter:12,children:[(0,U.jsx)(s.Z,{span:16,children:(0,U.jsx)(u.Z.Item,{label:N("client"),name:"user",rules:[{required:!0,message:N("required")}],children:(0,U.jsx)(m.h,{placeholder:N("select.client"),fetchOptions:function(n){return T.apply(this,arguments)},onSelect:function(n){var e=P.find((function(e){return e.id===n.value}));S((0,Z.oM)({user:n,userUuid:e.uuid,userOBJ:e})),q.setFieldsValue({address:null})}})})}),(0,U.jsx)(s.Z,{span:8,children:(0,U.jsx)(u.Z.Item,{label:N("add"),className:"label-hidden",children:(0,U.jsx)(c.Z,{icon:(0,U.jsx)(j.Z,{}),onClick:function(){S((0,g.bL)({url:"user/add",id:"user_add",name:N("add.user")})),C("/user/add")},children:N("add")})})}),(0,U.jsx)(s.Z,{span:24,children:(0,U.jsx)(u.Z.Item,{label:N("address"),name:"address",rules:[{required:!1,message:N("required")}],children:(0,U.jsx)("div",{className:"address w-100",onClick:function(){I.userUuid?H(I.userUuid):_.Am.warning(N("please.select.client"))},children:null===(e=Y.data)||void 0===e||null===(t=e.addressData)||void 0===t?void 0:t.address})})}),(0,U.jsx)(s.Z,{span:12,children:(0,U.jsx)(u.Z.Item,{label:N("currency"),name:"currency_id",rules:[{required:!0,message:N("required")}],children:(0,U.jsx)(v.Z,{placeholder:N("select.currency"),onSelect:function(n){var e=M.find((function(e){return e.id===n}));S((0,Z.dY)(e))},children:M.map((function(n,e){return(0,U.jsxs)(v.Z.Option,{value:n.id,children:[n.title," (",n.symbol,")"]},e)}))})})}),(0,U.jsx)(s.Z,{span:12,children:(0,U.jsx)(u.Z.Item,{label:N("payment.type"),name:"payment_type",rules:[{required:!0,message:N("required")}],children:(0,U.jsx)(k.q,{refetch:L,fetchOptions:"admin"===Q?function(){return J.apply(this,arguments)}:function(){return K.apply(this,arguments)},className:"w-100",placeholder:N("select.payment.type"),onSelect:function(n){return S((0,Z.oM)({paymentType:n}))}})})}),(0,U.jsx)(s.Z,{span:24,children:(0,U.jsx)(u.Z.Item,{label:N("note"),name:"note",children:(0,U.jsx)(p.Z,{})})})]}),F&&(0,U.jsx)(D,{uuid:F,handleCancel:function(){return H(null)}})]})}}}]);