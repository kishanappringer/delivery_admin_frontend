"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[659],{659:function(e,t,n){n.r(t);var a=n(1413),c=n(93433),i=n(4942),l=n(29439),r=n(47313),s=n(18197),o=n(77181),d=n(68197),u=n(59624),f=n(66672),h=n(74294),m=n(86345),p=n(59491),Z=n(72652),v=n(34491),g=n(58467),y=n(73431),x=n(52421),b=n(2717),j=n(90954),w=n(30763),k=n(97421),C=n(49991),N=n(24511),I=n(37889),O=n(46417);t.default=function(){var e,t,n=(0,N.$)().t,E=(0,g.s0)(),S=(0,b.I0)(),_=(0,b.v9)((function(e){return e.menu}),b.wU).activeMenu,q=(0,b.v9)((function(e){return e.shopCategory}),b.wU).params,T=(0,r.useState)(!1),U=(0,l.Z)(T,2),F=U[0],L=U[1],P=(0,r.useState)(null!==(e=_.data)&&void 0!==e&&e.image?[null===(t=_.data)||void 0===t?void 0:t.image]:[]),V=(0,l.Z)(P,2),A=V[0],z=V[1],D=s.Z.useForm(),H=(0,l.Z)(D,1)[0],K=(0,r.useState)(!1),R=(0,l.Z)(K,2),M=R[0],B=R[1],G=(0,r.useState)(null),W=(0,l.Z)(G,2),$=W[0],J=W[1],Q=(0,g.TH)(),X=(0,g.UO)().uuid,Y=(0,b.v9)((function(e){return e.formLang}),b.wU),ee=Y.defaultLang,te=Y.languages;(0,r.useEffect)((function(){return function(){var e=H.getFieldsValue(!0);S((0,j.nc)({activeMenu:_,data:e}))}}),[]);var ne=function(e){return{name:e,url:k.bV+e}};var ae=function(e){L(!0),w.Z.getById(e).then((function(e){var t=e.data,n=(0,a.Z)((0,a.Z)((0,a.Z)({},t),function(e){if(!e)return{};var t=e.translations,n=te.map((function(e){var n,a,c;return c={},(0,i.Z)(c,"title[".concat(e.locale,"]"),null===(n=t.find((function(t){return t.locale===e.locale})))||void 0===n?void 0:n.title),(0,i.Z)(c,"description[".concat(e.locale,"]"),null===(a=t.find((function(t){return t.locale===e.locale})))||void 0===a?void 0:a.description),c}));return Object.assign.apply(Object,[{}].concat((0,c.Z)(n)))}(t)),{},{image:[ne(t.img)],keywords:t.keywords.split(",")});H.setFieldsValue(n),z([ne(t.img)])})).finally((function(){L(!1),S((0,j.A_)(_))}))};return(0,r.useEffect)((function(){_.refetch&&ae(X)}),[_.refetch]),(0,O.jsx)(o.Z,{title:n("edit.category"),extra:(0,O.jsx)(y.Z,{}),children:F?(0,O.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,O.jsx)(Z.Z,{size:"large",className:"mt-5 pt-5"})}):(0,O.jsxs)(s.Z,{name:"basic",layout:"vertical",onFinish:function(e){var t;B(!0);var c=(0,a.Z)((0,a.Z)({},e),{},{type:"shop",active:e.active?1:0,keywords:e.keywords.join(","),parent_id:null,"images[0]":null===(t=A[0])||void 0===t?void 0:t.name}),i="catalog/shop/categories";"edit"===Q.state?w.Z.update(X,c).then((function(){v.Am.success(n("successfully.updated")),S((0,j.ph)((0,a.Z)((0,a.Z)({},_),{},{nextUrl:i}))),S((0,C.a)(q)),E("/catalog/shop/categories")})).catch((function(e){return J(e.response.data.params)})).finally((function(){return B(!1)})):w.Z.create(c).then((function(){v.Am.success(n("successfully.created")),S((0,j.ph)((0,a.Z)((0,a.Z)({},_),{},{nextUrl:i}))),S((0,C.a)()),E("/catalog/shop/categories")})).catch((function(e){return J(e.response.data.params)})).finally((function(){return B(!1)}))},initialValues:(0,a.Z)({parent_id:{title:"---",value:0,key:0},active:!0},_.data),form:H,children:[(0,O.jsxs)(d.Z,{gutter:12,children:[(0,O.jsx)(u.Z,{span:12,children:te.map((function(e,t){return(0,O.jsx)(s.Z.Item,{label:n("name"),name:"title[".concat(e.locale,"]"),help:$&&$["title.".concat(ee)]?$["title.".concat(ee)][0]:null,validateStatus:$?"error":"success",rules:[{required:e.locale===ee,message:n("required")}],hidden:e.locale!==ee,children:(0,O.jsx)(f.Z,{})},e.title+t)}))}),(0,O.jsx)(u.Z,{span:12,children:te.map((function(e,t){return(0,O.jsx)(s.Z.Item,{label:n("description"),name:"description[".concat(e.locale,"]"),rules:[{required:e.locale===ee,message:n("required")}],hidden:e.locale!==ee,children:(0,O.jsx)(x.Z,{rows:4})},e.locale+t)}))}),(0,O.jsx)(u.Z,{span:12,children:(0,O.jsx)(s.Z.Item,{label:n("keywords"),name:"keywords",rules:[{required:!0,message:n("required")}],children:(0,O.jsx)(h.Z,{mode:"tags",style:{width:"100%"}})})}),(0,O.jsx)(u.Z,{span:4,children:(0,O.jsx)(s.Z.Item,{label:n("image"),children:(0,O.jsx)(I.Z,{type:"categories",imageList:A,setImageList:z,form:H,multiple:!1})})}),(0,O.jsx)(u.Z,{span:2,children:(0,O.jsx)(s.Z.Item,{label:n("active"),name:"active",valuePropName:"checked",children:(0,O.jsx)(m.Z,{})})})]}),(0,O.jsx)(p.Z,{type:"primary",htmlType:"submit",loading:M,children:n("submit")})]})})}},86345:function(e,t,n){n.d(t,{Z:function(){return x}});var a=n(87462),c=n(4942),i=n(47313),l=n(29439),r=n(45987),s=n(46123),o=n.n(s),d=n(10288),u=n(49242),f=i.forwardRef((function(e,t){var n,a=e.prefixCls,s=void 0===a?"rc-switch":a,f=e.className,h=e.checked,m=e.defaultChecked,p=e.disabled,Z=e.loadingIcon,v=e.checkedChildren,g=e.unCheckedChildren,y=e.onClick,x=e.onChange,b=e.onKeyDown,j=(0,r.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),w=(0,d.Z)(!1,{value:h,defaultValue:m}),k=(0,l.Z)(w,2),C=k[0],N=k[1];function I(e,t){var n=C;return p||(N(n=e),null===x||void 0===x||x(n,t)),n}var O=o()(s,f,(n={},(0,c.Z)(n,"".concat(s,"-checked"),C),(0,c.Z)(n,"".concat(s,"-disabled"),p),n));return i.createElement("button",Object.assign({},j,{type:"button",role:"switch","aria-checked":C,disabled:p,className:O,ref:t,onKeyDown:function(e){e.which===u.Z.LEFT?I(!1,e):e.which===u.Z.RIGHT&&I(!0,e),null===b||void 0===b||b(e)},onClick:function(e){var t=I(!C,e);null===y||void 0===y||y(t,e)}}),Z,i.createElement("span",{className:"".concat(s,"-inner")},C?v:g))}));f.displayName="Switch";var h=f,m=n(82508),p=n(46479),Z=n(91964),v=n(21631),g=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(n[a[c]]=e[a[c]])}return n},y=i.forwardRef((function(e,t){var n,l=e.prefixCls,r=e.size,s=e.loading,d=e.className,u=void 0===d?"":d,f=e.disabled,y=g(e,["prefixCls","size","loading","className","disabled"]),x=i.useContext(Z.E_),b=x.getPrefixCls,j=x.direction,w=i.useContext(v.Z),k=b("switch",l),C=i.createElement("div",{className:"".concat(k,"-handle")},s&&i.createElement(m.Z,{className:"".concat(k,"-loading-icon")})),N=o()((n={},(0,c.Z)(n,"".concat(k,"-small"),"small"===(r||w)),(0,c.Z)(n,"".concat(k,"-loading"),s),(0,c.Z)(n,"".concat(k,"-rtl"),"rtl"===j),n),u);return i.createElement(p.Z,{insertExtraNode:!0},i.createElement(h,(0,a.Z)({},y,{prefixCls:k,className:N,disabled:f||s,ref:t,loadingIcon:C})))}));y.__ANT_SWITCH=!0,y.displayName="Switch";var x=y}}]);