"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[7097],{97097:function(e,n,t){t.r(n);var a=t(1413),i=t(93433),l=t(4942),r=t(29439),c=t(47313),s=t(18197),o=t(77181),d=t(68197),u=t(59624),f=t(66672),m=t(74294),p=t(86345),h=t(59491),v=t(72652),Z=t(34491),g=t(58467),y=t(73431),x=t(52421),b=t(2717),j=t(90954),w=t(97421),k=t(24511),C=t(37889),N=t(74380),I=t(47647),_=t(46417);n.default=function(){var e,n,t=(0,k.$)().t,O=(0,g.s0)(),E=(0,b.I0)(),S=(0,b.v9)((function(e){return e.menu}),b.wU).activeMenu,q=(0,c.useState)(!1),P=(0,r.Z)(q,2),T=P[0],U=P[1],F=(0,c.useState)(null!==(e=S.data)&&void 0!==e&&e.image?[null===(n=S.data)||void 0===n?void 0:n.image]:[]),L=(0,r.Z)(F,2),V=L[0],A=L[1],z=s.Z.useForm(),D=(0,r.Z)(z,1)[0],H=(0,c.useState)(!1),K=(0,r.Z)(H,2),R=K[0],M=K[1],B=(0,c.useState)(null),G=(0,r.Z)(B,2),W=G[0],$=G[1],J=(0,g.TH)(),Q=(0,g.UO)().uuid,X=((0,b.v9)((function(e){return e.category}),b.wU).params,(0,b.v9)((function(e){return e.formLang}),b.wU)),Y=X.defaultLang,ee=X.languages;(0,c.useEffect)((function(){return function(){var e=D.getFieldsValue(!0);E((0,j.nc)({activeMenu:S,data:e}))}}),[]);var ne=function(e){return{name:e,url:w.bV+e}};var te=function(e){U(!0),I.Z.getById(e).then((function(e){var n,t=e.data,r=(0,a.Z)((0,a.Z)((0,a.Z)({},t),function(e){if(!e)return{};var n=e.translations,t=ee.map((function(e){var t,a,i;return i={},(0,l.Z)(i,"title[".concat(e.locale,"]"),null===(t=n.find((function(n){return n.locale===e.locale})))||void 0===t?void 0:t.title),(0,l.Z)(i,"description[".concat(e.locale,"]"),null===(a=n.find((function(n){return n.locale===e.locale})))||void 0===a?void 0:a.description),i}));return Object.assign.apply(Object,[{}].concat((0,i.Z)(t)))}(t)),{},{image:[ne(t.img)],keywords:t.keywords.split(","),parent_id:{label:t.parent?null===t||void 0===t||null===(n=t.translation)||void 0===n?void 0:n.title:"---",value:t.parent?null===t||void 0===t?void 0:t.id:0,key:t.parent?null===t||void 0===t?void 0:t.id:0}});D.setFieldsValue(r),A([ne(t.img)])})).finally((function(){U(!1),E((0,j.A_)(S))}))};return(0,c.useEffect)((function(){S.refetch&&te(Q)}),[S.refetch]),(0,_.jsx)(o.Z,{title:t("edit.category"),extra:(0,_.jsx)(y.Z,{}),children:T?(0,_.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,_.jsx)(v.Z,{size:"large",className:"mt-5 pt-5"})}):(0,_.jsxs)(s.Z,{name:"basic",layout:"vertical",onFinish:function(e){var n,i,l;M(!0);var r=(0,a.Z)((0,a.Z)({},e),{},{type:"receipt",active:e.active?1:0,keywords:e.keywords.join(","),parent_id:0===(null===(n=e.parent_id)||void 0===n?void 0:n.value)?null:null===(i=e.parent_id)||void 0===i?void 0:i.value,"images[0]":null===(l=V[0])||void 0===l?void 0:l.name}),c="catalog/recipe-categories";"edit"===J.state?I.Z.update(Q,r).then((function(){Z.Am.success(t("successfully.updated")),E((0,j.ph)((0,a.Z)((0,a.Z)({},S),{},{nextUrl:c}))),E((0,N.P2)()),O("/".concat(c))})).catch((function(e){return $(e.response.data.params)})).finally((function(){return M(!1)})):I.Z.create(r).then((function(){Z.Am.success(t("successfully.updated")),E((0,j.ph)((0,a.Z)((0,a.Z)({},S),{},{nextUrl:c}))),E((0,N.P2)()),O("/".concat(c))})).catch((function(e){return $(e.response.data.params)})).finally((function(){return M(!1)}))},initialValues:(0,a.Z)({parent_id:{title:"---",value:0,key:0},active:!0},S.data),form:D,children:[(0,_.jsxs)(d.Z,{gutter:12,children:[(0,_.jsx)(u.Z,{span:12,children:ee.map((function(e,n){return(0,_.jsx)(s.Z.Item,{label:t("name"),name:"title[".concat(e.locale,"]"),help:W&&W["title.".concat(Y)]?W["title.".concat(Y)][0]:null,validateStatus:W?"error":"success",rules:[{required:e.locale===Y,message:t("required")}],hidden:e.locale!==Y,children:(0,_.jsx)(f.Z,{})},e.title+n)}))}),(0,_.jsx)(u.Z,{span:12,children:ee.map((function(e,n){return(0,_.jsx)(s.Z.Item,{label:t("description"),name:"description[".concat(e.locale,"]"),rules:[{required:e.locale===Y,message:t("required")}],hidden:e.locale!==Y,children:(0,_.jsx)(x.Z,{rows:4})},e.locale+n)}))}),(0,_.jsx)(u.Z,{span:12,children:(0,_.jsx)(s.Z.Item,{label:t("keywords"),name:"keywords",rules:[{required:!0,message:t("required")}],children:(0,_.jsx)(m.Z,{mode:"tags",style:{width:"100%"}})})}),(0,_.jsx)(u.Z,{span:12,children:(0,_.jsx)(s.Z.Item,{label:t("parent.category"),name:"parent_id",rules:[{required:!0,message:t("required")}],help:W&&W.parent_id?W.parent_id[0]:null,validateStatus:W?"error":"success",children:(0,_.jsx)(m.Z,{children:(0,_.jsx)(m.Z.Option,{value:0,children:"---"})})})}),(0,_.jsx)(u.Z,{span:4,children:(0,_.jsx)(s.Z.Item,{label:t("image"),children:(0,_.jsx)(C.Z,{type:"categories",imageList:V,setImageList:A,form:D,multiple:!1})})}),(0,_.jsx)(u.Z,{span:2,children:(0,_.jsx)(s.Z.Item,{label:t("active"),name:"active",valuePropName:"checked",children:(0,_.jsx)(p.Z,{})})})]}),(0,_.jsx)(h.Z,{type:"primary",htmlType:"submit",loading:R,children:t("submit")})]})})}},86345:function(e,n,t){t.d(n,{Z:function(){return x}});var a=t(87462),i=t(4942),l=t(47313),r=t(29439),c=t(45987),s=t(46123),o=t.n(s),d=t(10288),u=t(49242),f=l.forwardRef((function(e,n){var t,a=e.prefixCls,s=void 0===a?"rc-switch":a,f=e.className,m=e.checked,p=e.defaultChecked,h=e.disabled,v=e.loadingIcon,Z=e.checkedChildren,g=e.unCheckedChildren,y=e.onClick,x=e.onChange,b=e.onKeyDown,j=(0,c.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),w=(0,d.Z)(!1,{value:m,defaultValue:p}),k=(0,r.Z)(w,2),C=k[0],N=k[1];function I(e,n){var t=C;return h||(N(t=e),null===x||void 0===x||x(t,n)),t}var _=o()(s,f,(t={},(0,i.Z)(t,"".concat(s,"-checked"),C),(0,i.Z)(t,"".concat(s,"-disabled"),h),t));return l.createElement("button",Object.assign({},j,{type:"button",role:"switch","aria-checked":C,disabled:h,className:_,ref:n,onKeyDown:function(e){e.which===u.Z.LEFT?I(!1,e):e.which===u.Z.RIGHT&&I(!0,e),null===b||void 0===b||b(e)},onClick:function(e){var n=I(!C,e);null===y||void 0===y||y(n,e)}}),v,l.createElement("span",{className:"".concat(s,"-inner")},C?Z:g))}));f.displayName="Switch";var m=f,p=t(82508),h=t(46479),v=t(91964),Z=t(21631),g=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)n.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(t[a[i]]=e[a[i]])}return t},y=l.forwardRef((function(e,n){var t,r=e.prefixCls,c=e.size,s=e.loading,d=e.className,u=void 0===d?"":d,f=e.disabled,y=g(e,["prefixCls","size","loading","className","disabled"]),x=l.useContext(v.E_),b=x.getPrefixCls,j=x.direction,w=l.useContext(Z.Z),k=b("switch",r),C=l.createElement("div",{className:"".concat(k,"-handle")},s&&l.createElement(p.Z,{className:"".concat(k,"-loading-icon")})),N=o()((t={},(0,i.Z)(t,"".concat(k,"-small"),"small"===(c||w)),(0,i.Z)(t,"".concat(k,"-loading"),s),(0,i.Z)(t,"".concat(k,"-rtl"),"rtl"===j),t),u);return l.createElement(h.Z,{insertExtraNode:!0},l.createElement(m,(0,a.Z)({},y,{prefixCls:k,className:N,disabled:f||s,ref:n,loadingIcon:C})))}));y.__ANT_SWITCH=!0,y.displayName="Switch";var x=y}}]);