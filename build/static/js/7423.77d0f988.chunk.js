"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[7423],{89802:function(A,e,n){n.d(e,{q:function(){return c}});var t=n(1413),r=n(29439),i=n(45987),l=n(47313),a=n(74294),s=n(72652),o=n(46417),d=["fetchOptions","refetch"],c=function(A){var e=A.fetchOptions,n=A.refetch,c=void 0!==n&&n,u=(0,i.Z)(A,d),v=(0,l.useState)(!1),f=(0,r.Z)(v,2),p=f[0],h=f[1],x=(0,l.useState)([]),m=(0,r.Z)(x,2),y=m[0],Z=m[1];return(0,o.jsx)(a.Z,(0,t.Z)((0,t.Z)({labelInValue:!0,filterOption:!1,notFoundContent:p?(0,o.jsx)(s.Z,{size:"small"}):"no results"},u),{},{options:p?[]:y,onFocus:function(){y.length&&!c||(h(!0),e().then((function(A){Z(A),h(!1)})))}}))}},51988:function(A,e,n){n.d(e,{Z:function(){return o}});n(47313);var t=n(24511),r=n(66188),i=n.p+"static/media/noproductsfound.1cec73868b5fd048b865.riv",l=n.p+"static/media/noresult.ac4af107751f94856a9c.riv",a=n.p+"static/media/nosell.32cb2c2cc548a15c820d.riv",s=n(46417);var o=function(A){var e=A.id,n=void 0===e?"noresult":e,o=A.text,d=void 0===o?"":o,c=(0,t.$)().t,u={src:{noproductsfound:i,noresult:l,nosell:a}[n],artboard:"New Artboard",autoplay:!0},v=(0,r.useRive)(u).RiveComponent;return(0,s.jsxs)("div",{className:"animation-canvas",children:[(0,s.jsx)("div",{style:{width:"100%",height:200},children:(0,s.jsx)(v,{})}),(0,s.jsx)("div",{className:"text",children:c(d)})]})}},77370:function(A,e,n){function t(A,e){for(var n=[],t=[],r="",i=0;i<(null===(l=A.stocks)||void 0===l?void 0:l.length);i++){var l,a;r="";for(var s=0;s<(null===(o=A.stocks[i].extras)||void 0===o?void 0:o.length);s++){var o,d=Object.assign({},A.stocks[i].extras[s]),c=n.findIndex((function(A){return A.id==d.id}));-1==c?(d.level=s,d.up=[r],n.push(d),r+=d.id.toString()):(n[c].up.push(r),r+=d.id.toString())}for(var u={id:A.stocks[i].id,extras:r,price:A.stocks[i].price,quantity:A.stocks[i].quantity,countable_id:A.stocks[i].countable_id,discount:A.stocks[i].discount,tax:A.stocks[i].tax,total_price:A.stocks[i].total_price,bonus:A.stocks[i].bonus,addons:(null===(a=A.stock)||void 0===a?void 0:a.addons)||A.stocks[i].addons},v=0;v<(null===(f=u.addons)||void 0===f?void 0:f.length);v++)for(var f,p=0;p<(null===e||void 0===e?void 0:e.length);p++){var h,x,m;u.addons[v].addon_id===((null===(h=e[p].stock)||void 0===h||null===(x=h.product)||void 0===x?void 0:x.id)||(null===(m=e[p].product)||void 0===m?void 0:m.id))&&(u.addons[v].product.quantity=e[p].quantity)}t.push(u)}return{stock:t,extras:n}}function r(A,e,n){for(var t=""==A?[]:A.split(","),r=[],i=[],l=0;l<=t.length;l++){l-1>=0&&(i[i.length]=t[l-1].toString()),(a=e.filter((function(A){if(new Set(A.up).has(i.join("")))return A}))).length>0&&r.push(a)}l=0;if(i.length<r.length)for(;l<e.length;){var a;if(i[i.length]=r[r.length-1][0].id.toString(),0==(a=e.filter((function(A){if(new Set(A.up).has(i.join("")))return A}))).length)break;r.push(a),l++}var s=n.findIndex((function(A){return A.extras==i.join("")}));return{stock:n[s],extras:r}}n.d(e,{o:function(){return t},y:function(){return r}})},45464:function(A,e,n){n.d(e,{Z:function(){return r}});var t="data:image/jpeg;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//2Q==";function r(A){return A||t}},28939:function(A,e,n){function t(A){var e,n=null===A||void 0===A||null===(e=A.extras)||void 0===e?void 0:e.find((function(A){return"image"===A.group.type}));return n?n.value:""}n.d(e,{Z:function(){return t}})},91220:function(A,e,n){function t(A,e){var n,t=(null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title)||"pcs";if(!A)return 0;switch(null===e||void 0===e?void 0:e.position){case"after":return A+" "+t;case"before":return t+" "+A}}n.d(e,{Z:function(){return t}})},11101:function(A,e,n){var t=n(34344),r={getAll:function(A){return t.Z.get("rest/brands/paginate",{params:A})},getById:function(A,e){return t.Z.get("rest/brands/".concat(A),{params:e})}};e.Z=r},29955:function(A,e,n){var t=n(34344),r={getAll:function(A){return t.Z.get("rest/categories/paginate",{params:A})},getById:function(A,e){return t.Z.get("rest/categories/".concat(A),{params:e})},search:function(A){return t.Z.get("rest/categories/search",{params:A})}};e.Z=r},21448:function(A,e,n){var t=n(34344),r={checkCoupon:function(A){return t.Z.post("rest/coupons/check",A)},checkCashback:function(A){return t.Z.post("rest/cashback/check",A)}};e.Z=r},51934:function(A,e,n){n.r(e),n.d(e,{default:function(){return yA}});var t=n(1413),r=n(29439),i=n(47313),l=n(18197),a=n(256),s=n(59491),o=n(68197),d=n(59624),c=n(72652),u=n(74165),v=n(15861),f=n(77181),p=n(74294),h=n(66672),x=n(16031),m=n(49986),y=n(89281),Z=n(2717),j=n(73270),b=n(24511),g=n(55768),_=n(90954),w=n(58467),N=n(34491),k=n(89802),E=n(26457),O=n(46417),S=function(A){var e=A.form,n=(0,b.$)().t,t=(0,Z.I0)(),a=(0,w.s0)(),c=(0,Z.v9)((function(A){return A.order}),Z.wU).data,S=(0,Z.v9)((function(A){return A.currency}),Z.wU).currencies,I=(0,i.useState)([]),M=(0,r.Z)(I,2),Y=M[0],C=M[1],U=(0,i.useState)(!1),q=(0,r.Z)(U,2),D=q[0],B=q[1];function P(){return P=(0,v.Z)((0,u.Z)().mark((function A(e){var n;return(0,u.Z)().wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return n={search:e,perPage:10},A.abrupt("return",m.Z.search(n).then((function(A){var e=A.data;return C(e),Q(e)})));case 2:case"end":return A.stop()}}),A)}))),P.apply(this,arguments)}function T(){return(T=(0,v.Z)((0,u.Z)().mark((function A(){return(0,u.Z)().wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",E.Z.getAll({perPage:100}).then((function(A){return A.data.filter((function(A){return"cash"===A.tag||"terminal"===A.tag})).map((function(A){var e;return{label:(null===(e=A.translation)||void 0===e?void 0:e.title)||"no name",value:A.id}}))})));case 1:case"end":return A.stop()}}),A)})))).apply(this,arguments)}function Q(A){if(A)return(0,x.isArray)(A)?A.map((function(A){return{label:"".concat(A.firstname," ").concat(A.lastname||""),value:A.id}})):{label:"".concat(A.firstname," ").concat(A.lastname||""),value:A.id}}function F(){return(F=(0,v.Z)((0,u.Z)().mark((function A(e){return(0,u.Z)().wrap((function(A){for(;;)switch(A.prev=A.next){case 0:if(e){A.next=2;break}return A.abrupt("return",[]);case 2:return B(!1),A.abrupt("return",m.Z.getById(e).then((function(A){return A.data.addresses.map((function(A){return{label:A.address,value:A.id}}))})));case 4:case"end":return A.stop()}}),A)})))).apply(this,arguments)}return(0,O.jsx)(f.Z,{title:n("customer.details"),children:(0,O.jsxs)(o.Z,{gutter:12,children:[(0,O.jsx)(d.Z,{span:16,children:(0,O.jsx)(l.Z.Item,{label:n("client"),name:"user",rules:[{required:!0,message:""}],children:(0,O.jsx)(y.h,{placeholder:n("select.client"),fetchOptions:function(A){return P.apply(this,arguments)},onSelect:function(A){var n=Y.find((function(e){return e.id===A.value}));t((0,j.oM)({user:A,userUuid:n.uuid})),e.setFieldsValue({address:null}),B(!0)}})})}),(0,O.jsx)(d.Z,{span:8,children:(0,O.jsx)(l.Z.Item,{label:"add",className:"label-hidden",children:(0,O.jsx)(s.Z,{icon:(0,O.jsx)(g.Z,{}),onClick:function(){t((0,_.bL)({url:"user/add",id:"user_add",name:"User add"})),a("/user/add")},children:n("add")})})}),(0,O.jsx)(d.Z,{span:16,children:(0,O.jsx)(l.Z.Item,{label:n("address"),name:"address",rules:[{required:!0,message:""}],children:(0,O.jsx)(k.q,{fetchOptions:function(){return function(A){return F.apply(this,arguments)}(c.userUuid)},onSelect:function(A){return t((0,j.oM)({address:A}))},refetch:D,className:"w-100",placeholder:n("select.address")})})}),(0,O.jsx)(d.Z,{span:8,children:(0,O.jsx)(l.Z.Item,{label:"add",className:"label-hidden",children:(0,O.jsx)(s.Z,{icon:(0,O.jsx)(g.Z,{}),onClick:function(){c.userUuid?(t((0,_.bL)({url:"user/".concat(c.userUuid),id:"user_edit",name:"User edit"})),a("/user/".concat(c.userUuid))):N.Am.warning("Please, select client")},children:n("add")})})}),(0,O.jsx)(d.Z,{span:12,children:(0,O.jsx)(l.Z.Item,{label:n("currency"),name:"currency_id",rules:[{required:!0,message:"missing_currency"}],children:(0,O.jsx)(p.Z,{placeholder:n("select.currency"),onSelect:function(A){var e=S.find((function(e){return e.id===A}));t((0,j.dY)(e))},children:S.map((function(A,e){return(0,O.jsxs)(p.Z.Option,{value:A.id,children:[A.title," (",null===A||void 0===A?void 0:A.symbol,")"]},e)}))})})}),(0,O.jsx)(d.Z,{span:12,children:(0,O.jsx)(l.Z.Item,{label:n("payment.type"),name:"payment_type",rules:[{required:!0,message:n("missing.payment.type")}],children:(0,O.jsx)(k.q,{fetchOptions:function(){return T.apply(this,arguments)},className:"w-100",placeholder:n("select.payment.type")})})}),(0,O.jsx)(d.Z,{span:24,children:(0,O.jsx)(l.Z.Item,{label:n("note"),name:"note",children:(0,O.jsx)(h.Z,{})})})]})})},I=n(93433),M=n(4942),Y=n(99096),C=n(6289),U=n(49067),q=n(80314),D=n(70816),B=n.n(D),P=n(51988),T=function(A){var e=A.form,n=(0,b.$)().t,t=(0,Z.I0)(),a=(0,Z.v9)((function(A){return A.order}),Z.wU),s=a.orderShops,u=a.data,v=(0,Z.v9)((function(A){return A.menu.activeMenu}),Z.wU),h=v.data,x=(0,i.useState)(!1),m=(0,r.Z)(x,2),y=m[0],j=m[1];function g(A){j(!0);var e=function(A){var e=A.map((function(A,e){return(0,M.Z)({},"shops[".concat(e,"]"),A.id)}));return Object.assign.apply(Object,[{}].concat((0,I.Z)(e)))}(A);U.Z.getShopDeliveries(e).then((function(A){return t((0,_.nc)({activeMenu:v,data:A.data}))})).finally((function(){return j(!1)}))}function w(A){if(!A)return[];for(var e=[],n=B()(A.open_time,"HH:mm").hour(),t=B()(A.close_time,"HH:mm").hour(),r=n+1;r<t;r++){var i={label:B()(r,"HH").format("HH:mm"),value:B()(r,"HH").format("HH:mm")};e.push(i)}return e}return(0,i.useEffect)((function(){if(null!==h&&void 0!==h&&h.length){if(u.deliveries.length)return void e.setFieldsValue({deliveries:(A=h,n=u.deliveries,A.map((function(A){var e=n.find((function(e){return e.shop_id===A.id}));return e?{shop_id:A.id,delivery:e.delivery,delivery_date:B()(e.delivery_date),delivery_time:e.delivery_time,delivery_fee:e.delivery_fee}:{shop_id:A.id,delivery:"",delivery_date:"",delivery_time:"",delivery_fee:""}})))});e.setFieldsValue({deliveries:h.map((function(A){return{shop_id:A.id,delivery:"",delivery_date:"",delivery_time:"",delivery_fee:""}}))})}else e.setFieldsValue({deliveries:[]});var A,n}),[h]),(0,q.Z)((function(){s.length&&g(s)}),[s]),(0,O.jsxs)(f.Z,{title:n("stores"),children:[y&&(0,O.jsx)("div",{className:"loader",children:(0,O.jsx)(c.Z,{})}),(0,O.jsx)(l.Z.List,{name:"deliveries",children:function(A){return(0,O.jsx)("div",{children:A.length?A.map((function(A,e){var t,r,i,a;return(0,O.jsx)(f.Z,{title:"".concat(null===(t=h[e])||void 0===t||null===(r=t.translation)||void 0===r?void 0:r.title," ").concat(n("shop")),type:"inner",size:"small",children:(0,O.jsxs)(o.Z,{gutter:12,children:[(0,O.jsx)(d.Z,{span:24,children:(0,O.jsx)(l.Z.Item,{name:[e,"delivery"],label:n("delivery"),rules:[{required:!0,message:n("required.field")}],children:(0,O.jsx)(p.Z,{placeholder:n("select.delivery"),options:(a=null===(i=h[e])||void 0===i?void 0:i.deliveries,null!==a&&void 0!==a&&a.length?a.map((function(A){var e;return{label:null===(e=A.translation)||void 0===e?void 0:e.title,value:A.id}})):[]),labelInValue:!0})})}),(0,O.jsx)(d.Z,{span:24,children:(0,O.jsxs)(o.Z,{gutter:12,children:[(0,O.jsx)(d.Z,{span:12,children:(0,O.jsx)(l.Z.Item,{name:[e,"delivery_date"],label:n("delivery.date"),rules:[{required:!0,message:n("required.field")}],children:(0,O.jsx)(Y.Z,{className:"w-100"})})}),(0,O.jsx)(d.Z,{span:12,children:(0,O.jsx)(l.Z.Item,{label:"".concat(n("delivery.time")," (").concat(n("up.to"),")"),name:[e,"delivery_time"],rules:[{required:!0,message:n("required.field")}],children:(0,O.jsx)(p.Z,{options:w(h[e])})})}),(0,O.jsx)(d.Z,{span:12,children:(0,O.jsx)(l.Z.Item,{label:n("delivery.fee"),name:[e,"delivery_fee"],hidden:!0,children:(0,O.jsx)(C.Z,{min:0,className:"w-100"})})})]})})]})},A.key)})):(0,O.jsx)(o.Z,{children:(0,O.jsx)(d.Z,{span:24,children:(0,O.jsx)(P.Z,{id:"nosell"})})})})}})]})},Q=n(45705),F=n(11101),z=n(29955),R=n(11875),H=n(45464),J=n(82138),V=n(11829),G=n(43681),K=n(83371),L=n(62412);function W(A){var e=0,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).find((function(e){return e.shop_id===A.id}));null!==n&&void 0!==n&&n.delivery_fee&&(e=n.delivery_fee);var t=A.products.reduce((function(A,e){return A+e.total_price}),0),r=A.products.reduce((function(A,e){return A+e.tax}),0),i=A.products.reduce((function(A,e){return A+e.shop_tax}),0);return{productTax:r,shopTax:i,total:t+i+e,deliveryFee:e,orderTax:i+r}}var X=n(84695),$=n(78891),AA=n(8846),eA=n(84017),nA=n(28939),tA=n(77370),rA=n(91220);function iA(A){var e,n,a,c,u,v=A.extrasModal,f=A.setExtrasModal,p=(0,i.useState)(v.stock),h=(0,r.Z)(p,2),x=h[0],m=h[1],y=(0,i.useState)(v.quantity||v.min_qty),b=(0,r.Z)(y,2),g=b[0],_=b[1],w=(0,i.useState)([]),k=(0,r.Z)(w,2),E=k[0],S=k[1],M=(0,i.useState)([]),Y=(0,r.Z)(M,2),C=Y[0],U=Y[1],q=(0,i.useState)(null),D=(0,r.Z)(q,2),B=D[0],P=D[1],T=(0,i.useState)([]),F=(0,r.Z)(T,2),z=F[0],R=F[1],V=(0,Z.v9)((function(A){return A.order.data}),Z.wU).currency,G=l.Z.useForm(),L=(0,r.Z)(G,1)[0],W=(0,Z.I0)();(0,i.useEffect)((function(){null!==B&&void 0!==B&&B.stock&&m((0,t.Z)((0,t.Z)({},B.stock),{},{extras:z}))}),[B]),(0,i.useEffect)((function(){var A,e=(0,tA.o)(v);S(e.extras),U(e.stock),P((0,tA.y)("",e.extras,e.stock)),null===(A=(0,tA.y)("",e.extras,e.stock).extras)||void 0===A||A.forEach((function(A){R((function(e){return[].concat((0,I.Z)(e),[A[0]])}))}))}),[v]);var iA=function(A){var e,n=z.findIndex((function(e){return e.extra_group_id===A.extra_group_id})),t=z;n>-1&&(t=t.slice(0,n)),t.push(A);var r=t.map((function(A){return A.id})).join(","),i=(0,tA.y)(r,E,C);P(i),null===(e=i.extras)||void 0===e||e.forEach((function(e){var n=z.findIndex((function(n){return e[0].extra_group_id!=A.extra_group_id?n.extra_group_id===e[0].extra_group_id:n.extra_group_id===A.extra_group_id}));if(e[0].level>=A.level){var r=e[0].extra_group_id!=A.extra_group_id?e[0]:A;-1==n?t.push(r):t[n]=r}})),R(t)},lA=function(){f(!1)};return(0,O.jsx)(X.Z,{visible:!!v,title:null===(e=v.translation)||void 0===e?void 0:e.title,onCancel:lA,footer:[(0,O.jsx)(s.Z,{type:"primary",onClick:function(){return L.submit()},children:"Add"}),(0,O.jsx)(s.Z,{type:"default",onClick:lA,children:"Cancel"})],children:(0,O.jsxs)(l.Z,{form:L,layout:"vertical",onFinish:function(A){var e=(0,t.Z)((0,t.Z)({},v),{},{stock:x,quantity:g,id:x.id,img:(0,nA.Z)(x)||v.img});e.quantity>x.quantity?N.Am.warning("You cannot order more than ".concat(x.quantity)):(W((0,j.x$)(e)),f(null))},initialValues:{stock:null===(n=v.stock)||void 0===n?void 0:n.id},children:[(0,O.jsxs)(o.Z,{gutter:24,children:[(0,O.jsx)(d.Z,{span:8,children:(0,O.jsx)($.Z,{src:(0,H.Z)((0,nA.Z)(x)||v.img),alt:null===(a=v.translation)||void 0===a?void 0:a.title,height:200,style:{objectFit:"contain"}})}),(0,O.jsx)(d.Z,{span:16,children:(0,O.jsxs)(K.Z,{title:null===(c=v.translation)||void 0===c?void 0:c.title,children:[(0,O.jsxs)(K.Z.Item,{label:"Price",span:3,children:[(0,O.jsx)("div",{className:null!==x&&void 0!==x&&x.discount?"strike":"",children:(0,eA.Z)(null===x||void 0===x?void 0:x.price,V.symbol)}),null!==x&&void 0!==x&&x.discount?(0,O.jsx)("div",{className:"ml-2 font-weight-bold",children:(0,eA.Z)(null===x||void 0===x?void 0:x.total_price,V.symbol)}):""]}),(0,O.jsx)(K.Z.Item,{label:"In stock",span:3,children:(0,rA.Z)(null===x||void 0===x?void 0:x.quantity,v.unit)}),(0,O.jsx)(K.Z.Item,{label:"Tax",span:3,children:(0,eA.Z)(null===x||void 0===x?void 0:x.tax,V.symbol)})]})})]}),null===B||void 0===B||null===(u=B.extras)||void 0===u?void 0:u.map((function(A,e){return(0,O.jsx)("div",{className:"extra-group",children:(0,O.jsx)(Q.Z,{className:"extras-select",children:A.map((function(A){return"color"===A.group.type?(0,O.jsx)("span",{className:"extras-color-wrapper ".concat(z.find((function(e){return e.id===A.id}))?"selected":""),onClick:function(){return iA(A)},children:(0,O.jsx)("i",{className:"extras-color",style:{backgroundColor:A.value}})}):"text"===A.group.type?(0,O.jsx)("span",{className:"extras-text rounded ".concat(z.find((function(e){return e.id===A.id}))?"selected":""),onClick:function(){return iA(A)},children:A.value}):(0,O.jsx)("span",{className:"extras-image rounded ".concat(z.find((function(e){return e.id===A.id}))?"selected":""),onClick:function(){return iA(A)},children:(0,O.jsx)("img",{src:(0,H.Z)(A.value),alt:"extra"})})}))},"extra-group"+e)})})),(0,O.jsx)(o.Z,{gutter:12,className:"mt-3",children:(0,O.jsx)(d.Z,{span:24,children:(0,O.jsxs)(Q.Z,{children:[(0,O.jsx)(s.Z,{type:"primary",icon:(0,O.jsx)(AA.Z,{}),onClick:function(){1!==g&&(g<=v.min_qty||_((function(A){return A-1})))}}),g,(0,O.jsx)(s.Z,{type:"primary",icon:(0,O.jsx)(J.Z,{}),onClick:function(){g!==(null===x||void 0===x?void 0:x.quantity)&&g!==v.max_qty&&_((function(A){return A+1}))}})]})})})]})})}var lA=n(95882),aA=n(21448);function sA(A,e){var n=A.reduce((function(A,e){return A+e.delivery_fee}),0),t=e;return n&&(t+=n),t}function oA(){var A,e,n,l,a=(0,b.$)().t,u=(0,Z.I0)(),v=(0,w.s0)(),p=(0,Z.v9)((function(A){return A.order}),Z.wU),x=p.orderItems,m=p.data,y=p.orderShops,g=p.total,N=p.coupons,k=(0,i.useState)(!1),E=(0,r.Z)(k,2),S=E[0],Y=E[1],C=(0,i.useState)(null),U=(0,r.Z)(C,2),D=U[0],B=U[1],P=(0,i.useState)(null),T=(0,r.Z)(P,2),F=T[0],z=T[1];(0,q.Z)((function(){u((0,lA.MW)({perPage:12,currency_id:m.currency.id}))}),[m.currency]),(0,q.Z)((function(){x.length?function(){var A=function(A){var e=A.map((function(A,e){var n;return n={},(0,M.Z)(n,"products[".concat(e,"][id]"),A.id),(0,M.Z)(n,"products[".concat(e,"][quantity]"),A.quantity),n}));return Object.assign.apply(Object,[{}].concat((0,I.Z)(e)))}(x),e=(0,t.Z)({currency_id:m.currency.id},A);Y(!0),L.Z.calculate(e).then((function(A){var e=A.data,n=e.products.map((function(A){return(0,t.Z)((0,t.Z)({},x.find((function(e){return e.id===A.id}))),A)}));u((0,j.rU)(n));var r={product_total:e.product_total,product_tax:e.product_tax,order_tax:e.order_tax,order_total:e.order_total};u((0,j.rU)(r))})).finally((function(){return Y(!1)}))}():u((0,j.pX)())}),[x,m.currency]);return(0,O.jsxs)("div",{className:"order-items",children:[S&&(0,O.jsx)("div",{className:"loader",children:(0,O.jsx)(c.Z,{})}),(0,O.jsxs)(o.Z,{gutter:24,className:"mt-4",children:[(0,O.jsx)(d.Z,{span:24,children:y.map((function(A){var e,n,t,r,i,l,o;return(0,O.jsxs)(f.Z,{className:"shop-card",children:[A.products.map((function(A){var e,n;return(0,O.jsxs)(f.Z,{className:"position-relative",children:[(0,O.jsx)(V.Z,{className:"close-order",onClick:function(){return u((0,j.Sg)(A))}}),(0,O.jsxs)(Q.Z,{className:"mr-3",children:[(0,O.jsx)("div",{className:"order-item-img",children:(0,O.jsx)("img",{src:(0,H.Z)(A.img),alt:null===(e=A.translation)||void 0===e?void 0:e.title})}),(0,O.jsx)(R.Z,{title:(0,O.jsxs)("div",{children:[(0,O.jsx)("div",{className:"cursor-pointer white-space-wrap",onClick:function(){return function(A){u((0,_.bL)({id:"product-".concat(A.uuid),url:"seller/product/".concat(A.uuid),name:"Product edit"})),v("/seller/product/".concat(A.uuid))}(A)},children:null===(n=A.translation)||void 0===n?void 0:n.title}),(0,O.jsx)("div",{className:"product-price",children:(0,eA.Z)(A.price_without_tax,m.currency.symbol)})]}),description:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{children:["Quantity: ",A.quantity]}),(0,O.jsx)(Q.Z,{className:"mt-2",children:A.stock.extras.map((function(A){return"color"===A.group.type?(0,O.jsx)("span",{className:"extras-color",style:{backgroundColor:A.value}}):"text"===A.group.type?(0,O.jsx)("span",{className:"extras-text rounded",children:A.value}):(0,O.jsx)("img",{src:(0,H.Z)(A.value),alt:"extra",className:"extras-image rounded"})}))})]})})]})]},A.id)})),(0,O.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,O.jsxs)(Q.Z,{children:[(0,O.jsx)("img",{src:(0,H.Z)(A.logo_img),alt:"shop logo",width:40,className:"rounded-circle"}),(0,O.jsx)("div",{children:null===(e=A.translation)||void 0===e?void 0:e.title})]}),(0,O.jsxs)(Q.Z,{children:[(0,O.jsx)(h.Z,{placeholder:a("coupon"),addonAfter:null!==(n=N.find((function(e){return e.shop_id===A.id})))&&void 0!==n&&n.verified?(0,O.jsx)(G.Z,{style:{color:"#18a695"}}):null,defaultValue:null===(t=N.find((function(e){return e.shop_id===A.id})))||void 0===t?void 0:t.coupon,onBlur:function(e){var n;return u((0,j.cp)({coupon:e.target.value,user_id:null===(n=m.user)||void 0===n?void 0:n.value,shop_id:A.id,verified:!1}))}}),(0,O.jsx)(s.Z,{onClick:function(){return function(A){var e=N.find((function(e){return e.shop_id===A}));e&&(z(A),aA.Z.checkCoupon(e).then((function(e){return u((0,j.NS)({shop_id:A,price:e.data.price,verified:!0}))})).catch((function(){return u((0,j.NS)({shop_id:A,price:0,verified:!1}))})).finally((function(){return z(null)})))}(A.id)},loading:F===A.id,children:a("check.coupon")})]}),(0,O.jsxs)("div",{className:"mt-2 text-right shop-total",children:[(0,O.jsxs)(Q.Z,{children:[(0,O.jsx)("p",{className:"font-weight-bold",children:"Product tax:"}),(0,O.jsx)("p",{children:(0,eA.Z)(W(A).productTax,null===(r=m.currency)||void 0===r?void 0:r.symbol)})]}),(0,O.jsx)("div",{}),(0,O.jsxs)(Q.Z,{children:[(0,O.jsx)("p",{className:"font-weight-bold",children:"Shop tax:"}),(0,O.jsx)("p",{children:(0,eA.Z)(W(A).shopTax,null===(i=m.currency)||void 0===i?void 0:i.symbol)})]}),(0,O.jsx)("div",{}),(0,O.jsxs)(Q.Z,{children:[(0,O.jsx)("p",{className:"font-weight-bold",children:"Delivery fee:"}),(0,O.jsx)("p",{children:(0,eA.Z)(W(A,m.deliveries).deliveryFee,null===(l=m.currency)||void 0===l?void 0:l.symbol)})]}),(0,O.jsx)("div",{}),(0,O.jsxs)(Q.Z,{children:[(0,O.jsx)("p",{className:"font-weight-bold",children:"Total:"}),(0,O.jsx)("p",{children:(0,eA.Z)(W(A,m.deliveries).total,null===(o=m.currency)||void 0===o?void 0:o.symbol)})]})]})]})]},A.uuid)}))}),(0,O.jsx)(d.Z,{span:24,children:(0,O.jsx)("div",{className:"order-info",children:(0,O.jsxs)(K.Z,{bordered:!0,className:"order-info-container",children:[(0,O.jsx)(K.Z.Item,{label:"Product total",children:(0,eA.Z)(g.product_total,null===(A=m.currency)||void 0===A?void 0:A.symbol)}),(0,O.jsx)(K.Z.Item,{label:"Product tax",children:(0,eA.Z)(g.product_tax,null===(e=m.currency)||void 0===e?void 0:e.symbol)}),(0,O.jsx)(K.Z.Item,{label:"Shop tax",children:(0,eA.Z)(g.order_tax,null===(n=m.currency)||void 0===n?void 0:n.symbol)}),(0,O.jsx)(K.Z.Item,{label:"Order total",labelStyle:{fontWeight:700},children:(0,O.jsx)("span",{style:{fontWeight:700},children:(0,eA.Z)(sA(m.deliveries,g.order_total),null===(l=m.currency)||void 0===l?void 0:l.symbol)})})]})})})]}),D&&(0,O.jsx)(iA,{extrasModal:D,setExtrasModal:B})]})}var dA=n(41481),cA=function(A){var e=A.form,n=(0,i.useState)(null),t=(0,r.Z)(n,2),l=t[0],a=t[1],s=(0,i.useState)(null),p=(0,r.Z)(s,2),h=p[0],x=p[1],m=(0,i.useState)(null),j=(0,r.Z)(m,2),b=j[0],g=j[1],_=(0,i.useState)(null),w=(0,r.Z)(_,2),k=w[0],E=w[1],S=(0,Z.I0)(),I=(0,Z.v9)((function(A){return A.order}),Z.wU).data,M=(0,Z.v9)((function(A){return A.product}),Z.wU),Y=M.products,C=M.loading;function U(){return U=(0,v.Z)((0,u.Z)().mark((function A(e){return(0,u.Z)().wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",F.Z.search(e).then((function(A){return A.data.map((function(A){return{label:A.title,value:A.id}}))})));case 1:case"end":return A.stop()}}),A)}))),U.apply(this,arguments)}function D(){return D=(0,v.Z)((0,u.Z)().mark((function A(e){var n;return(0,u.Z)().wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return n={search:e},A.abrupt("return",z.Z.search(n).then((function(A){return A.data.map((function(A){var e;return{label:null===(e=A.translation)||void 0===e?void 0:e.title,value:A.id}}))})));case 2:case"end":return A.stop()}}),A)}))),D.apply(this,arguments)}(0,q.Z)((function(){var A={perPage:10,page:1,brand_id:null===l||void 0===l?void 0:l.value,category_id:null===h||void 0===h?void 0:h.value,search:b};S((0,lA.MW)(A))}),[l,h,b]);return(0,O.jsxs)(f.Z,{title:"Order details",extra:(0,O.jsxs)(Q.Z,{children:[(0,O.jsx)(y.h,{placeholder:"Select category",fetchOptions:function(A){return D.apply(this,arguments)},style:{minWidth:150},onChange:function(A){return x(A)},value:h}),(0,O.jsx)(y.h,{placeholder:"Select brand",fetchOptions:function(A){return U.apply(this,arguments)},style:{minWidth:150},onChange:function(A){return a(A)},value:l})]}),children:[(0,O.jsx)("div",{className:"d-flex justify-content-end mb-4",children:(0,O.jsx)(dA.Z,{placeholder:"Search...",handleChange:g})}),(0,O.jsxs)("div",{className:"products-row order-items",children:[Y.length?Y.map((function(A){var e,n,t;return(0,O.jsxs)(f.Z,{className:"products-col",cover:(0,O.jsx)("img",{alt:null===(e=A.translation)||void 0===e?void 0:e.title,src:(0,H.Z)(A.img)}),onClick:function(){return function(A){I.currency?E(A):N.Am.warning("Please, select currency")}(A)},children:[(0,O.jsx)(R.Z,{title:null===(n=A.translation)||void 0===n?void 0:n.title,description:null===(t=A.stock)||void 0===t?void 0:t.price}),(0,O.jsx)("div",{className:"preview",children:(0,O.jsx)(J.Z,{})})]},A.id)})):(0,O.jsx)(o.Z,{children:(0,O.jsx)(d.Z,{span:24,children:(0,O.jsx)(P.Z,{id:"nosell"})})}),C&&(0,O.jsx)("div",{className:"loader",children:(0,O.jsx)(c.Z,{})})]}),k&&(0,O.jsx)(iA,{extrasModal:k,setExtrasModal:E}),(0,O.jsx)(oA,{form:e})]})},uA=n(78508),vA=n(2337),fA=n(31774),pA=function(A){var e,n,l,a,o,d,u,v,p,h,x,m,y,Z,j,g,_=A.orderId,w=A.handleClose,N=(0,b.$)().t,k=(0,i.useState)(!1),E=(0,r.Z)(k,2),S=E[0],I=E[1],M=(0,i.useState)(null),Y=(0,r.Z)(M,2),C=Y[0],U=Y[1],q=(0,i.useState)([]),D=(0,r.Z)(q,2),P=D[0],T=D[1];return(0,i.useEffect)((function(){_&&(I(!0),L.Z.getById(_).then((function(A){U(A.data);var e=A.data.details.map((function(A){return A.order_stocks.map((function(e){return(0,t.Z)((0,t.Z)((0,t.Z)({},e.stock),e),{},{shop_id:A.shop_id})}))})).flat();T(e)})).finally((function(){return I(!1)})))}),[_]),(0,O.jsx)(X.Z,{visible:!!_,title:"Order created successfully",onOk:w,onCancel:w,footer:[(0,O.jsx)(s.Z,{onClick:w,children:N("back")}),(0,O.jsxs)(s.Z,{type:"primary",onClick:function(){return window.print()},children:[(0,O.jsx)(fA.Z,{type:"printer"}),(0,O.jsx)("span",{className:"ml-1",children:N("print")})]})],style:{minWidth:"80vw"},children:(0,O.jsx)("div",{className:"py-4",children:S?(0,O.jsx)("div",{className:"w-100 text-center",children:(0,O.jsx)(c.Z,{})}):(0,O.jsxs)(f.Z,{children:[(0,O.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[(0,O.jsxs)("div",{children:[(0,O.jsxs)("h2",{className:"mb-1 font-weight-semibold",children:[N("invoice")," #",null===C||void 0===C?void 0:C.id]}),(0,O.jsx)("p",{children:B()(null===C||void 0===C?void 0:C.created_at).format("DD/M/YYYY")}),(0,O.jsx)("address",{children:(0,O.jsxs)("p",{children:[(0,O.jsxs)("span",{children:[N("delivery.type"),":"," ",null===C||void 0===C||null===(e=C.details[0])||void 0===e||null===(n=e.delivery_type)||void 0===n||null===(l=n.translation)||void 0===l?void 0:l.title]}),(0,O.jsx)("br",{}),(0,O.jsxs)("span",{children:[N("delivery.address"),":"," ",null===C||void 0===C||null===(a=C.details[0])||void 0===a||null===(o=a.delivery_address)||void 0===o?void 0:o.address]}),(0,O.jsx)("br",{}),(0,O.jsxs)("span",{children:[N("delivery.date"),": ",null===C||void 0===C||null===(d=C.details[0])||void 0===d?void 0:d.delivery_date," ",null===C||void 0===C||null===(u=C.details[0])||void 0===u?void 0:u.delivery_time]}),(0,O.jsx)("br",{}),(0,O.jsxs)("span",{children:[N("note"),": ",null===C||void 0===C?void 0:C.note]})]})})]}),(0,O.jsx)("address",{children:(0,O.jsxs)("p",{children:[(0,O.jsxs)("span",{className:"font-weight-semibold text-dark font-size-md",children:[null===C||void 0===C||null===(v=C.user)||void 0===v?void 0:v.firstname," ",null===C||void 0===C||null===(p=C.user)||void 0===p?void 0:p.lastname]}),(0,O.jsx)("br",{}),(0,O.jsxs)("span",{children:[N("phone"),": ",null===C||void 0===C||null===(h=C.user)||void 0===h?void 0:h.phone]}),(0,O.jsx)("br",{}),(0,O.jsxs)("span",{children:[N("email"),": ",null===C||void 0===C||null===(x=C.user)||void 0===x?void 0:x.email]})]})})]}),(0,O.jsxs)("div",{className:"mt-4",children:[(0,O.jsxs)(uA.Z,{scroll:{x:!0},dataSource:P,pagination:!1,className:"mb-5",children:[(0,O.jsx)(vA.Z,{title:"No.",dataIndex:"id"},"id"),(0,O.jsx)(vA.Z,{title:"Product",dataIndex:"product",render:function(A){var e;return null===A||void 0===A||null===(e=A.translation)||void 0===e?void 0:e.title}},"product"),(0,O.jsx)(vA.Z,{title:N("quantity"),dataIndex:"quantity"},"quantity"),(0,O.jsx)(vA.Z,{title:N("discount"),dataIndex:"discount",render:function(A){var e;return(0,eA.Z)(A,null===C||void 0===C||null===(e=C.currency)||void 0===e?void 0:e.symbol)}},"discount"),(0,O.jsx)(vA.Z,{title:N("price"),dataIndex:"total_price",render:function(A){var e;return(0,eA.Z)(A,null===C||void 0===C||null===(e=C.currency)||void 0===e?void 0:e.symbol)}},"total_price")]}),(0,O.jsx)("div",{className:"d-flex justify-content-end",children:(0,O.jsxs)("div",{className:"text-right ",children:[(0,O.jsxs)("div",{className:"border-bottom",children:[(0,O.jsxs)("p",{className:"mb-2",children:[(0,O.jsxs)("span",{children:[N("sub-total.amount"),": "]}),(0,eA.Z)(null===C||void 0===C?void 0:C.details.reduce((function(A,e){return A+e.price}),0),null===C||void 0===C||null===(m=C.currency)||void 0===m?void 0:m.symbol)]}),(0,O.jsxs)("p",{children:[N("delivery.price"),":"," ",(0,eA.Z)(null===C||void 0===C?void 0:C.details.reduce((function(A,e){return A+e.delivery_fee}),0),null===C||void 0===C||null===(y=C.currency)||void 0===y?void 0:y.symbol)]}),(0,O.jsxs)("p",{children:[N("tax"),":"," ",(0,eA.Z)(null===C||void 0===C?void 0:C.details.reduce((function(A,e){return A+e.tax}),0),null===C||void 0===C||null===(Z=C.currency)||void 0===Z?void 0:Z.symbol)]}),(0,O.jsxs)("p",{children:[N("coupon"),":"," ",(0,eA.Z)(null===C||void 0===C?void 0:C.details.reduce((function(A,e){var n;return A+(null===(n=e.coupon)||void 0===n?void 0:n.price)}),0),null===C||void 0===C||null===(j=C.currency)||void 0===j?void 0:j.symbol)]})]}),(0,O.jsxs)("h2",{className:"font-weight-semibold mt-3",children:[(0,O.jsxs)("span",{className:"mr-1",children:[N("grand.total"),": "]}),(0,eA.Z)(null===C||void 0===C?void 0:C.price,null===C||void 0===C||null===(g=C.currency)||void 0===g?void 0:g.symbol)]})]})})]})]})})})},hA=n(7370),xA=n(22054),mA=n(1003);function yA(){var A=(0,b.$)().t,e=l.Z.useForm(),n=(0,r.Z)(e,1)[0],u=(0,Z.I0)(),v=(0,w.UO)().id,f=(0,w.s0)(),p=(0,i.useState)(!1),h=(0,r.Z)(p,2),x=h[0],m=h[1],y=(0,i.useState)(null),g=(0,r.Z)(y,2),N=g[0],k=g[1],E=(0,i.useState)(!1),I=(0,r.Z)(E,2),M=I[0],Y=I[1],C=(0,Z.v9)((function(A){return A.order}),Z.wU),U=C.orderShops,q=C.data,D=C.total,P=C.coupons,Q=(0,Z.v9)((function(A){return A.currency}),Z.wU).currencies,F=(0,Z.v9)((function(A){return A.menu}),Z.wU).activeMenu;function z(A){return{label:A.firstname+" "+(A.lastname||""),value:A.id}}function R(A){var e;return A?{label:null===(e=A.translation)||void 0===e?void 0:e.title,value:A.id}:null}(0,i.useEffect)((function(){return function(){var A=n.getFieldsValue(!0),e=(0,t.Z)((0,t.Z)({},A),{},{deliveries:A.deliveries.map((function(A){return(0,t.Z)((0,t.Z)({},A),{},{delivery_date:A.delivery_date?B()(A.delivery_date).format("YYYY-MM-DD"):void 0})}))});u((0,j.oM)(e))}}),[]),(0,i.useEffect)((function(){F.refetch&&(Y(!0),hA.Z.getById(v).then((function(A){var e,r,i=A.data;u((0,j.dY)(i.currency)),u((0,j.oM)({deliveries:(r=i.details,r.map((function(A){return{delivery:{label:A.delivery_type.translation.title,value:A.delivery_type.id},delivery_date:A.delivery_date,delivery_time:A.delivery_time,shop_id:A.delivery_type.shop_id,delivery_fee:A.delivery_fee}})))}));var l,a=i.details.flatMap((function(A){return A.order_stocks.map((function(A){return(0,t.Z)((0,t.Z)((0,t.Z)({},A.stock.product),A.stock),{},{quantity:A.quantity,stock:A.stock,img:(0,nA.Z)(A.stock)||A.stock.product.img,product:void 0})}))}));u((0,j.B4)(a)),n.setFieldsValue({user:z(i.user),currency_id:i.currency.id,address:(l=i.details[0].delivery_address,l?{label:l.address,value:l.id}:null),payment_type:R(null===(e=i.details[0].transaction)||void 0===e?void 0:e.payment_system),note:i.note})})).finally((function(){Y(!1),u((0,_.A_)(F))})))}),[F.refetch]);var H=function(A){var e={payment_sys_id:A.payment_type};m(!0),hA.Z.update(v,A).then((function(A){return function(A,e){mA.Z.create(A,e).then((function(A){k(A.data.id),u((0,j.bn)())})).finally((function(){return m(!1)}))}(A.data.id,e)})).catch((function(){return m(!1)}))};return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(a.Z,{title:A("edit.order"),extra:(0,O.jsx)(s.Z,{type:"primary",loading:x,onClick:function(){return n.submit()},children:A("save")})}),(0,O.jsxs)(l.Z,{name:"order-form",form:n,layout:"vertical",onFinish:function(A){var e,n,r=A.deliveries.map((function(e){return{delivery_type_id:e.delivery.value,shop_id:e.shop_id,delivery_address_id:A.address.value,delivery_date:B()(e.delivery_date).format("YYYY-MM-DD"),delivery_time:e.delivery_time,delivery_fee:F.data.find((function(A){return A.id===e.shop_id})).deliveries.find((function(A){return A.id===e.delivery.value})).price}})),i=r.reduce((function(A,e){return A+e.delivery_fee}),0),l=U.map((function(A){var e;return(0,t.Z)((0,t.Z)({},r.find((function(e){return e.shop_id===A.id}))),{},{tax:W(A).shopTax,coupon:null===(e=P.find((function(e){return e.shop_id===A.id})))||void 0===e?void 0:e.coupon,products:A.products.map((function(A){return{id:A.id,price:A.price,qty:A.qty,tax:A.tax,discount:A.discount,total_price:A.total_price}}))})})),a=i+D.order_total,s={shops:l,user_id:null===(e=A.user)||void 0===e?void 0:e.value,total:a,currency_id:A.currency_id,rate:null===(n=Q.find((function(e){return e.id===A.currency_id})))||void 0===n?void 0:n.rate,payment_type:A.payment_type.value,note:A.note};H(s)},className:"order-add",initialValues:{user:q.user||null,address:q.address||null,currency_id:q.currency.id,payment_type:q.payment_type||null,deliveries:q.deliveries.map((function(A){return(0,t.Z)((0,t.Z)({},A),{},{delivery_date:B()(A.delivery_date)})})),note:q.note},children:[(0,O.jsxs)(o.Z,{gutter:24,hidden:M,children:[(0,O.jsx)(d.Z,{span:16,children:(0,O.jsx)(cA,{form:n})}),(0,O.jsxs)(d.Z,{span:8,children:[(0,O.jsx)(S,{form:n}),(0,O.jsx)(T,{form:n})]})]}),M&&(0,O.jsx)("div",{className:"loader",children:(0,O.jsx)(c.Z,{})})]}),N?(0,O.jsx)(pA,{orderId:N,handleClose:function(){k(null);var A="orders";u((0,_.ph)((0,t.Z)((0,t.Z)({},F),{},{nextUrl:A}))),f("/".concat(A)),u((0,xA.AU)())}}):""]})}},8846:function(A,e,n){n.d(e,{Z:function(){return s}});var t=n(1413),r=n(47313),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"},l=n(17469),a=function(A,e){return r.createElement(l.Z,(0,t.Z)((0,t.Z)({},A),{},{ref:e,icon:i}))};a.displayName="MinusOutlined";var s=r.forwardRef(a)},97484:function(A,e,n){var t=n(87462),r=n(47313),i=n(49242),l=function(A,e){var n={};for(var t in A)Object.prototype.hasOwnProperty.call(A,t)&&e.indexOf(t)<0&&(n[t]=A[t]);if(null!=A&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(t=Object.getOwnPropertySymbols(A);r<t.length;r++)e.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(A,t[r])&&(n[t[r]]=A[t[r]])}return n},a={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},s=r.forwardRef((function(A,e){var n=A.style,s=A.noStyle,o=A.disabled,d=l(A,["style","noStyle","disabled"]),c={};return s||(c=(0,t.Z)({},a)),o&&(c.pointerEvents="none"),c=(0,t.Z)((0,t.Z)({},c),n),r.createElement("div",(0,t.Z)({role:"button",tabIndex:0,ref:e},d,{onKeyDown:function(A){A.keyCode===i.Z.ENTER&&A.preventDefault()},onKeyUp:function(e){var n=e.keyCode,t=A.onClick;n===i.Z.ENTER&&t&&t()},style:c}))}));e.Z=s},11875:function(A,e,n){var t=n(64836),r=n(18698);e.Z=void 0;var i=t(n(10434)),l=function(A,e){if(!e&&A&&A.__esModule)return A;if(null===A||"object"!==r(A)&&"function"!==typeof A)return{default:A};var n=o(e);if(n&&n.has(A))return n.get(A);var t={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in A)if("default"!==l&&Object.prototype.hasOwnProperty.call(A,l)){var a=i?Object.getOwnPropertyDescriptor(A,l):null;a&&(a.get||a.set)?Object.defineProperty(t,l,a):t[l]=A[l]}t.default=A,n&&n.set(A,t);return t}(n(47313)),a=t(n(46123)),s=n(38575);function o(A){if("function"!==typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(o=function(A){return A?n:e})(A)}var d=function(A,e){var n={};for(var t in A)Object.prototype.hasOwnProperty.call(A,t)&&e.indexOf(t)<0&&(n[t]=A[t]);if(null!=A&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(t=Object.getOwnPropertySymbols(A);r<t.length;r++)e.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(A,t[r])&&(n[t[r]]=A[t[r]])}return n},c=function(A){return l.createElement(s.ConfigConsumer,null,(function(e){var n=e.getPrefixCls,t=A.prefixCls,r=A.className,s=A.avatar,o=A.title,c=A.description,u=d(A,["prefixCls","className","avatar","title","description"]),v=n("card",t),f=(0,a.default)("".concat(v,"-meta"),r),p=s?l.createElement("div",{className:"".concat(v,"-meta-avatar")},s):null,h=o?l.createElement("div",{className:"".concat(v,"-meta-title")},o):null,x=c?l.createElement("div",{className:"".concat(v,"-meta-description")},c):null,m=h||x?l.createElement("div",{className:"".concat(v,"-meta-detail")},h,x):null;return l.createElement("div",(0,i.default)({},u,{className:f}),p,m)}))};e.Z=c},2337:function(A,e){e.Z=void 0;var n=function(A){return null};e.Z=n}}]);