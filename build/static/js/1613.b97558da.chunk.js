"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[1613],{31613:function(e,n,t){t.r(n);var a=t(1413),r=t(29439),s=t(47313),i=t(58467),u=t(34491),l=t(18197),d=t(77181),c=t(68197),o=t(59624),f=t(66672),m=t(99096),h=t(59491),g=t(2717),Z=t(90954),b=t(24511),p=t(7004),v=t(70816),x=t.n(v),j=t(71274),y=t(18929),_=t(38758),w=t(40931),q=t(89281),D=t(46417);n.default=function(){var e=(0,b.$)().t,n=(0,g.v9)((function(e){return e.menu}),g.wU).activeMenu,t=(0,g.I0)(),v=l.Z.useForm(),N=(0,r.Z)(v,1)[0],F=(0,i.s0)(),Y=(0,s.useState)(!1),I=(0,r.Z)(Y,2),M=I[0],E=I[1],V=(0,s.useState)(!1),k=(0,r.Z)(V,2),C=(k[0],k[1]),U=(0,s.useState)([]),A=(0,r.Z)(U,2),P=(A[0],A[1]),S=(0,g.v9)((function(e){return e.formLang}),g.wU),H=S.defaultLang,L=S.languages;(0,s.useEffect)((function(){return function(){var e=N.getFieldsValue(!0);t((0,Z.nc)({activeMenu:n,data:e}))}}),[]);(0,s.useEffect)((function(){C(!0),w.Z.getAll().then((function(e){var n=e.data.map((function(e){var n,t;return{label:(null===(n=e.user)||void 0===n?void 0:n.firstname)+" "+(null===(t=e.user)||void 0===t?void 0:t.lastname),value:e.user_id}}));P(n)})).finally((function(){return C(!1)}))}),[]);return(0,D.jsx)(d.Z,{title:e("add.subscriber"),className:"h-100",children:(0,D.jsxs)(l.Z,{name:"subscriber-add",layout:"vertical",onFinish:function(r){var s=(0,a.Z)((0,a.Z)({},r),{},{type:"subscribe",email_setting_id:r.email_setting_id.value,send_to:x()(r.send_to).format("YYYY-MM-DD HH:mm:ss")});E(!0);var i="message/subscriber";j.Z.create(s).then((function(){u.Am.success(e("successfully.created")),t((0,Z.ph)((0,a.Z)((0,a.Z)({},n),{},{nextUrl:i}))),F("/".concat(i)),t((0,y.F)())})).finally((function(){return E(!1)}))},form:N,initialValues:(0,a.Z)((0,a.Z)({type:"order"},n.data),function(){var e=n.data;if(null===e||void 0===e||!e.send_to)return e;var t=e.send_to;return(0,a.Z)((0,a.Z)({},e),{},{send_to:x()(t,"YYYY-MM-DD")})}()),className:"d-flex flex-column h-100",children:[(0,D.jsxs)(c.Z,{gutter:12,children:[(0,D.jsx)(o.Z,{span:12,children:(0,D.jsx)(l.Z.Item,{label:e("subject"),name:"subject",rules:[{required:!0,message:e("required")}],children:(0,D.jsx)(f.Z,{})})}),(0,D.jsx)(o.Z,{span:12,children:(0,D.jsx)(l.Z.Item,{label:e("email.setting.id"),name:"email_setting_id",rules:[{required:!0,message:e("required")}],children:(0,D.jsx)(q.h,{fetchOptions:function(){return _.Z.get().then((function(e){return e.data.map((function(e){return{label:e.host,value:e.id}}))}))},className:"w-100",placeholder:e("email.setting.id")})})}),(0,D.jsx)(o.Z,{span:24,children:(0,D.jsx)(p.Z,{languages:L,form:N,lang:H})}),(0,D.jsx)(o.Z,{span:12,children:(0,D.jsx)(l.Z.Item,{label:e("alt.body"),name:"alt_body",rules:[{required:!0,message:e("required")}],children:(0,D.jsx)(f.Z,{})})}),(0,D.jsx)(o.Z,{span:6,children:(0,D.jsx)(l.Z.Item,{label:e("send.to"),name:"send_to",rules:[{required:!0,message:e("required")}],children:(0,D.jsx)(m.Z,{showTime:!0,className:"w-100",disabledDate:function(e){return x()().add(-1,"days")>=e}})})})]}),(0,D.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,D.jsx)("div",{className:"pb-5",children:(0,D.jsx)(h.Z,{type:"primary",htmlType:"submit",loading:M,children:e("send")})})})]})})}},7004:function(e,n,t){t.d(n,{Z:function(){return o}});t(47313);var a=t(18197),r=t(24511),s=t(68144),i=t(76733),u=t.n(i),l=t(97421),d=t(36104),c=t(46417);function o(e){var n=e.form,t=(e.lang,e.languages,(0,r.$)().t);return(0,c.jsx)("div",{className:"textEditor",children:(0,c.jsx)(a.Z.Item,{label:t("newsletter.content"),name:"body",valuePropName:"data",getValueFromEvent:function(e,n){return n.getData()},rules:[{required:!0,message:t("required")}],className:"description-editor",children:(0,c.jsx)(s.CKEditor,{editor:u(),config:{extraPlugins:[function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return function(e){return{upload:function(){return new Promise((function(n,t){var a=new FormData;e.file.then((function(e){a.append("image",e),a.append("type","blogs"),d.Z.upload(a).then((function(e){var t=e.data;n({default:"".concat(l.bV+t.title)})})).catch((function(e){t(e)}))}))}))}}}(e)}}]},onChange:function(e,n){n.getData()},onBlur:function(e,t){var a=t.getData();n.setFieldsValue({body:a})}})})})}}}]);