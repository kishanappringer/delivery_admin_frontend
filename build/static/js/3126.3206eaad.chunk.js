"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[3126],{83126:function(e,n,t){t.r(n),t.d(n,{default:function(){return F}});var i=t(4942),a=t(93433),d=t(1413),l=t(29439),r=t(47313),o=t(99096),s=t(73591),u=t(66204),c=t(59491),v=t(45705),f=t(77181),h=t(78508),x=t(58467),Z=t(12019),m=t(31741),p=t(47515),j=t(6986),y=t(2717),g=t(90954),_=t(24511),w=t(80314),k=t(22054),C=t(13945),S=t(41481),b=t(84017),Y=t(7920),M=t(24077),I=t(53233),D=t(5958),P=t(80355),U=t(24391),A=t(34491),K=t(55940),O=t(7370),z=t(74580),N=t(69658),R=t(97421),T=t(51282),V=t(50402),E=t(70816),L=t.n(E),$=t(46417),q=o.Z.RangePicker,B=s.Z.TabPane;function F(){var e,n,t=(0,y.I0)(),o=(0,x.s0)(),E=(0,_.$)().t,F=(0,y.v9)((function(e){return e.currency}),y.wU).defaultCurrency,G=(0,r.useState)(null),H=(0,l.Z)(G,2),J=H[0],Q=H[1],W=(0,r.useState)(null),X=(0,l.Z)(W,2),ee=X[0],ne=X[1],te=(0,r.useState)(null),ie=(0,l.Z)(te,2),ae=ie[0],de=ie[1],le=(0,r.useState)(null),re=(0,l.Z)(le,2),oe=re[0],se=re[1],ue=(0,x.UO)().id,ce=[{id:7,name:"all"},{id:3,name:"ready"},{id:4,name:"on_a_way"},{id:5,name:"delivered"},{id:6,name:"canceled"}],ve=(0,r.useState)([{title:E("id"),is_show:!0,dataIndex:"id",key:"id",sorter:!0},{title:E("client"),is_show:!0,dataIndex:"user",key:"user",render:function(e){return(0,$.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})}},{title:E("number.of.products"),is_show:!0,dataIndex:"order_details_count",key:"order_details_count",render:function(e){return(0,$.jsxs)("div",{className:"text-lowercase",children:[e||0," ",E("products")]})}},{title:E("status"),is_show:!0,dataIndex:"status",key:"status",render:function(e,n){return(0,$.jsxs)("div",{children:["new"===e?(0,$.jsx)(u.Z,{color:"blue",children:E(e)}):"canceled"===e?(0,$.jsx)(u.Z,{color:"error",children:E(e)}):(0,$.jsx)(u.Z,{color:"cyan",children:E(e)}),"delivered"!==e&&"canceled"!==e?(0,$.jsx)(Z.Z,{onClick:function(){return Q(n)}}):""]})}},{title:E("deliveryman"),is_show:!0,dataIndex:"deliveryman",key:"deliveryman",render:function(e,n){return(0,$.jsx)("div",{children:"ready"===n.status&&"pickup"!==n.delivery_type?(0,$.jsx)(c.Z,{type:"link",onClick:function(){return se(n)},children:(0,$.jsxs)(v.Z,{children:[e?"".concat(e.firstname," ").concat(e.lastname):E("add.deliveryman"),(0,$.jsx)(Z.Z,{})]})}):(0,$.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})})}},{title:E("amount"),is_show:!0,dataIndex:"total_price",key:"total_price",render:function(e){return(0,b.Z)(e,F.symbol)}},{title:E("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:function(e){var n;return E(null===e||void 0===e||null===(n=e.payment_system)||void 0===n?void 0:n.tag)||"-"}},{title:E("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at"},{title:E("options"),is_show:!0,key:"options",render:function(e,n){return(0,$.jsxs)(v.Z,{children:[(0,$.jsx)(c.Z,{icon:(0,$.jsx)(D.Y4r,{}),onClick:function(){return ne(n.id)}}),(0,$.jsx)(c.Z,{icon:(0,$.jsx)(m.Z,{}),onClick:function(){return function(e){t((0,g.bL)({url:"order/details/".concat(e.id),id:"order_details",name:E("order.details")})),o("/order/details/".concat(e.id))}(n)}}),(0,$.jsx)(K.Z,{icon:(0,$.jsx)(p.Z,{}),onClick:function(){Ce([n.id]),Ze(!0),Me(!0)}}),(0,$.jsx)(c.Z,{icon:(0,$.jsx)(j.Z,{}),onClick:function(){return de(n.id)}})]})}}]),fe=(0,l.Z)(ve,2),he=fe[0],xe=fe[1],Ze=(0,r.useContext)(z._).setIsModalVisible,me=(0,r.useState)(!1),pe=(0,l.Z)(me,2),je=pe[0],ye=pe[1],ge=(0,y.v9)((function(e){return e.menu}),y.wU).activeMenu,_e=(0,r.useState)(null),we=(0,l.Z)(_e,2),ke=we[0],Ce=we[1],Se=(0,r.useState)(null),be=(0,l.Z)(Se,2),Ye=be[0],Me=be[1],Ie=(0,r.useState)(!1),De=(0,l.Z)(Ie,2),Pe=De[0],Ue=De[1],Ae=(0,y.v9)((function(e){return e.orders}),y.wU),Ke=Ae.orders,Oe=Ae.meta,ze=Ae.loading,Ne=Ae.params,Re=Ae.statistic,Te=null===ge||void 0===ge?void 0:ge.data;(0,w.Z)((function(){var e={search:null===Te||void 0===Te?void 0:Te.search,sort:null===Te||void 0===Te?void 0:Te.sort,column:null===Te||void 0===Te?void 0:Te.column,perPage:null===Te||void 0===Te?void 0:Te.perPage,page:null===Te||void 0===Te?void 0:Te.page,deliveryman:ue,date_from:null===Te||void 0===Te?void 0:Te.date_from,date_to:null===Te||void 0===Te?void 0:Te.date_to,status:"deliveryman.attached"===(null===Te||void 0===Te?void 0:Te.status)||null===Te||void 0===Te?void 0:Te.status,"isset-deliveryman":"deliveryman.attached"===(null===Te||void 0===Te?void 0:Te.status)?1:0};t((0,k.AU)(e))}),[null===ge||void 0===ge?void 0:ge.data]);var Ve=function(){Q(null),se(null),ne(null),de(null)};(0,r.useEffect)((function(){if(null!==ge&&void 0!==ge&&ge.refetch){var e={status:null===Te||void 0===Te?void 0:Te.status,page:null===Te||void 0===Te?void 0:Te.page,perPage:10,type:"delivery",deliveryman:ue};t((0,k.AU)(e)),t((0,g.A_)(ge))}}),[null===ge||void 0===ge?void 0:ge.refetch]);var Ee={selectedRowKeys:ke,onChange:function(e){Ce(e)}};return(0,$.jsxs)("div",{children:[(0,$.jsx)("div",{children:ze?(0,$.jsx)(T.Z,{}):(0,$.jsx)(V.Z,{data:Re})}),(0,$.jsxs)(f.Z,{title:E("orders"),extra:(0,$.jsxs)(v.Z,{wrap:!0,children:[(0,$.jsx)(q,{format:"YYYY-MM-DD",onChange:function(e){return n=e,void t((0,g.nc)({activeMenu:ge,data:(0,d.Z)((0,d.Z)({},Te),{},{date_from:n?L()(null===n||void 0===n?void 0:n[0]).format("YYYY-MM-DD").toString():void 0,date_to:n?L()(null===n||void 0===n?void 0:n[1]).format("YYYY-MM-DD").toString():void 0})}));var n}}),(0,$.jsx)(K.Z,{type:"danger",onClick:function(){null===ke||0===ke.length?A.Am.warning(E("select.the.product")):(Ze(!0),Me(!1))},children:E("delete.all")}),(0,$.jsx)(c.Z,{onClick:function(){ye(!0),O.Z.export().then((function(e){var n=R.S0+e.data.file_name;window.location.href=n})).finally((function(){return ye(!1)}))},loading:je,children:E("export")}),(0,$.jsx)(I.Z,{setColumns:xe,columns:he})]}),children:[(0,$.jsx)("div",{className:"mt-2 mb-4",children:(0,$.jsx)(S.Z,{placeholder:E("search"),width:480,handleChange:function(e){return n=e,a="search",void t((0,g.nc)({activeMenu:ge,data:(0,d.Z)((0,d.Z)({},Te),{},(0,i.Z)({},a,n))}));var n,a},defaultValue:null===(e=ge.data)||void 0===e?void 0:e.search,resetSearch:!(null!==(n=ge.data)&&void 0!==n&&n.search)})}),(0,$.jsx)(s.Z,{onChange:function(e){var n=e;t((0,g.nc)({activeMenu:ge,data:{status:n}}))},type:"card",activeKey:null===Te||void 0===Te?void 0:Te.status,children:ce.map((function(e){return(0,$.jsx)(B,{tab:E(e.name)},e.name)}))}),(0,$.jsx)(h.Z,{scroll:{x:!0},rowSelection:Ee,columns:null===he||void 0===he?void 0:he.filter((function(e){return e.is_show})),dataSource:Ke,loading:ze,pagination:{pageSize:Ne.perPage,page:Ne.page,total:Oe.total,defaultCurrent:Ne.page},rowKey:function(e){return e.id},onChange:function(e,n,i){var a=e.pageSize,l=e.current,r=i.field,o=i.order,s=(0,C.Z)(o);t((0,g.nc)({activeMenu:ge,data:(0,d.Z)((0,d.Z)({},ge.data),{},{perPage:a,page:l,column:r,sort:s})}))}}),J&&(0,$.jsx)(Y.Z,{orderDetails:J,handleCancel:Ve,status:ce}),oe&&(0,$.jsx)(M.Z,{orderDetails:oe,handleCancel:Ve}),ee&&(0,$.jsx)(P.Z,{id:ee,handleCancel:Ve}),ae&&(0,$.jsx)(U.Z,{id:ae,handleCancel:Ve}),(0,$.jsx)(N.Z,{click:function(){Ue(!0);var e=(0,d.Z)({},Object.assign.apply(Object,[{}].concat((0,a.Z)(ke.map((function(e,n){return(0,i.Z)({},"ids[".concat(n,"]"),e)}))))));O.Z.delete(e).then((function(){A.Am.success(E("successfully.deleted")),Ze(!1),t((0,k.AU)()),Me(null)})).finally((function(){return Ue(!1)}))},text:E(Ye?"delete":"all.delete"),loading:Pe,setText:Ce})]})]})}}}]);