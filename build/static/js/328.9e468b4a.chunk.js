"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[328],{50328:function(e,t,n){n.r(t);var a=n(1413),i=n(93433),l=n(4942),s=n(29439),r=n(47313),c=n(58467),u=n(34491),o=n(18197),d=n(77181),f=n(68197),m=n(59624),h=n(66672),g=n(59491),Z=n(72652),v=n(2717),p=n(90954),x=(n(97421),n(24511)),j=n(73431),b=n(75336),y=n(37889),N=n(61197),w=n(60692),I=n(46417);t.default=function(){var e,t,n=(0,x.$)().t,k=(0,v.v9)((function(e){return e.menu}),v.wU).activeMenu,q=(0,v.I0)(),F=o.Z.useForm(),L=(0,s.Z)(F,1)[0],S=(0,c.s0)(),U=(0,c.UO)().id,M=(0,r.useState)(null!==(e=k.data)&&void 0!==e&&e.img?null===(t=k.data)||void 0===t?void 0:t.img:[]),O=(0,s.Z)(M,2),V=O[0],_=O[1],A=(0,r.useState)(!1),C=(0,s.Z)(A,2),E=C[0],z=C[1],B=(0,r.useState)(!1),T=(0,s.Z)(B,2),$=T[0],D=T[1],G=(0,v.v9)((function(e){return e.formLang}),v.wU),H=G.languages,J=G.defaultLang;(0,r.useEffect)((function(){return function(){var e=L.getFieldsValue(!0);q((0,p.nc)({activeMenu:k,data:e}))}}),[]);var K=function(e){return e.map((function(e){return{uid:e,name:e,url:e}}))};var P=function(e){D(!0),N.Z.getById(e).then((function(e){var t=e.data,n=(0,a.Z)({images:K([t.img])},function(e){if(!e)return{};var t=e.translations,n=H.map((function(e){var n;return(0,l.Z)({},"title[".concat(e.locale,"]"),null===(n=t.find((function(t){return t.locale===e.locale})))||void 0===n?void 0:n.title)}));return Object.assign.apply(Object,[{}].concat((0,i.Z)(n)))}(t));L.setFieldsValue(n),_(K([t.img])),q((0,p.nc)({activeMenu:k,data:n}))})).finally((function(){q((0,p.A_)(k)),D(!1)}))};return(0,r.useEffect)((function(){k.refetch&&P(U)}),[k.refetch]),(0,I.jsx)(d.Z,{title:n("edit.shop.tag"),className:"h-100",extra:(0,I.jsx)(j.Z,{}),children:$?(0,I.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,I.jsx)(Z.Z,{size:"large",className:"py-5"})}):(0,I.jsxs)(o.Z,{name:"edit.shop.tag",layout:"vertical",onFinish:function(e){var t={images:V.map((function(e){return e.name})),title:(0,b.Z)(H,e,"title")};z(!0);var i="shop-tag";N.Z.update(U,t).then((function(){u.Am.success(n("successfully.created")),q((0,p.ph)((0,a.Z)((0,a.Z)({},k),{},{nextUrl:i}))),S("/".concat(i)),q((0,w.S)())})).finally((function(){return z(!1)}))},form:L,initialValues:(0,a.Z)({active:!0},k.data),className:"d-flex flex-column h-100",children:[(0,I.jsxs)(f.Z,{gutter:12,children:[(0,I.jsx)(m.Z,{span:12,children:H.map((function(e){return(0,I.jsx)(o.Z.Item,{label:n("title"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===J,message:n("required")}],hidden:e.locale!==J,children:(0,I.jsx)(h.Z,{})},"title"+e.locale)}))}),(0,I.jsx)(m.Z,{span:24,children:(0,I.jsx)(o.Z.Item,{rules:[{required:!0,message:n("required")}],label:n("image"),name:"images",children:(0,I.jsx)(y.Z,{type:"shop-tags",imageList:V,setImageList:_,form:L,multiple:!1})})})]}),(0,I.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,I.jsx)("div",{className:"pb-5",children:(0,I.jsx)(g.Z,{type:"primary",htmlType:"submit",loading:E,disabled:E,children:n("submit")})})})]})})}}}]);