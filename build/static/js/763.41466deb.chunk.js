"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[763],{80812:function(e,n,t){t.d(n,{Z:function(){return T}});var r=t(1413),i=t(29439),s=t(47313),a=t(18197),l=t(45705),d=t(59491),u=t(58467),o=t(74165),c=t(4942),m=t(15861),h=t(68197),Z=t(59624),x=t(77181),p=t(66672),j=t(86345),f=t(6289),g=t(46155),v=t(74294),y=t(52421),b=t(49986),_=t(2717),k=t(24511),w=t(30763),I=t(97388),q=t(75049),S=t(37889),N=t(98447),F=t(74551),L=t(45005),C=t(13622),Y=t(61197),D=t(46417),M=function(e){var n=e.logoImage,t=e.setLogoImage,r=e.backImage,l=e.setBackImage,u=e.form,M=e.location,O=e.setLocation,H=e.user,B=(0,k.$)().t,T=(0,s.useState)(null),A=(0,i.Z)(T,2),P=A[0],R=A[1],U=(0,s.useState)(null),V=(0,i.Z)(U,2),z=V[0],$=V[1],E=(0,s.useState)(null),J=(0,i.Z)(E,2),W=J[0],G=J[1],K=(0,_.v9)((function(e){return e.formLang}),_.wU),Q=K.defaultLang,X=K.languages;function ee(){return(ee=(0,m.Z)((0,o.Z)().mark((function e(n){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n,roles:"user",empty_shop:1},G(!1),e.abrupt("return",b.Z.search(t).then((function(e){return e.data.map((function(e){return{label:e.firstname+" "+(e.lastname?e.lastname:""),value:e.id}}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return(ne=(0,m.Z)((0,o.Z)().mark((function e(n){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n,type:"shop"},G(!1),e.abrupt("return",w.Z.getAll(t).then((function(e){return e.data.map((function(e){var n;return{label:(null===(n=e.translation)||void 0===n?void 0:n.title)||"no name",value:e.id}}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=(0,m.Z)((0,o.Z)().mark((function e(n){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!1),t={search:n},e.abrupt("return",Y.Z.getAll(t).then((function(e){return e.data.map((function(e){var n;return{label:(null===(n=e.translation)||void 0===n?void 0:n.title)||"no name",value:e.id}}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re=function(){R(!0),G(!0)},ie=function(){$(!0),G(!0)},se=function(){R(!1),$(!1)};return(0,D.jsxs)(h.Z,{gutter:12,children:[(0,D.jsx)(Z.Z,{span:24,children:(0,D.jsx)(x.Z,{children:(0,D.jsxs)(h.Z,{gutter:12,children:[(0,D.jsx)(Z.Z,{span:4,children:(0,D.jsx)(a.Z.Item,{label:B("logo.image"),children:(0,D.jsx)(S.Z,{type:"shops/logo",imageList:n,setImageList:t,form:u,multiple:!1,name:"logo_img"})})}),(0,D.jsx)(Z.Z,{span:4,children:(0,D.jsx)(a.Z.Item,{label:B("background.image"),children:(0,D.jsx)(S.Z,{type:"shops/background",imageList:r,setImageList:l,form:u,multiple:!1,name:"background_img"})})}),(0,D.jsx)(Z.Z,{span:10,children:(0,D.jsx)(a.Z.Item,{label:B("status.note"),name:"status_note",children:(0,D.jsx)(y.Z,{rows:4})})}),(0,D.jsx)(Z.Z,{span:4,children:(0,D.jsx)(a.Z.Item,{name:"status",label:B("status"),children:(0,D.jsx)(p.Z,{disabled:!0})})}),(0,D.jsx)(Z.Z,{span:2,children:(0,D.jsx)(a.Z.Item,{label:B("open"),name:"open",valuePropName:"checked",children:(0,D.jsx)(j.Z,{disabled:!0})})})]})})}),(0,D.jsx)(Z.Z,{span:24,children:(0,D.jsx)(x.Z,{title:B("general"),children:(0,D.jsxs)(h.Z,{gutter:12,children:[(0,D.jsx)(Z.Z,{span:12,children:(0,D.jsxs)(h.Z,{gutter:12,children:[(0,D.jsx)(Z.Z,{span:24,children:X.map((function(e,n){return(0,D.jsx)(a.Z.Item,{label:B("title"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===Q,message:B("required")},{min:2,message:B("title.requared")}],hidden:e.locale!==Q,children:(0,D.jsx)(p.Z,{})},"title"+n)}))}),(0,D.jsx)(Z.Z,{span:24,children:(0,D.jsx)(a.Z.Item,{label:B("phone"),name:"phone",rules:[{required:!0,message:B("required")}],children:(0,D.jsx)(f.Z,{min:0,className:"w-100"})})})]})}),(0,D.jsx)(Z.Z,{span:12,children:X.map((function(e,n){return(0,D.jsx)(a.Z.Item,{label:B("description"),name:"description[".concat(e.locale,"]"),rules:[{required:e.locale===Q,message:B("required")},{min:3,message:B("requared")}],hidden:e.locale!==Q,children:(0,D.jsx)(y.Z,{rows:4})},"desc"+n)}))}),(0,D.jsx)(Z.Z,{span:8,children:(0,D.jsx)(a.Z.Item,{label:B("restaurant.tags"),name:"tags",rules:[{required:!1,message:B("required")}],children:(0,D.jsx)(C.R,{mode:"multiple",fetchOptions:function(e){return te.apply(this,arguments)},refetch:W})})}),(0,D.jsx)(Z.Z,{span:8,children:(0,D.jsx)(a.Z.Item,{label:B("seller"),name:"user",rules:[{required:!0,message:B("required")}],children:(0,D.jsx)(C.R,{disabled:H,fetchOptions:function(e){return ee.apply(this,arguments)},refetch:W,dropdownRender:function(e){return(0,D.jsxs)(D.Fragment,{children:[e,(0,D.jsx)(g.Z,{style:{margin:"8px 0"}}),(0,D.jsx)(d.Z,{className:"w-100",disabled:H,icon:(0,D.jsx)(N.Z,{}),onClick:re,children:B("add.user")})]})}})})}),(0,D.jsx)(Z.Z,{span:8,children:(0,D.jsx)(a.Z.Item,{label:B("categories"),name:"categories",rules:[{required:!0,message:B("required")}],children:(0,D.jsx)(C.R,{mode:"multiple",fetchOptions:function(e){return ne.apply(this,arguments)},refetch:W,dropdownRender:function(e){return(0,D.jsxs)(D.Fragment,{children:[e,(0,D.jsx)(g.Z,{style:{margin:"8px 0"}}),(0,D.jsx)(d.Z,{className:"w-100",icon:(0,D.jsx)(N.Z,{}),onClick:ie,children:B("add.category")})]})}})})})]})})}),(0,D.jsx)(Z.Z,{span:8,children:(0,D.jsx)(x.Z,{title:B("delivery"),children:(0,D.jsxs)(h.Z,{gutter:8,children:[(0,D.jsx)(Z.Z,{span:12,children:(0,D.jsx)(a.Z.Item,{name:"price",label:B("min.price"),rules:[{required:!0,message:B("required")}],children:(0,D.jsx)(f.Z,{className:"w-100"})})}),(0,D.jsx)(Z.Z,{span:12,children:(0,D.jsx)(a.Z.Item,{name:"price_per_km",label:B("price.per.km"),rules:[{required:!0,message:B("required")}],children:(0,D.jsx)(f.Z,{className:"w-100"})})})]})})}),(0,D.jsx)(Z.Z,{span:8,children:(0,D.jsx)(x.Z,{title:B("delivery.time"),children:(0,D.jsxs)(h.Z,{gutter:12,children:[(0,D.jsx)(Z.Z,{span:12,children:(0,D.jsx)(a.Z.Item,{name:"delivery_time_type",label:B("delivery_time_type"),rules:[{required:!0,message:B("required")}],children:(0,D.jsxs)(v.Z,{className:"w-100",children:[(0,D.jsx)(v.Z.Option,{value:"minute",label:B("minutes")}),(0,D.jsx)(v.Z.Option,{value:"hour",label:B("hour")})]})})}),(0,D.jsx)(Z.Z,{span:12,children:(0,D.jsx)(a.Z.Item,{name:"delivery_time_from",label:B("delivery_time_from"),rules:[{required:!0,message:B("required")}],children:(0,D.jsx)(f.Z,{className:"w-100"})})}),(0,D.jsx)(Z.Z,{span:12,children:(0,D.jsx)(a.Z.Item,{name:"delivery_time_to",label:B("delivery_time_to"),rules:[{required:!0,message:B("required")}],children:(0,D.jsx)(f.Z,{className:"w-100"})})})]})})}),(0,D.jsx)(Z.Z,{span:8,children:(0,D.jsx)(x.Z,{title:B("order.info"),children:(0,D.jsxs)(h.Z,{gutter:12,children:[(0,D.jsx)(Z.Z,{span:12,children:(0,D.jsx)(a.Z.Item,{label:B("min.amount"),name:"min_amount",rules:[{required:!0,message:B("required")}],children:(0,D.jsx)(f.Z,{min:0,className:"w-100"})})}),(0,D.jsx)(Z.Z,{span:12,children:(0,D.jsx)(a.Z.Item,{label:B("tax"),name:"tax",rules:[{required:!0,message:B("required")}],children:(0,D.jsx)(f.Z,{min:0,addonAfter:"%",className:"w-100"})})}),(0,D.jsx)(Z.Z,{span:12,children:(0,D.jsx)(a.Z.Item,{label:B("admin.comission"),name:"percentage",rules:[{required:!0,message:B("required")}],children:(0,D.jsx)(f.Z,{min:0,className:"w-100",addonAfter:"%"})})})]})})}),(0,D.jsx)(Z.Z,{span:24,children:(0,D.jsx)(x.Z,{title:B("address"),children:(0,D.jsxs)(h.Z,{gutter:12,children:[(0,D.jsx)(Z.Z,{span:12,children:X.map((function(e,n){return(0,D.jsx)(q.Z,{setLocation:O,form:u,item:e,idx:n,defaultLang:Q},n)}))}),(0,D.jsx)(Z.Z,{span:24,children:(0,D.jsx)(I.Z,{location:M,setLocation:O,setAddress:function(e){return u.setFieldsValue((0,c.Z)({},"address[".concat(Q,"]"),e))}})})]})})}),P&&(0,D.jsx)(F.Z,{visible:P,handleCancel:function(){return se()}}),z&&(0,D.jsx)(L.Z,{visible:z,handleCancel:function(){return se()}})]})},O=t(90954),H=t(53149),B=t(17649),T=function(e){var n,t,o,c,m,h,Z,x,p,j=e.next,f=e.action_type,g=void 0===f?"":f,v=e.user,y=(0,k.$)().t,b=a.Z.useForm(),w=(0,i.Z)(b,1)[0],I=(0,u.s0)(),q=(0,_.I0)(),S=(0,u.UO)().uuid,N=(0,_.v9)((function(e){return e.menu}),_.wU).activeMenu,F=(0,s.useState)(!1),L=(0,i.Z)(F,2),C=L[0],Y=L[1],T=(0,s.useState)(null!==(n=N.data)&&void 0!==n&&n.logo_img?[null===(t=N.data)||void 0===t?void 0:t.logo_img]:[]),A=(0,i.Z)(T,2),P=A[0],R=A[1],U=(0,s.useState)(null!==(o=N.data)&&void 0!==o&&o.background_img?[null===(c=N.data)||void 0===c?void 0:c.background_img]:[]),V=(0,i.Z)(U,2),z=V[0],$=V[1],E=(0,_.v9)((function(e){return e.globalSettings}),_.wU).settings,J=(0,s.useState)(null!==N&&void 0!==N&&null!==(m=N.data)&&void 0!==m&&m.location?{lat:parseFloat(null===N||void 0===N||null===(h=N.data)||void 0===h||null===(Z=h.location)||void 0===Z?void 0:Z.latitude),lng:parseFloat(null===N||void 0===N||null===(x=N.data)||void 0===x||null===(p=x.location)||void 0===p?void 0:p.longitude)}:(0,B.Z)(E)),W=(0,i.Z)(J,2),G=W[0],K=W[1];(0,s.useEffect)((function(){return function(){var e=w.getFieldsValue(!0);e.open_time=JSON.stringify(null===e||void 0===e?void 0:e.open_time),e.close_time=JSON.stringify(null===e||void 0===e?void 0:e.close_time),q((0,O.nc)({activeMenu:N,data:(0,r.Z)((0,r.Z)({},N.data),e)}))}}),[]);return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(a.Z,{form:w,name:"basic",layout:"vertical",onFinish:function(e){var n,t;Y(!0);var i=(0,r.Z)((0,r.Z)({},e),{},{"images[0]":null===(n=P[0])||void 0===n?void 0:n.name,"images[1]":null===(t=z[0])||void 0===t?void 0:t.name,delivery_time_type:e.delivery_time_type,delivery_time_to:e.delivery_time_to,delivery_time_from:e.delivery_time_from,categories:e.categories.map((function(e){return e.value})),tags:e.tags.map((function(e){return e.value})),user_id:e.user.value,open:void 0,"location[latitude]":G.lat,"location[longitude]":G.lng,user:void 0,delivery_time:0,type:"restaurant"});"edit"===g?function(e,n){H.Z.update(S,n).then((function(){q((0,O.nc)({activeMenu:N,data:e})),j()})).catch((function(e){return console.error(e)})).finally((function(){return Y(!1)}))}(e,i):function(e,n){H.Z.create(n).then((function(n){var t=n.data;q((0,O.SS)({id:"restaurant-".concat(t.uuid),url:"restaurant/".concat(t.uuid),name:y("add.restaurant"),data:(0,r.Z)((0,r.Z)({},t),{},{background_img:{name:null===t||void 0===t?void 0:t.background_img},logo_img:{name:null===t||void 0===t?void 0:t.logo_img}},e),refetch:!1})),I("/restaurant/".concat(t.uuid,"?step=1"))})).catch((function(e){return console.error(e)})).finally((function(){return Y(!1)}))}(e,i)},initialValues:(0,r.Z)({open:!1,status:"new"},N.data),children:[(0,D.jsx)(M,{logoImage:P,setLogoImage:R,backImage:z,setBackImage:$,form:w,location:G,setLocation:K,user:v}),(0,D.jsx)(l.Z,{children:(0,D.jsx)(d.Z,{type:"primary",htmlType:"submit",loading:C,children:y("next")})})]})})}},48662:function(e,n,t){var r=t(93433),i=t(29439),s=t(18197),a=t(68197),l=t(66204),d=t(59624),u=t(45705),o=t(59491),c=t(77181),m=t(99096),h=t(86345),Z=t(47313),x=t(24511),p=t(51282),j=t(70816),f=t.n(j),g=t(78790),v=t(49682),y=t(58467),b=t(21429),_=t(19393),k=t(43681),w=t(11829),I=t(58821),q=t(46417);n.Z=function(e){var n=e.next,t=e.prev,j=s.Z.useForm(),S=(0,i.Z)(j,1)[0],N=(0,x.$)().t,F=(0,Z.useState)([]),L=(0,i.Z)(F,2),C=L[0],Y=L[1],D=(0,Z.useState)(new Array(7).fill(!1)),M=(0,i.Z)(D,2),O=M[0],H=M[1],B=(0,Z.useState)(!1),T=(0,i.Z)(B,2),A=T[0],P=T[1],R=(0,Z.useState)(!1),U=(0,i.Z)(R,2),V=U[0],z=U[1],$=(0,y.UO)().uuid,E=[{from:new Date(1900,4,18),to:new Date}],J=(0,Z.useState)(!0),W=(0,i.Z)(J,2),G=W[0],K=W[1];(0,Z.useEffect)((function(){S.setFieldsValue({working_days:b.P}),$&&(z(!0),v.Z.getById($).then((function(e){Y(e.data.closed_dates.filter((function(e){return e.day>f()(new Date).format("YYYY-MM-DD")})).map((function(e){return new Date(e.day)})))})),g.Z.getById($).then((function(e){H(0!==e.data.dates.length?e.data.dates.map((function(e){return e.disabled})):[]),0!==e.data.dates.length&&S.setFieldsValue({working_days:e.data.dates.map((function(e){return{title:e.day,from:f()(e.from,"HH:mm:ss"),to:f()(e.to,"HH:mm:ss"),disabled:Boolean(e.disabled)}}))})})).finally((function(){return z(!1)})))}),[]);var Q=C&&C.length>0?(0,q.jsxs)(a.Z,{children:[(0,q.jsx)(l.Z,{style:{fontSize:14,padding:"4px 10px",width:"100%",marginTop:"10px"},children:N("Your.existing.vacations")}),(0,q.jsxs)(d.Z,{span:24,className:"mt-2",children:[C.slice(0,G?1:C.length).map((function(e,n){return(0,q.jsxs)(u.Z,{className:"d-flex justify-content-between",style:{borderBottom:"1px solid #4D5B75"},children:[(0,q.jsx)(d.Z,{span:24,style:{fontSize:14,marginTop:"8px"},children:f()(e).format("YYYY-MM-DD")}),(0,q.jsx)(d.Z,{span:24,children:(0,q.jsx)(l.Z,{color:"red",className:"cursor-pointer mt-3 mb-2",style:{fontSize:14},onClick:function(){return n=e,Y(C.filter((function(e){return e!==n})));var n},children:N("remove")})})]},n)})),(0,q.jsx)(o.Z,{className:"mt-3 w-100",onClick:function(){K(!G)},children:G?(0,q.jsx)(I.ahe,{}):(0,q.jsx)(I.dMq,{})})]})]}):(0,q.jsx)(l.Z,{style:{fontSize:14,padding:"4px 10px",width:"100%"},children:"Please pick one or more days."}),X=function(e,n){for(var t=[],r=e;r<n;r++)t.push(r);return t},ee=function(){return{disabledHours:function(){return X(0,1)},disabledMinutes:function(){return X(0,0)},disabledSeconds:function(){return X(0,60)}}};return(0,q.jsx)(q.Fragment,{children:V?(0,q.jsx)(p.Z,{}):(0,q.jsx)(s.Z,{form:S,layout:"vertical",onFinish:function(e){P(!0);var t={dates:C?C.map((function(e){return f()(e).format("YYYY-MM-DD")})):void 0},r={dates:e.working_days.map((function(e){return{day:e.title,from:f()(e.from?e.from:"00").format("HH-mm"),to:f()(e.to?e.to:"00").format("HH-mm"),disabled:e.disabled}}))};v.Z.update($,t).then((function(){n()})).finally((function(){return P(!1)})),0!==e.working_days.length&&g.Z.update($,r).then((function(){n()})).finally((function(){return P(!1)}))},children:(0,q.jsxs)(a.Z,{gutter:12,children:[(0,q.jsx)(d.Z,{span:12,children:(0,q.jsx)(c.Z,{title:N("restaurant.working.days"),children:(0,q.jsx)(a.Z,{gutter:8,children:(0,q.jsx)(d.Z,{span:24,children:(0,q.jsx)(s.Z.List,{name:"working_days",children:function(e){return(0,q.jsx)("div",{children:e.map((function(e,n){return(0,q.jsxs)(a.Z,{gutter:12,align:"center",children:[(0,q.jsx)(d.Z,{span:7,children:(0,q.jsx)(s.Z.Item,{name:[n,"day"],children:(0,q.jsx)("span",{children:N(b.P[n].title)})})}),O[e.key]?(0,q.jsx)(d.Z,{span:13,className:"mt-2",children:(0,q.jsx)("span",{children:N("shop.closed")})}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(d.Z,{span:7,children:(0,q.jsx)(s.Z.Item,{rules:[{required:!1===O[e.key]}],name:[n,"from"],children:(0,q.jsx)(m.Z,{disabledTime:ee,picker:"time",placeholder:N("start.time")})})}),(0,q.jsx)(d.Z,{span:6,children:(0,q.jsx)(s.Z.Item,{rules:[{required:!1===O[e.key]}],name:[n,"to"],children:(0,q.jsx)(m.Z,{disabledTime:ee,picker:"time",placeholder:N("end.time")})})})]}),(0,q.jsx)(d.Z,{span:4,children:(0,q.jsx)(s.Z.Item,{name:[n,"disabled"],valuePropName:"checked",children:(0,q.jsx)(h.Z,{checkedChildren:(0,q.jsx)(k.Z,{}),unCheckedChildren:(0,q.jsx)(w.Z,{}),checked:O[e.key],onChange:function(){return function(e){var n=(0,r.Z)(O);n[e]=!O[e],H(n)}(e.key)}})})})]},e.key)}))})}})})})})}),(0,q.jsx)(d.Z,{span:12,children:(0,q.jsxs)(c.Z,{title:N("restaurant.closed.days"),children:[(0,q.jsx)("p",{children:N("restaurant.closed.days.text")}),(0,q.jsx)(s.Z.Item,{rules:[{required:!1,message:N("required")}],children:(0,q.jsx)(_._W,{className:"datepicker",mode:"multiple",disabled:E,min:1,selected:C,onSelect:Y,footer:Q,showOutsideDays:!0})})]})}),(0,q.jsx)(d.Z,{span:24,children:(0,q.jsxs)(u.Z,{children:[(0,q.jsx)(o.Z,{type:"primary",htmlType:"submit",loading:A,children:N("next")}),(0,q.jsx)(o.Z,{htmlType:"submit",onClick:function(){return t()},children:N("prev")})]})})]})})})}}}]);