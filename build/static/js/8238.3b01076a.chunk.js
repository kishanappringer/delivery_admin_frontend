"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[8238],{18238:function(e,a,s){s.r(a),s.d(a,{default:function(){return S}});var r=s(1413),n=s(29439),l=s(47313),i=s(18197),t=s(77181),d=s(68197),u=s(59624),o=s(66672),m=s(6289),c=s(99096),h=s(74294),p=s(59491),v=s(58467),Z=s(34491),f=s(2717),j=s(90954),x=s(49986),w=s(85746),b=s(24511),g=s(70816),y=s.n(g),q=s(37889),I=s(46417);function S(){var e,a,s=(0,b.$)().t,g=i.Z.useForm(),S=(0,n.Z)(g,1)[0],_=(0,l.useState)(null),k=(0,n.Z)(_,2),N=k[0],F=k[1],M=(0,l.useState)(!1),O=(0,n.Z)(M,2),P=O[0],Y=O[1],D=(0,v.s0)(),T=(0,f.v9)((function(e){return e.menu.activeMenu})),V=(0,f.I0)(),C=(0,l.useState)(null!==T&&void 0!==T&&null!==(e=T.data)&&void 0!==e&&e.image?[null===T||void 0===T||null===(a=T.data)||void 0===a?void 0:a.image]:[]),J=(0,n.Z)(C,2),L=J[0],A=J[1];(0,l.useEffect)((function(){return function(){var e=S.getFieldsValue(!0);e.birthday=JSON.stringify(null===e||void 0===e?void 0:e.birthday),V((0,j.nc)({activeMenu:T,data:(0,r.Z)((0,r.Z)({},T.data),e)}))}}),[]);return(0,I.jsx)(t.Z,{title:s("add.user"),children:(0,I.jsx)(i.Z,{form:S,layout:"vertical",initialValues:(0,r.Z)((0,r.Z)({gender:"male"},T.data),function(){var e,a;if(null===(e=T.data)||void 0===e||!e.birthday)return{};var s=JSON.parse(null===(a=T.data)||void 0===a?void 0:a.birthday);return{birthday:y()(s)}}()),onFinish:function(e){var a;Y(!0);var n={firstname:e.firstname,lastname:e.lastname,email:e.user_email,phone:e.phone,birthday:y()(e.birthday).format("YYYY-MM-DD"),gender:e.gender,password_confirmation:e.password_confirmation,password:e.password,images:[null===(a=L[0])||void 0===a?void 0:a.name]},l="users/user";x.Z.create(n).then((function(){Z.Am.success(s("successfully.created")),V((0,j.ph)((0,r.Z)((0,r.Z)({},T),{},{nextUrl:l}))),D("/".concat(l)),V((0,w.Tu)())})).catch((function(e){return F(e.response.data.params)})).finally((function(){return Y(!1)}))},children:(0,I.jsxs)(d.Z,{gutter:12,children:[(0,I.jsx)(u.Z,{span:24,children:(0,I.jsx)(i.Z.Item,{rules:[{required:!1,message:s("required")}],label:s("avatar"),children:(0,I.jsx)(q.Z,{type:"users",imageList:L,setImageList:A,form:S,multiple:!1})})}),(0,I.jsx)(u.Z,{span:12,children:(0,I.jsx)(i.Z.Item,{label:s("firstname"),name:"firstname",help:null!==N&&void 0!==N&&N.firstname?N.firstname[0]:null,validateStatus:null!==N&&void 0!==N&&N.firstname?"error":"success",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(o.Z,{})})}),(0,I.jsx)(u.Z,{span:12,children:(0,I.jsx)(i.Z.Item,{label:"lastname",name:"lastname",help:null!==N&&void 0!==N&&N.lastname?N.lastname[0]:null,validateStatus:null!==N&&void 0!==N&&N.lastname?"error":"success",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(o.Z,{})})}),(0,I.jsx)(u.Z,{span:12,children:(0,I.jsx)(i.Z.Item,{label:s("phone"),name:"phone",help:null!==N&&void 0!==N&&N.phone?N.phone[0]:null,validateStatus:null!==N&&void 0!==N&&N.phone?"error":"success",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(m.Z,{min:0,className:"w-100"})})}),(0,I.jsx)(u.Z,{span:12,children:(0,I.jsx)(i.Z.Item,{label:s("birthday"),name:"birthday",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(c.Z,{className:"w-100",disabledDate:function(e){return y()().add(-1,"days")<=e}})})}),(0,I.jsx)(u.Z,{span:12,children:(0,I.jsx)(i.Z.Item,{label:s("gender"),name:"gender",rules:[{required:!0,message:s("required")}],children:(0,I.jsxs)(h.Z,{picker:"dayTime",className:"w-100",children:[(0,I.jsx)(h.Z.Option,{value:"male",children:s("male")}),(0,I.jsx)(h.Z.Option,{value:"female",children:s("female")})]})})}),(0,I.jsx)(u.Z,{span:12,children:(0,I.jsx)(i.Z.Item,{label:s("email"),name:"user_email",help:null!==N&&void 0!==N&&N.email?N.email[0]:null,validateStatus:null!==N&&void 0!==N&&N.email?"error":"success",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(o.Z,{type:"email"})})}),(0,I.jsx)(u.Z,{span:12,children:(0,I.jsx)(i.Z.Item,{label:s("password"),name:"password",help:null!==N&&void 0!==N&&N.password?N.password[0]:null,validateStatus:null!==N&&void 0!==N&&N.password?"error":"success",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(o.Z.Password,{type:"password",className:"w-100"})})}),(0,I.jsx)(u.Z,{span:12,children:(0,I.jsx)(i.Z.Item,{label:s("password.confirmation"),help:null!==N&&void 0!==N&&N.password_confirmation?N.password_confirmation[0]:null,validateStatus:null!==N&&void 0!==N&&N.password_confirmation?"error":"success",name:"password_confirmation",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:s("required")},function(e){var a=e.getFieldValue;return{validator:function(e,r){return r&&a("password")!==r?Promise.reject(s("two.passwords.dont.match")):Promise.resolve()}}}],children:(0,I.jsx)(o.Z.Password,{type:"password"})})}),(0,I.jsx)(p.Z,{type:"primary",htmlType:"submit",loading:P,children:s("save")})]})})})}}}]);