(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[2545],{73585:function(e,t,n){"use strict";n.r(t);var r=n(29439),a=n(56140),i=n(99096),c=n(72652),l=n(68197),o=n(59624),u=n(45705),s=n(77181),d=n(59491),f=n(78508),h=n(47313),v=n(63243),x=n(93131),_=n(2717),m=n(2388),p=n(80314),y=n(74776),Z=n.n(y),g=n(58467),j=n(90954),b=n(70816),w=n.n(b),k=n(26441),C=n(53233),q=n(84017),N=n(22133),I=n(46417),R=a.Z.Title,D=a.Z.Text,M=i.Z.RangePicker;t.default=function(){var e=(0,g.TH)(),t=Z().parse(e.search,[])["?category_id"],n=Z().parse(e.search,[])["?product_id"],a=(0,h.useContext)(x.G),i=a.date_from,y=a.date_to,b=a.by_time,S=a.chart,T=a.handleDateRange,z=a.handleChart,H=(0,_.I0)(),E=(0,h.useState)(!1),O=(0,r.Z)(E,2),U=O[0],A=O[1],V=(0,_.v9)((function(e){return e.menu}),_.wU).activeMenu,B=(0,_.v9)((function(e){return e.currency}),_.wU).defaultCurrency,G=(0,_.v9)((function(e){return e.revenueReport}),_.wU),L=G.loading,P=G.revenueList,W=G.chartData,F=(0,h.useState)([{title:"Date",dataIndex:"time",key:"time",is_show:!0,sorter:function(e,t){return w()(e.time).unix()-w()(t.time).unix()}},{title:"Item sold",dataIndex:"count",key:"count",is_show:!0,sorter:function(e,t){return e.count-t.count}},{title:"Orders",dataIndex:"total_quantity",key:"total_quantity",is_show:!0,sorter:function(e,t){return e.total_quantity-t.total_quantity}},{title:"Shipping",key:"delivery_fee",dataIndex:"delivery_fee",render:function(e,t){return(0,q.Z)(t.delivery_fee,null===B||void 0===B?void 0:B.symbol)},is_show:!0,sorter:function(e,t){return e.delivery_fee-t.delivery_fee}},{title:"Returns",key:"canceled_sum",dataIndex:"canceled_sum",render:function(e,t){return(0,q.Z)(t.canceled_sum,null===B||void 0===B?void 0:B.symbol)},is_show:!0,sorter:function(e,t){return e.canceled_sum-t.canceled_sum}},{title:"Net sales",key:"total_price",dataIndex:"total_price",render:function(e,t){return(0,q.Z)(t.total_price,null===B||void 0===B?void 0:B.symbol)},is_show:!0,sorter:function(e,t){return e.total_price-t.total_price}},{title:"Tax",key:"tax",dataIndex:"tax",render:function(e,t){return(0,q.Z)(t.tax,null===B||void 0===B?void 0:B.symbol)},is_show:!0,sorter:function(e,t){return e.tax-t.tax}}]),J=(0,r.Z)(F,2),K=J[0],Q=J[1],X=function(){var e={date_from:i,date_to:y,type:b,chart:S};t&&(e.categories=[t]),n&&(e.products=[n]),$.find((function(e){return e.value===S}))&&H((0,m.eM)(e))},Y=function(){var e={date_from:i,date_to:y,type:b};t&&(e.categories=[t]),n&&(e.products=[n]),H((0,m.Wc)(e))},$=(0,h.useMemo)((function(){return[{label:"Total sales",value:"avg_quantity",qty:"quantity",price:!1},{label:"Net sales",value:"price",qty:"price",price:!0},{label:"Average order price",value:"avg_price",qty:"avg_price",price:!0},{label:"Orders",value:"count",qty:"count",price:!1}]}),[]);return(0,h.useEffect)((function(){$.every((function(e){return e.value!==S}))&&z($[0].value)}),[]),(0,h.useEffect)((function(){V.refetch&&(Y(),X(),H((0,j.A_)(V)))}),[V.refetch]),(0,p.Z)((function(){Y()}),[y,b,S,t,n,i]),(0,p.Z)((function(){X()}),[y,b,S,i]),(0,I.jsxs)(c.Z,{size:"large",spinning:L,children:[(0,I.jsx)(l.Z,{gutter:24,className:"mb-4",children:(0,I.jsx)(o.Z,{span:12,children:(0,I.jsx)(u.Z,{size:"large",children:(0,I.jsx)(M,{defaultValue:[w()(i),w()(y)],onChange:T})})})}),(0,I.jsx)(l.Z,{gutter:24,className:"report-products",children:null===$||void 0===$?void 0:$.map((function(e,t){return(0,I.jsx)(o.Z,{span:6,onClick:function(){return z(e.value)},children:(0,I.jsxs)(s.Z,{className:S===e.value&&"active",children:[(0,I.jsx)(l.Z,{className:"mb-5",children:(0,I.jsx)(o.Z,{children:(0,I.jsx)(D,{children:e.label})})}),(0,I.jsx)(l.Z,{gutter:24,children:(0,I.jsx)(o.Z,{span:18,children:(0,I.jsx)(R,{level:2,children:e.price?(0,q.Z)(W[e.qty],null===B||void 0===B?void 0:B.symbol):W[e.qty]})})})]})},e.label)}))}),(0,I.jsx)(N.Z,{reportData:W,chart_data:"quantities_sum"}),(0,I.jsx)(l.Z,{gutter:24,children:(0,I.jsx)(o.Z,{span:24,children:(0,I.jsxs)(s.Z,{children:[(0,I.jsx)(l.Z,{gutter:24,className:"align-items-center mb-2",children:(0,I.jsxs)(u.Z,{className:"w-100 mr-16 ml-16 justify-content-between",children:[(0,I.jsx)(R,{level:2,className:"mb-0",children:"Revenue"}),(0,I.jsxs)(u.Z,{align:"end",children:[(0,I.jsx)(d.Z,{onClick:function(){A(!0),k.Z.getRevenueReport({date_from:i,date_to:y,type:b,export:"excel"}).then((function(e){var t=e.data.link;t&&(window.location.href=t)})).finally((function(){return A(!1)}))},loading:U,icon:(0,I.jsx)(v.Z,{}),children:"Download"}),(0,I.jsx)(C.Z,{columns:K,setColumns:Q})]})]})}),(0,I.jsx)(f.Z,{columns:null===K||void 0===K?void 0:K.filter((function(e){return e.is_show})),loading:L,dataSource:null===P||void 0===P?void 0:P.paginate})]})})})]})}},63243:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(1413),a=n(47313),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},c=n(17469),l=function(e,t){return a.createElement(c.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:i}))};l.displayName="CloudDownloadOutlined";var o=a.forwardRef(l)},24654:function(){}}]);